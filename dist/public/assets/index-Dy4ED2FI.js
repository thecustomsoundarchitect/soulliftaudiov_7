var G0=t=>{throw TypeError(t)};var Rf=(t,e,n)=>e.has(t)||G0("Cannot "+n);var L=(t,e,n)=>(Rf(t,e,"read from private field"),n?n.call(t):e.get(t)),he=(t,e,n)=>e.has(t)?G0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),se=(t,e,n,r)=>(Rf(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ge=(t,e,n)=>(Rf(t,e,"access private method"),n);var Gc=(t,e,n,r)=>({set _(s){se(t,e,s,n)},get _(){return L(t,e,r)}});function kR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Mb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lb={exports:{}},nh={},Vb={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),jR=Symbol.for("react.portal"),DR=Symbol.for("react.fragment"),OR=Symbol.for("react.strict_mode"),MR=Symbol.for("react.profiler"),LR=Symbol.for("react.provider"),VR=Symbol.for("react.context"),FR=Symbol.for("react.forward_ref"),UR=Symbol.for("react.suspense"),$R=Symbol.for("react.memo"),BR=Symbol.for("react.lazy"),q0=Symbol.iterator;function zR(t){return t===null||typeof t!="object"?null:(t=q0&&t[q0]||t["@@iterator"],typeof t=="function"?t:null)}var Fb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ub=Object.assign,$b={};function fa(t,e,n){this.props=t,this.context=e,this.refs=$b,this.updater=n||Fb}fa.prototype.isReactComponent={};fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bb(){}Bb.prototype=fa.prototype;function _g(t,e,n){this.props=t,this.context=e,this.refs=$b,this.updater=n||Fb}var bg=_g.prototype=new Bb;bg.constructor=_g;Ub(bg,fa.prototype);bg.isPureReactComponent=!0;var K0=Array.isArray,zb=Object.prototype.hasOwnProperty,Eg={current:null},Hb={key:!0,ref:!0,__self:!0,__source:!0};function Wb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zb.call(e,r)&&!Hb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:oc,type:t,key:i,ref:o,props:s,_owner:Eg.current}}function HR(t,e){return{$$typeof:oc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tg(t){return typeof t=="object"&&t!==null&&t.$$typeof===oc}function WR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Q0=/\/+/g;function Pf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WR(""+t.key):e.toString(36)}function Su(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case oc:case jR:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pf(o,0):r,K0(s)?(n="",t!=null&&(n=t.replace(Q0,"$&/")+"/"),Su(s,e,n,"",function(d){return d})):s!=null&&(Tg(s)&&(s=HR(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Q0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",K0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Pf(i,l);o+=Su(i,e,n,c,s)}else if(c=zR(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Pf(i,l++),o+=Su(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(t,e,n){if(t==null)return t;var r=[],s=0;return Su(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},Iu={transition:null},qR={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Iu,ReactCurrentOwner:Eg};function Gb(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!Tg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=fa;fe.Fragment=DR;fe.Profiler=MR;fe.PureComponent=_g;fe.StrictMode=OR;fe.Suspense=UR;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qR;fe.act=Gb;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ub({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Eg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)zb.call(e,c)&&!Hb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:oc,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:VR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LR,_context:t},t.Consumer=t};fe.createElement=Wb;fe.createFactory=function(t){var e=Wb.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:FR,render:t}};fe.isValidElement=Tg;fe.lazy=function(t){return{$$typeof:BR,_payload:{_status:-1,_result:t},_init:GR}};fe.memo=function(t,e){return{$$typeof:$R,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Iu.transition;Iu.transition={};try{t()}finally{Iu.transition=e}};fe.unstable_act=Gb;fe.useCallback=function(t,e){return Ht.current.useCallback(t,e)};fe.useContext=function(t){return Ht.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Ht.current.useEffect(t,e)};fe.useId=function(){return Ht.current.useId()};fe.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Ht.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};fe.useRef=function(t){return Ht.current.useRef(t)};fe.useState=function(t){return Ht.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Ht.current.useTransition()};fe.version="18.3.1";Vb.exports=fe;var g=Vb.exports;const Pn=Mb(g),Sg=kR({__proto__:null,default:Pn},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR=g,QR=Symbol.for("react.element"),YR=Symbol.for("react.fragment"),XR=Object.prototype.hasOwnProperty,JR=KR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZR={key:!0,ref:!0,__self:!0,__source:!0};function qb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XR.call(e,r)&&!ZR.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QR,type:t,key:i,ref:o,props:s,_owner:JR.current}}nh.Fragment=YR;nh.jsx=qb;nh.jsxs=qb;Lb.exports=nh;var a=Lb.exports,Kb={exports:{}},un={},Qb={exports:{}},Yb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,H){var Y=F.length;F.push(H);e:for(;0<Y;){var ie=Y-1>>>1,de=F[ie];if(0<s(de,H))F[ie]=H,F[Y]=de,Y=ie;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var H=F[0],Y=F.pop();if(Y!==H){F[0]=Y;e:for(var ie=0,de=F.length,_e=de>>>1;ie<_e;){var We=2*(ie+1)-1,_t=F[We],at=We+1,X=F[at];if(0>s(_t,Y))at<de&&0>s(X,_t)?(F[ie]=X,F[at]=Y,ie=at):(F[ie]=_t,F[We]=Y,ie=We);else if(at<de&&0>s(X,Y))F[ie]=X,F[at]=Y,ie=at;else break e}}return H}function s(F,H){var Y=F.sortIndex-H.sortIndex;return Y!==0?Y:F.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,p=3,_=!1,I=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=F)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(d)}}function S(F){if(x=!1,b(F),!I)if(n(c)!==null)I=!0,Q(j);else{var H=n(d);H!==null&&te(S,H.startTime-F)}}function j(F,H){I=!1,x&&(x=!1,v(T),T=-1),_=!0;var Y=p;try{for(b(H),f=n(c);f!==null&&(!(f.expirationTime>H)||F&&!A());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,p=f.priorityLevel;var de=ie(f.expirationTime<=H);H=t.unstable_now(),typeof de=="function"?f.callback=de:f===n(c)&&r(c),b(H)}else r(c);f=n(c)}if(f!==null)var _e=!0;else{var We=n(d);We!==null&&te(S,We.startTime-H),_e=!1}return _e}finally{f=null,p=Y,_=!1}}var O=!1,N=null,T=-1,R=5,P=-1;function A(){return!(t.unstable_now()-P<R)}function D(){if(N!==null){var F=t.unstable_now();P=F;var H=!0;try{H=N(!0,F)}finally{H?k():(O=!1,N=null)}}else O=!1}var k;if(typeof y=="function")k=function(){y(D)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=D,k=function(){Z.postMessage(null)}}else k=function(){E(D,0)};function Q(F){N=F,O||(O=!0,k())}function te(F,H){T=E(function(){F(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Q(j))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Y=p;p=H;try{return F()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,H){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=p;p=F;try{return H()}finally{p=Y}},t.unstable_scheduleCallback=function(F,H,Y){var ie=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ie+Y:ie):Y=ie,F){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Y+de,F={id:h++,callback:H,priorityLevel:F,startTime:Y,expirationTime:de,sortIndex:-1},Y>ie?(F.sortIndex=Y,e(d,F),n(c)===null&&F===n(d)&&(x?(v(T),T=-1):x=!0,te(S,Y-ie))):(F.sortIndex=de,e(c,F),I||_||(I=!0,Q(j))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var H=p;return function(){var Y=p;p=H;try{return F.apply(this,arguments)}finally{p=Y}}}})(Yb);Qb.exports=Yb;var eP=Qb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP=g,cn=eP;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xb=new Set,Al={};function Bi(t,e){Ko(t,e),Ko(t+"Capture",e)}function Ko(t,e){for(Al[t]=e,t=0;t<e.length;t++)Xb.add(e[t])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kp=Object.prototype.hasOwnProperty,nP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y0={},X0={};function rP(t){return kp.call(X0,t)?!0:kp.call(Y0,t)?!1:nP.test(t)?X0[t]=!0:(Y0[t]=!0,!1)}function sP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iP(t,e,n,r){if(e===null||typeof e>"u"||sP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function Ng(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ig,Ng);vt[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ig,Ng);vt[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ig,Ng);vt[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Cg(t,e,n,r){var s=vt.hasOwnProperty(e)?vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iP(e,n,s,r)&&(n=null),r||s===null?rP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=tP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),fo=Symbol.for("react.portal"),po=Symbol.for("react.fragment"),Ag=Symbol.for("react.strict_mode"),jp=Symbol.for("react.profiler"),Jb=Symbol.for("react.provider"),Zb=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Op=Symbol.for("react.suspense_list"),Pg=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),eE=Symbol.for("react.offscreen"),J0=Symbol.iterator;function za(t){return t===null||typeof t!="object"?null:(t=J0&&t[J0]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,kf;function tl(t){if(kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kf=e&&e[1]||""}return`
`+kf+t}var jf=!1;function Df(t,e){if(!t||jf)return"";jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?tl(t):""}function oP(t){switch(t.tag){case 5:return tl(t.type);case 16:return tl("Lazy");case 13:return tl("Suspense");case 19:return tl("SuspenseList");case 0:case 2:case 15:return t=Df(t.type,!1),t;case 11:return t=Df(t.type.render,!1),t;case 1:return t=Df(t.type,!0),t;default:return""}}function Mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case po:return"Fragment";case fo:return"Portal";case jp:return"Profiler";case Ag:return"StrictMode";case Dp:return"Suspense";case Op:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zb:return(t.displayName||"Context")+".Consumer";case Jb:return(t._context.displayName||"Context")+".Provider";case Rg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pg:return e=t.displayName||null,e!==null?e:Mp(t.type)||"Memo";case rs:e=t._payload,t=t._init;try{return Mp(t(e))}catch{}}return null}function aP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mp(e);case 8:return e===Ag?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lP(t){var e=tE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qc(t){t._valueTracker||(t._valueTracker=lP(t))}function nE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lp(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Z0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rE(t,e){e=e.checked,e!=null&&Cg(t,"checked",e,!1)}function Vp(t,e){rE(t,e);var n=Ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fp(t,e.type,Ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ex(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fp(t,e,n){(e!=="number"||ed(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nl=Array.isArray;function So(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ds(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Up(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(nl(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ds(n)}}function sE(t,e){var n=Ds(e.value),r=Ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $p(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yc,oE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yc=Yc||document.createElement("div"),Yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cP=["Webkit","ms","Moz","O"];Object.keys(hl).forEach(function(t){cP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hl[e]=hl[t]})});function aE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hl.hasOwnProperty(t)&&hl[t]?(""+e).trim():e+"px"}function lE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var uP=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bp(t,e){if(e){if(uP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function zp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function kg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wp=null,Io=null,No=null;function rx(t){if(t=cc(t)){if(typeof Wp!="function")throw Error(B(280));var e=t.stateNode;e&&(e=ah(e),Wp(t.stateNode,t.type,e))}}function cE(t){Io?No?No.push(t):No=[t]:Io=t}function uE(){if(Io){var t=Io,e=No;if(No=Io=null,rx(t),e)for(t=0;t<e.length;t++)rx(e[t])}}function dE(t,e){return t(e)}function hE(){}var Of=!1;function fE(t,e,n){if(Of)return t(e,n);Of=!0;try{return dE(t,e,n)}finally{Of=!1,(Io!==null||No!==null)&&(hE(),uE())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var r=ah(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Gp=!1;if(Or)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){Gp=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{Gp=!1}function dP(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var fl=!1,td=null,nd=!1,qp=null,hP={onError:function(t){fl=!0,td=t}};function fP(t,e,n,r,s,i,o,l,c){fl=!1,td=null,dP.apply(hP,arguments)}function pP(t,e,n,r,s,i,o,l,c){if(fP.apply(this,arguments),fl){if(fl){var d=td;fl=!1,td=null}else throw Error(B(198));nd||(nd=!0,qp=d)}}function zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sx(t){if(zi(t)!==t)throw Error(B(188))}function mP(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sx(s),t;if(i===r)return sx(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function mE(t){return t=mP(t),t!==null?gE(t):null}function gE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gE(t);if(e!==null)return e;t=t.sibling}return null}var yE=cn.unstable_scheduleCallback,ix=cn.unstable_cancelCallback,gP=cn.unstable_shouldYield,yP=cn.unstable_requestPaint,Ke=cn.unstable_now,vP=cn.unstable_getCurrentPriorityLevel,jg=cn.unstable_ImmediatePriority,vE=cn.unstable_UserBlockingPriority,rd=cn.unstable_NormalPriority,xP=cn.unstable_LowPriority,xE=cn.unstable_IdlePriority,rh=null,er=null;function wP(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(rh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:EP,_P=Math.log,bP=Math.LN2;function EP(t){return t>>>=0,t===0?32:31-(_P(t)/bP|0)|0}var Xc=64,Jc=4194304;function rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=rl(l):(i&=o,i!==0&&(r=rl(i)))}else o=n&~s,o!==0?r=rl(o):i!==0&&(r=rl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function TP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=TP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Kp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=Xc;return Xc<<=1,!(Xc&4194240)&&(Xc=64),t}function Mf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function IP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Dg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ie=0;function _E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bE,Og,EE,TE,SE,Qp=!1,Zc=[],_s=null,bs=null,Es=null,kl=new Map,jl=new Map,is=[],NP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ox(t,e){switch(t){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":kl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(e.pointerId)}}function Wa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cc(e),e!==null&&Og(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function CP(t,e,n,r,s){switch(e){case"focusin":return _s=Wa(_s,t,e,n,r,s),!0;case"dragenter":return bs=Wa(bs,t,e,n,r,s),!0;case"mouseover":return Es=Wa(Es,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return kl.set(i,Wa(kl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jl.set(i,Wa(jl.get(i)||null,t,e,n,r,s)),!0}return!1}function IE(t){var e=di(t.target);if(e!==null){var n=zi(e);if(n!==null){if(e=n.tag,e===13){if(e=pE(n),e!==null){t.blockedOn=e,SE(t.priority,function(){EE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hp=r,n.target.dispatchEvent(r),Hp=null}else return e=cc(n),e!==null&&Og(e),t.blockedOn=n,!1;e.shift()}return!0}function ax(t,e,n){Nu(t)&&n.delete(e)}function AP(){Qp=!1,_s!==null&&Nu(_s)&&(_s=null),bs!==null&&Nu(bs)&&(bs=null),Es!==null&&Nu(Es)&&(Es=null),kl.forEach(ax),jl.forEach(ax)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,Qp||(Qp=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,AP)))}function Dl(t){function e(s){return Ga(s,t)}if(0<Zc.length){Ga(Zc[0],t);for(var n=1;n<Zc.length;n++){var r=Zc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_s!==null&&Ga(_s,t),bs!==null&&Ga(bs,t),Es!==null&&Ga(Es,t),kl.forEach(e),jl.forEach(e),n=0;n<is.length;n++)r=is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<is.length&&(n=is[0],n.blockedOn===null);)IE(n),n.blockedOn===null&&is.shift()}var Co=Wr.ReactCurrentBatchConfig,id=!0;function RP(t,e,n,r){var s=Ie,i=Co.transition;Co.transition=null;try{Ie=1,Mg(t,e,n,r)}finally{Ie=s,Co.transition=i}}function PP(t,e,n,r){var s=Ie,i=Co.transition;Co.transition=null;try{Ie=4,Mg(t,e,n,r)}finally{Ie=s,Co.transition=i}}function Mg(t,e,n,r){if(id){var s=Yp(t,e,n,r);if(s===null)Gf(t,e,r,od,n),ox(t,r);else if(CP(s,t,e,n,r))r.stopPropagation();else if(ox(t,r),e&4&&-1<NP.indexOf(t)){for(;s!==null;){var i=cc(s);if(i!==null&&bE(i),i=Yp(t,e,n,r),i===null&&Gf(t,e,r,od,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gf(t,e,r,null,n)}}var od=null;function Yp(t,e,n,r){if(od=null,t=kg(r),t=di(t),t!==null)if(e=zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vP()){case jg:return 1;case vE:return 4;case rd:case xP:return 16;case xE:return 536870912;default:return 16}default:return 16}}var ys=null,Lg=null,Cu=null;function CE(){if(Cu)return Cu;var t,e=Lg,n=e.length,r,s="value"in ys?ys.value:ys.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Cu=s.slice(t,1<r?1-r:void 0)}function Au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eu(){return!0}function lx(){return!1}function dn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eu:lx,this.isPropagationStopped=lx,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eu)},persist:function(){},isPersistent:eu}),e}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vg=dn(pa),lc=Ue({},pa,{view:0,detail:0}),kP=dn(lc),Lf,Vf,qa,sh=Ue({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(Lf=t.screenX-qa.screenX,Vf=t.screenY-qa.screenY):Vf=Lf=0,qa=t),Lf)},movementY:function(t){return"movementY"in t?t.movementY:Vf}}),cx=dn(sh),jP=Ue({},sh,{dataTransfer:0}),DP=dn(jP),OP=Ue({},lc,{relatedTarget:0}),Ff=dn(OP),MP=Ue({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),LP=dn(MP),VP=Ue({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FP=dn(VP),UP=Ue({},pa,{data:0}),ux=dn(UP),$P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zP[t])?!!e[t]:!1}function Fg(){return HP}var WP=Ue({},lc,{key:function(t){if(t.key){var e=$P[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fg,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GP=dn(WP),qP=Ue({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dx=dn(qP),KP=Ue({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fg}),QP=dn(KP),YP=Ue({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),XP=dn(YP),JP=Ue({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZP=dn(JP),ek=[9,13,27,32],Ug=Or&&"CompositionEvent"in window,pl=null;Or&&"documentMode"in document&&(pl=document.documentMode);var tk=Or&&"TextEvent"in window&&!pl,AE=Or&&(!Ug||pl&&8<pl&&11>=pl),hx=" ",fx=!1;function RE(t,e){switch(t){case"keyup":return ek.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mo=!1;function nk(t,e){switch(t){case"compositionend":return PE(e);case"keypress":return e.which!==32?null:(fx=!0,hx);case"textInput":return t=e.data,t===hx&&fx?null:t;default:return null}}function rk(t,e){if(mo)return t==="compositionend"||!Ug&&RE(t,e)?(t=CE(),Cu=Lg=ys=null,mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AE&&e.locale!=="ko"?null:e.data;default:return null}}var sk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function px(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sk[t.type]:e==="textarea"}function kE(t,e,n,r){cE(r),e=ad(e,"onChange"),0<e.length&&(n=new Vg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ml=null,Ol=null;function ik(t){zE(t,0)}function ih(t){var e=vo(t);if(nE(e))return t}function ok(t,e){if(t==="change")return e}var jE=!1;if(Or){var Uf;if(Or){var $f="oninput"in document;if(!$f){var mx=document.createElement("div");mx.setAttribute("oninput","return;"),$f=typeof mx.oninput=="function"}Uf=$f}else Uf=!1;jE=Uf&&(!document.documentMode||9<document.documentMode)}function gx(){ml&&(ml.detachEvent("onpropertychange",DE),Ol=ml=null)}function DE(t){if(t.propertyName==="value"&&ih(Ol)){var e=[];kE(e,Ol,t,kg(t)),fE(ik,e)}}function ak(t,e,n){t==="focusin"?(gx(),ml=e,Ol=n,ml.attachEvent("onpropertychange",DE)):t==="focusout"&&gx()}function lk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ih(Ol)}function ck(t,e){if(t==="click")return ih(e)}function uk(t,e){if(t==="input"||t==="change")return ih(e)}function dk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:dk;function Ml(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kp.call(e,s)||!Fn(t[s],e[s]))return!1}return!0}function yx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vx(t,e){var n=yx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yx(n)}}function OE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ME(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ed(t.document)}return e}function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hk(t){var e=ME(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OE(n.ownerDocument.documentElement,n)){if(r!==null&&$g(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vx(n,i);var o=vx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fk=Or&&"documentMode"in document&&11>=document.documentMode,go=null,Xp=null,gl=null,Jp=!1;function xx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jp||go==null||go!==ed(r)||(r=go,"selectionStart"in r&&$g(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Ml(gl,r)||(gl=r,r=ad(Xp,"onSelect"),0<r.length&&(e=new Vg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=go)))}function tu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yo={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},Bf={},LE={};Or&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function oh(t){if(Bf[t])return Bf[t];if(!yo[t])return t;var e=yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LE)return Bf[t]=e[n];return t}var VE=oh("animationend"),FE=oh("animationiteration"),UE=oh("animationstart"),$E=oh("transitionend"),BE=new Map,wx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(t,e){BE.set(t,e),Bi(e,[t])}for(var zf=0;zf<wx.length;zf++){var Hf=wx[zf],pk=Hf.toLowerCase(),mk=Hf[0].toUpperCase()+Hf.slice(1);Gs(pk,"on"+mk)}Gs(VE,"onAnimationEnd");Gs(FE,"onAnimationIteration");Gs(UE,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs($E,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function _x(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pP(r,e,void 0,t),t.currentTarget=null}function zE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;_x(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;_x(s,l,d),i=c}}}if(nd)throw t=qp,nd=!1,qp=null,t}function je(t,e){var n=e[rm];n===void 0&&(n=e[rm]=new Set);var r=t+"__bubble";n.has(r)||(HE(e,t,2,!1),n.add(r))}function Wf(t,e,n){var r=0;e&&(r|=4),HE(n,t,r,e)}var nu="_reactListening"+Math.random().toString(36).slice(2);function Ll(t){if(!t[nu]){t[nu]=!0,Xb.forEach(function(n){n!=="selectionchange"&&(gk.has(n)||Wf(n,!1,t),Wf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nu]||(e[nu]=!0,Wf("selectionchange",!1,e))}}function HE(t,e,n,r){switch(NE(e)){case 1:var s=RP;break;case 4:s=PP;break;default:s=Mg}n=s.bind(null,e,n,t),s=void 0,!Gp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=di(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}fE(function(){var d=i,h=kg(n),f=[];e:{var p=BE.get(t);if(p!==void 0){var _=Vg,I=t;switch(t){case"keypress":if(Au(n)===0)break e;case"keydown":case"keyup":_=GP;break;case"focusin":I="focus",_=Ff;break;case"focusout":I="blur",_=Ff;break;case"beforeblur":case"afterblur":_=Ff;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=cx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=DP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=QP;break;case VE:case FE:case UE:_=LP;break;case $E:_=XP;break;case"scroll":_=kP;break;case"wheel":_=ZP;break;case"copy":case"cut":case"paste":_=FP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=dx}var x=(e&4)!==0,E=!x&&t==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var y=d,b;y!==null;){b=y;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Pl(y,v),S!=null&&x.push(Vl(y,S,b)))),E)break;y=y.return}0<x.length&&(p=new _(p,I,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Hp&&(I=n.relatedTarget||n.fromElement)&&(di(I)||I[Mr]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?di(I):null,I!==null&&(E=zi(I),I!==E||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(x=cx,S="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=dx,S="onPointerLeave",v="onPointerEnter",y="pointer"),E=_==null?p:vo(_),b=I==null?p:vo(I),p=new x(S,y+"leave",_,n,h),p.target=E,p.relatedTarget=b,S=null,di(h)===d&&(x=new x(v,y+"enter",I,n,h),x.target=b,x.relatedTarget=E,S=x),E=S,_&&I)t:{for(x=_,v=I,y=0,b=x;b;b=ro(b))y++;for(b=0,S=v;S;S=ro(S))b++;for(;0<y-b;)x=ro(x),y--;for(;0<b-y;)v=ro(v),b--;for(;y--;){if(x===v||v!==null&&x===v.alternate)break t;x=ro(x),v=ro(v)}x=null}else x=null;_!==null&&bx(f,p,_,x,!1),I!==null&&E!==null&&bx(f,E,I,x,!0)}}e:{if(p=d?vo(d):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var j=ok;else if(px(p))if(jE)j=uk;else{j=lk;var O=ak}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=ck);if(j&&(j=j(t,d))){kE(f,j,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Fp(p,"number",p.value)}switch(O=d?vo(d):window,t){case"focusin":(px(O)||O.contentEditable==="true")&&(go=O,Xp=d,gl=null);break;case"focusout":gl=Xp=go=null;break;case"mousedown":Jp=!0;break;case"contextmenu":case"mouseup":case"dragend":Jp=!1,xx(f,n,h);break;case"selectionchange":if(fk)break;case"keydown":case"keyup":xx(f,n,h)}var N;if(Ug)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mo?RE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(AE&&n.locale!=="ko"&&(mo||T!=="onCompositionStart"?T==="onCompositionEnd"&&mo&&(N=CE()):(ys=h,Lg="value"in ys?ys.value:ys.textContent,mo=!0)),O=ad(d,T),0<O.length&&(T=new ux(T,t,null,n,h),f.push({event:T,listeners:O}),N?T.data=N:(N=PE(n),N!==null&&(T.data=N)))),(N=tk?nk(t,n):rk(t,n))&&(d=ad(d,"onBeforeInput"),0<d.length&&(h=new ux("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=N))}zE(f,e)})}function Vl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ad(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pl(t,n),i!=null&&r.unshift(Vl(t,i,s)),i=Pl(t,e),i!=null&&r.push(Vl(t,i,s))),t=t.return}return r}function ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Pl(n,i),c!=null&&o.unshift(Vl(n,c,l))):s||(c=Pl(n,i),c!=null&&o.push(Vl(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yk=/\r\n?/g,vk=/\u0000|\uFFFD/g;function Ex(t){return(typeof t=="string"?t:""+t).replace(yk,`
`).replace(vk,"")}function ru(t,e,n){if(e=Ex(e),Ex(t)!==e&&n)throw Error(B(425))}function ld(){}var Zp=null,em=null;function tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nm=typeof setTimeout=="function"?setTimeout:void 0,xk=typeof clearTimeout=="function"?clearTimeout:void 0,Tx=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof Tx<"u"?function(t){return Tx.resolve(null).then(t).catch(_k)}:nm;function _k(t){setTimeout(function(){throw t})}function qf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Dl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Dl(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),Xn="__reactFiber$"+ma,Fl="__reactProps$"+ma,Mr="__reactContainer$"+ma,rm="__reactEvents$"+ma,bk="__reactListeners$"+ma,Ek="__reactHandles$"+ma;function di(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sx(t);t!==null;){if(n=t[Xn])return n;t=Sx(t)}return e}t=n,n=t.parentNode}return null}function cc(t){return t=t[Xn]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function ah(t){return t[Fl]||null}var sm=[],xo=-1;function qs(t){return{current:t}}function Me(t){0>xo||(t.current=sm[xo],sm[xo]=null,xo--)}function Ae(t,e){xo++,sm[xo]=t.current,t.current=e}var Os={},Ot=qs(Os),Jt=qs(!1),Si=Os;function Qo(t,e){var n=t.type.contextTypes;if(!n)return Os;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(t){return t=t.childContextTypes,t!=null}function cd(){Me(Jt),Me(Ot)}function Ix(t,e,n){if(Ot.current!==Os)throw Error(B(168));Ae(Ot,e),Ae(Jt,n)}function WE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,aP(t)||"Unknown",s));return Ue({},n,r)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Os,Si=Ot.current,Ae(Ot,t),Ae(Jt,Jt.current),!0}function Nx(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=WE(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,Me(Jt),Me(Ot),Ae(Ot,t)):Me(Jt),Ae(Jt,n)}var _r=null,lh=!1,Kf=!1;function GE(t){_r===null?_r=[t]:_r.push(t)}function Tk(t){lh=!0,GE(t)}function Ks(){if(!Kf&&_r!==null){Kf=!0;var t=0,e=Ie;try{var n=_r;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_r=null,lh=!1}catch(s){throw _r!==null&&(_r=_r.slice(t+1)),yE(jg,Ks),s}finally{Ie=e,Kf=!1}}return null}var wo=[],_o=0,dd=null,hd=0,pn=[],mn=0,Ii=null,Sr=1,Ir="";function li(t,e){wo[_o++]=hd,wo[_o++]=dd,dd=t,hd=e}function qE(t,e,n){pn[mn++]=Sr,pn[mn++]=Ir,pn[mn++]=Ii,Ii=t;var r=Sr;t=Ir;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sr=1<<32-Mn(e)+s|n<<s|r,Ir=i+t}else Sr=1<<i|n<<s|r,Ir=t}function Bg(t){t.return!==null&&(li(t,1),qE(t,1,0))}function zg(t){for(;t===dd;)dd=wo[--_o],wo[_o]=null,hd=wo[--_o],wo[_o]=null;for(;t===Ii;)Ii=pn[--mn],pn[mn]=null,Ir=pn[--mn],pn[mn]=null,Sr=pn[--mn],pn[mn]=null}var an=null,sn=null,Le=!1,jn=null;function KE(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,sn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:Sr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,sn=null,!0):!1;default:return!1}}function im(t){return(t.mode&1)!==0&&(t.flags&128)===0}function om(t){if(Le){var e=sn;if(e){var n=e;if(!Cx(t,e)){if(im(t))throw Error(B(418));e=Ts(n.nextSibling);var r=an;e&&Cx(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,Le=!1,an=t)}}else{if(im(t))throw Error(B(418));t.flags=t.flags&-4097|2,Le=!1,an=t}}}function Ax(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function su(t){if(t!==an)return!1;if(!Le)return Ax(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tm(t.type,t.memoizedProps)),e&&(e=sn)){if(im(t))throw QE(),Error(B(418));for(;e;)KE(t,e),e=Ts(e.nextSibling)}if(Ax(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=an?Ts(t.stateNode.nextSibling):null;return!0}function QE(){for(var t=sn;t;)t=Ts(t.nextSibling)}function Yo(){sn=an=null,Le=!1}function Hg(t){jn===null?jn=[t]:jn.push(t)}var Sk=Wr.ReactCurrentBatchConfig;function Ka(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Rx(t){var e=t._init;return e(t._payload)}function YE(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function s(v,y){return v=Cs(v,y),v.index=0,v.sibling=null,v}function i(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,y,b,S){return y===null||y.tag!==6?(y=tp(b,v.mode,S),y.return=v,y):(y=s(y,b),y.return=v,y)}function c(v,y,b,S){var j=b.type;return j===po?h(v,y,b.props.children,S,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rs&&Rx(j)===y.type)?(S=s(y,b.props),S.ref=Ka(v,y,b),S.return=v,S):(S=Mu(b.type,b.key,b.props,null,v.mode,S),S.ref=Ka(v,y,b),S.return=v,S)}function d(v,y,b,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=np(b,v.mode,S),y.return=v,y):(y=s(y,b.children||[]),y.return=v,y)}function h(v,y,b,S,j){return y===null||y.tag!==7?(y=Ei(b,v.mode,S,j),y.return=v,y):(y=s(y,b),y.return=v,y)}function f(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=tp(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kc:return b=Mu(y.type,y.key,y.props,null,v.mode,b),b.ref=Ka(v,null,y),b.return=v,b;case fo:return y=np(y,v.mode,b),y.return=v,y;case rs:var S=y._init;return f(v,S(y._payload),b)}if(nl(y)||za(y))return y=Ei(y,v.mode,b,null),y.return=v,y;iu(v,y)}return null}function p(v,y,b,S){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(v,y,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kc:return b.key===j?c(v,y,b,S):null;case fo:return b.key===j?d(v,y,b,S):null;case rs:return j=b._init,p(v,y,j(b._payload),S)}if(nl(b)||za(b))return j!==null?null:h(v,y,b,S,null);iu(v,b)}return null}function _(v,y,b,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,l(y,v,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Kc:return v=v.get(S.key===null?b:S.key)||null,c(y,v,S,j);case fo:return v=v.get(S.key===null?b:S.key)||null,d(y,v,S,j);case rs:var O=S._init;return _(v,y,b,O(S._payload),j)}if(nl(S)||za(S))return v=v.get(b)||null,h(y,v,S,j,null);iu(y,S)}return null}function I(v,y,b,S){for(var j=null,O=null,N=y,T=y=0,R=null;N!==null&&T<b.length;T++){N.index>T?(R=N,N=null):R=N.sibling;var P=p(v,N,b[T],S);if(P===null){N===null&&(N=R);break}t&&N&&P.alternate===null&&e(v,N),y=i(P,y,T),O===null?j=P:O.sibling=P,O=P,N=R}if(T===b.length)return n(v,N),Le&&li(v,T),j;if(N===null){for(;T<b.length;T++)N=f(v,b[T],S),N!==null&&(y=i(N,y,T),O===null?j=N:O.sibling=N,O=N);return Le&&li(v,T),j}for(N=r(v,N);T<b.length;T++)R=_(N,v,T,b[T],S),R!==null&&(t&&R.alternate!==null&&N.delete(R.key===null?T:R.key),y=i(R,y,T),O===null?j=R:O.sibling=R,O=R);return t&&N.forEach(function(A){return e(v,A)}),Le&&li(v,T),j}function x(v,y,b,S){var j=za(b);if(typeof j!="function")throw Error(B(150));if(b=j.call(b),b==null)throw Error(B(151));for(var O=j=null,N=y,T=y=0,R=null,P=b.next();N!==null&&!P.done;T++,P=b.next()){N.index>T?(R=N,N=null):R=N.sibling;var A=p(v,N,P.value,S);if(A===null){N===null&&(N=R);break}t&&N&&A.alternate===null&&e(v,N),y=i(A,y,T),O===null?j=A:O.sibling=A,O=A,N=R}if(P.done)return n(v,N),Le&&li(v,T),j;if(N===null){for(;!P.done;T++,P=b.next())P=f(v,P.value,S),P!==null&&(y=i(P,y,T),O===null?j=P:O.sibling=P,O=P);return Le&&li(v,T),j}for(N=r(v,N);!P.done;T++,P=b.next())P=_(N,v,T,P.value,S),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?T:P.key),y=i(P,y,T),O===null?j=P:O.sibling=P,O=P);return t&&N.forEach(function(D){return e(v,D)}),Le&&li(v,T),j}function E(v,y,b,S){if(typeof b=="object"&&b!==null&&b.type===po&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Kc:e:{for(var j=b.key,O=y;O!==null;){if(O.key===j){if(j=b.type,j===po){if(O.tag===7){n(v,O.sibling),y=s(O,b.props.children),y.return=v,v=y;break e}}else if(O.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rs&&Rx(j)===O.type){n(v,O.sibling),y=s(O,b.props),y.ref=Ka(v,O,b),y.return=v,v=y;break e}n(v,O);break}else e(v,O);O=O.sibling}b.type===po?(y=Ei(b.props.children,v.mode,S,b.key),y.return=v,v=y):(S=Mu(b.type,b.key,b.props,null,v.mode,S),S.ref=Ka(v,y,b),S.return=v,v=S)}return o(v);case fo:e:{for(O=b.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=s(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=np(b,v.mode,S),y.return=v,v=y}return o(v);case rs:return O=b._init,E(v,y,O(b._payload),S)}if(nl(b))return I(v,y,b,S);if(za(b))return x(v,y,b,S);iu(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=s(y,b),y.return=v,v=y):(n(v,y),y=tp(b,v.mode,S),y.return=v,v=y),o(v)):n(v,y)}return E}var Xo=YE(!0),XE=YE(!1),fd=qs(null),pd=null,bo=null,Wg=null;function Gg(){Wg=bo=pd=null}function qg(t){var e=fd.current;Me(fd),t._currentValue=e}function am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ao(t,e){pd=t,Wg=bo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function wn(t){var e=t._currentValue;if(Wg!==t)if(t={context:t,memoizedValue:e,next:null},bo===null){if(pd===null)throw Error(B(308));bo=t,pd.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var hi=null;function Kg(t){hi===null?hi=[t]:hi.push(t)}function JE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Kg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Lr(t,r)}function Lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function Qg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Lr(t,n)}return s=r.interleaved,s===null?(e.next=e,Kg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Lr(t,n)}function Ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}function Px(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function md(t,e,n,r){var s=t.updateQueue;ss=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=d=c=null,l=i;do{var p=l.lane,_=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,x=l;switch(p=e,_=n,x.tag){case 1:if(I=x.payload,typeof I=="function"){f=I.call(_,f,p);break e}f=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=x.payload,p=typeof I=="function"?I.call(_,f,p):I,p==null)break e;f=Ue({},f,p);break e;case 2:ss=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else _={eventTime:_,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,c=f):h=h.next=_,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ci|=o,t.lanes=o,t.memoizedState=f}}function kx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var uc={},tr=qs(uc),Ul=qs(uc),$l=qs(uc);function fi(t){if(t===uc)throw Error(B(174));return t}function Yg(t,e){switch(Ae($l,e),Ae(Ul,t),Ae(tr,uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$p(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$p(e,t)}Me(tr),Ae(tr,e)}function Jo(){Me(tr),Me(Ul),Me($l)}function eT(t){fi($l.current);var e=fi(tr.current),n=$p(e,t.type);e!==n&&(Ae(Ul,t),Ae(tr,n))}function Xg(t){Ul.current===t&&(Me(tr),Me(Ul))}var Ve=qs(0);function gd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qf=[];function Jg(){for(var t=0;t<Qf.length;t++)Qf[t]._workInProgressVersionPrimary=null;Qf.length=0}var Pu=Wr.ReactCurrentDispatcher,Yf=Wr.ReactCurrentBatchConfig,Ni=0,Fe=null,Je=null,it=null,yd=!1,yl=!1,Bl=0,Ik=0;function St(){throw Error(B(321))}function Zg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function ey(t,e,n,r,s,i){if(Ni=i,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pu.current=t===null||t.memoizedState===null?Rk:Pk,t=n(r,s),yl){i=0;do{if(yl=!1,Bl=0,25<=i)throw Error(B(301));i+=1,it=Je=null,e.updateQueue=null,Pu.current=kk,t=n(r,s)}while(yl)}if(Pu.current=vd,e=Je!==null&&Je.next!==null,Ni=0,it=Je=Fe=null,yd=!1,e)throw Error(B(300));return t}function ty(){var t=Bl!==0;return Bl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Fe.memoizedState=it=t:it=it.next=t,it}function _n(){if(Je===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=it===null?Fe.memoizedState:it.next;if(e!==null)it=e,Je=t;else{if(t===null)throw Error(B(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},it===null?Fe.memoizedState=it=t:it=it.next=t}return it}function zl(t,e){return typeof e=="function"?e(t):e}function Xf(t){var e=_n(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Ni&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Fe.lanes|=h,Ci|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Fn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Fe.lanes|=i,Ci|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jf(t){var e=_n(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Fn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tT(){}function nT(t,e){var n=Fe,r=_n(),s=e(),i=!Fn(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,ny(iT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Hl(9,sT.bind(null,n,r,s,e),void 0,null),ot===null)throw Error(B(349));Ni&30||rT(n,e,s)}return s}function rT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sT(t,e,n,r){e.value=n,e.getSnapshot=r,oT(e)&&aT(t)}function iT(t,e,n){return n(function(){oT(e)&&aT(t)})}function oT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function aT(t){var e=Lr(t,1);e!==null&&Ln(e,t,1,-1)}function jx(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:t},e.queue=t,t=t.dispatch=Ak.bind(null,Fe,t),[e.memoizedState,t]}function Hl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lT(){return _n().memoizedState}function ku(t,e,n,r){var s=Gn();Fe.flags|=t,s.memoizedState=Hl(1|e,n,void 0,r===void 0?null:r)}function ch(t,e,n,r){var s=_n();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&Zg(r,o.deps)){s.memoizedState=Hl(e,n,i,r);return}}Fe.flags|=t,s.memoizedState=Hl(1|e,n,i,r)}function Dx(t,e){return ku(8390656,8,t,e)}function ny(t,e){return ch(2048,8,t,e)}function cT(t,e){return ch(4,2,t,e)}function uT(t,e){return ch(4,4,t,e)}function dT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hT(t,e,n){return n=n!=null?n.concat([t]):null,ch(4,4,dT.bind(null,e,t),n)}function ry(){}function fT(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pT(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function mT(t,e,n){return Ni&21?(Fn(n,e)||(n=wE(),Fe.lanes|=n,Ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function Nk(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Yf.transition;Yf.transition={};try{t(!1),e()}finally{Ie=n,Yf.transition=r}}function gT(){return _n().memoizedState}function Ck(t,e,n){var r=Ns(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yT(t))vT(e,n);else if(n=JE(t,e,n,r),n!==null){var s=Bt();Ln(n,t,r,s),xT(n,e,r)}}function Ak(t,e,n){var r=Ns(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yT(t))vT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Fn(l,o)){var c=e.interleaved;c===null?(s.next=s,Kg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=JE(t,e,s,r),n!==null&&(s=Bt(),Ln(n,t,r,s),xT(n,e,r))}}function yT(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function vT(t,e){yl=yd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}var vd={readContext:wn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},Rk={readContext:wn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:wn,useEffect:Dx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ku(4194308,4,dT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ku(4194308,4,t,e)},useInsertionEffect:function(t,e){return ku(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ck.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:jx,useDebugValue:ry,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=jx(!1),e=t[0];return t=Nk.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,s=Gn();if(Le){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),ot===null)throw Error(B(349));Ni&30||rT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dx(iT.bind(null,r,i,t),[t]),r.flags|=2048,Hl(9,sT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gn(),e=ot.identifierPrefix;if(Le){var n=Ir,r=Sr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ik++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pk={readContext:wn,useCallback:fT,useContext:wn,useEffect:ny,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:pT,useReducer:Xf,useRef:lT,useState:function(){return Xf(zl)},useDebugValue:ry,useDeferredValue:function(t){var e=_n();return mT(e,Je.memoizedState,t)},useTransition:function(){var t=Xf(zl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:tT,useSyncExternalStore:nT,useId:gT,unstable_isNewReconciler:!1},kk={readContext:wn,useCallback:fT,useContext:wn,useEffect:ny,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:pT,useReducer:Jf,useRef:lT,useState:function(){return Jf(zl)},useDebugValue:ry,useDeferredValue:function(t){var e=_n();return Je===null?e.memoizedState=t:mT(e,Je.memoizedState,t)},useTransition:function(){var t=Jf(zl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:tT,useSyncExternalStore:nT,useId:gT,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uh={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=Ns(t),i=Rr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(Ln(e,t,s,r),Ru(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),s=Ns(t),i=Rr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(Ln(e,t,s,r),Ru(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=Ns(t),s=Rr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(Ln(e,t,r,n),Ru(e,t,r))}};function Ox(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,i):!0}function wT(t,e,n){var r=!1,s=Os,i=e.contextType;return typeof i=="object"&&i!==null?i=wn(i):(s=Zt(e)?Si:Ot.current,r=e.contextTypes,i=(r=r!=null)?Qo(t,s):Os),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uh.enqueueReplaceState(e,e.state,null)}function cm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=wn(i):(i=Zt(e)?Si:Ot.current,s.context=Qo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(lm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uh.enqueueReplaceState(s,s.state,null),md(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zo(t,e){try{var n="",r=e;do n+=oP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function um(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jk=typeof WeakMap=="function"?WeakMap:Map;function _T(t,e,n){n=Rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wd||(wd=!0,wm=r),um(t,e)},n}function bT(t,e,n){n=Rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){um(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){um(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=qk.bind(null,t,e,n),e.then(t,t))}function Vx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rr(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var Dk=Wr.ReactCurrentOwner,Xt=!1;function Ut(t,e,n,r){e.child=t===null?XE(e,null,n,r):Xo(e,t.child,n,r)}function Ux(t,e,n,r,s){n=n.render;var i=e.ref;return Ao(e,s),r=ey(t,e,n,r,i,s),n=ty(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Le&&n&&Bg(e),e.flags|=1,Ut(t,e,r,s),e.child)}function $x(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ET(t,e,i,r,s)):(t=Mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(o,r)&&t.ref===e.ref)return Vr(t,e,s)}return e.flags|=1,t=Cs(i,r),t.ref=e.ref,t.return=e,e.child=t}function ET(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ml(i,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Vr(t,e,s)}return dm(t,e,n,r,s)}function TT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(To,nn),nn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(To,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(To,nn),nn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(To,nn),nn|=r;return Ut(t,e,s,n),e.child}function ST(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dm(t,e,n,r,s){var i=Zt(n)?Si:Ot.current;return i=Qo(e,i),Ao(e,s),n=ey(t,e,n,r,i,s),r=ty(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Le&&r&&Bg(e),e.flags|=1,Ut(t,e,n,s),e.child)}function Bx(t,e,n,r,s){if(Zt(n)){var i=!0;ud(e)}else i=!1;if(Ao(e,s),e.stateNode===null)ju(t,e),wT(e,n,r),cm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=wn(d):(d=Zt(n)?Si:Ot.current,d=Qo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Mx(e,o,r,d),ss=!1;var p=e.memoizedState;o.state=p,md(e,r,o,s),c=e.memoizedState,l!==r||p!==c||Jt.current||ss?(typeof h=="function"&&(lm(e,n,h,r),c=e.memoizedState),(l=ss||Ox(e,n,l,r,p,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ZE(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Cn(e.type,l),o.props=d,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=wn(c):(c=Zt(n)?Si:Ot.current,c=Qo(e,c));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Mx(e,o,r,c),ss=!1,p=e.memoizedState,o.state=p,md(e,r,o,s);var I=e.memoizedState;l!==f||p!==I||Jt.current||ss?(typeof _=="function"&&(lm(e,n,_,r),I=e.memoizedState),(d=ss||Ox(e,n,d,r,p,I,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return hm(t,e,n,r,i,s)}function hm(t,e,n,r,s,i){ST(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Nx(e,n,!1),Vr(t,e,i);r=e.stateNode,Dk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xo(e,t.child,null,i),e.child=Xo(e,null,l,i)):Ut(t,e,l,i),e.memoizedState=r.state,s&&Nx(e,n,!0),e.child}function IT(t){var e=t.stateNode;e.pendingContext?Ix(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ix(t,e.context,!1),Yg(t,e.containerInfo)}function zx(t,e,n,r,s){return Yo(),Hg(s),e.flags|=256,Ut(t,e,n,r),e.child}var fm={dehydrated:null,treeContext:null,retryLane:0};function pm(t){return{baseLanes:t,cachePool:null,transitions:null}}function NT(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Ve,s&1),t===null)return om(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fh(o,r,0,null),t=Ei(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=pm(n),e.memoizedState=fm,t):sy(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ok(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Cs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Cs(l,i):(i=Ei(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?pm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=fm,r}return i=t.child,t=i.sibling,r=Cs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sy(t,e){return e=fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ou(t,e,n,r){return r!==null&&Hg(r),Xo(e,t.child,null,n),t=sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ok(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zf(Error(B(422))),ou(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fh({mode:"visible",children:r.children},s,0,null),i=Ei(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xo(e,t.child,null,o),e.child.memoizedState=pm(o),e.memoizedState=fm,i);if(!(e.mode&1))return ou(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Zf(i,r,void 0),ou(t,e,o,r)}if(l=(o&t.childLanes)!==0,Xt||l){if(r=ot,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Lr(t,s),Ln(r,t,s,-1))}return uy(),r=Zf(Error(B(421))),ou(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Kk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,sn=Ts(s.nextSibling),an=e,Le=!0,jn=null,t!==null&&(pn[mn++]=Sr,pn[mn++]=Ir,pn[mn++]=Ii,Sr=t.id,Ir=t.overflow,Ii=e),e=sy(e,r.children),e.flags|=4096,e)}function Hx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),am(t.return,e,n)}function ep(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function CT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ut(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hx(t,n,e);else if(t.tag===19)Hx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ep(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ep(e,!0,n,null,i);break;case"together":ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ju(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Cs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Cs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mk(t,e,n){switch(e.tag){case 3:IT(e),Yo();break;case 5:eT(e);break;case 1:Zt(e.type)&&ud(e);break;case 4:Yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(fd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?NT(t,e,n):(Ae(Ve,Ve.current&1),t=Vr(t,e,n),t!==null?t.sibling:null);Ae(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return CT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,TT(t,e,n)}return Vr(t,e,n)}var AT,mm,RT,PT;AT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mm=function(){};RT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fi(tr.current);var i=null;switch(n){case"input":s=Lp(t,s),r=Lp(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=Up(t,s),r=Up(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ld)}Bp(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Al.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Al.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&je("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};PT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Qa(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Lk(t,e,n){var r=e.pendingProps;switch(zg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return Zt(e.type)&&cd(),It(e),null;case 3:return r=e.stateNode,Jo(),Me(Jt),Me(Ot),Jg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Em(jn),jn=null))),mm(t,e),It(e),null;case 5:Xg(e);var s=fi($l.current);if(n=e.type,t!==null&&e.stateNode!=null)RT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return It(e),null}if(t=fi(tr.current),su(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xn]=e,r[Fl]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<sl.length;s++)je(sl[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Z0(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":tx(r,i),je("invalid",r)}Bp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ru(r.textContent,l,t),s=["children",""+l]):Al.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Qc(r),ex(r,i,!0);break;case"textarea":Qc(r),nx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ld)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xn]=e,t[Fl]=r,AT(t,e,!1,!1),e.stateNode=t;e:{switch(o=zp(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<sl.length;s++)je(sl[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Z0(t,r),s=Lp(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),je("invalid",t);break;case"textarea":tx(t,r),s=Up(t,r),je("invalid",t);break;default:s=r}Bp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rl(t,c):typeof c=="number"&&Rl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Al.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",t):c!=null&&Cg(t,i,c,o))}switch(n){case"input":Qc(t),ex(t,r,!1);break;case"textarea":Qc(t),nx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ds(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?So(t,!!r.multiple,i,!1):r.defaultValue!=null&&So(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)PT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=fi($l.current),fi(tr.current),su(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xn]=e,(i=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:ru(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ru(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xn]=e,e.stateNode=r}return It(e),null;case 13:if(Me(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&sn!==null&&e.mode&1&&!(e.flags&128))QE(),Yo(),e.flags|=98560,i=!1;else if(i=su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Xn]=e}else Yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),i=!1}else jn!==null&&(Em(jn),jn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Ze===0&&(Ze=3):uy())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return Jo(),mm(t,e),t===null&&Ll(e.stateNode.containerInfo),It(e),null;case 10:return qg(e.type._context),It(e),null;case 17:return Zt(e.type)&&cd(),It(e),null;case 19:if(Me(Ve),i=e.memoizedState,i===null)return It(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Qa(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gd(t),o!==null){for(e.flags|=128,Qa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>ea&&(e.flags|=128,r=!0,Qa(i,!1),e.lanes=4194304)}else{if(!r)if(t=gd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Le)return It(e),null}else 2*Ke()-i.renderingStartTime>ea&&n!==1073741824&&(e.flags|=128,r=!0,Qa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Ve.current,Ae(Ve,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return cy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function Vk(t,e){switch(zg(e),e.tag){case 1:return Zt(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jo(),Me(Jt),Me(Ot),Jg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xg(e),null;case 13:if(Me(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Ve),null;case 4:return Jo(),null;case 10:return qg(e.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var au=!1,jt=!1,Fk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Eo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function gm(t,e,n){try{n()}catch(r){He(t,e,r)}}var Wx=!1;function Uk(t,e){if(Zp=id,t=ME(),$g(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var _;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(_=f.firstChild)!==null;)p=f,f=_;for(;;){if(f===t)break t;if(p===n&&++d===s&&(l=o),p===i&&++h===r&&(c=o),(_=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(em={focusedElem:t,selectionRange:n},id=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var x=I.memoizedProps,E=I.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:Cn(e.type,x),E);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(S){He(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return I=Wx,Wx=!1,I}function vl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gm(e,n,i)}s=s.next}while(s!==r)}}function dh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kT(t){var e=t.alternate;e!==null&&(t.alternate=null,kT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[Fl],delete e[rm],delete e[bk],delete e[Ek])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jT(t){return t.tag===5||t.tag===3||t.tag===4}function Gx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ld));else if(r!==4&&(t=t.child,t!==null))for(vm(t,e,n),t=t.sibling;t!==null;)vm(t,e,n),t=t.sibling}function xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xm(t,e,n),t=t.sibling;t!==null;)xm(t,e,n),t=t.sibling}var ut=null,kn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)DT(t,e,n),n=n.sibling}function DT(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(rh,n)}catch{}switch(n.tag){case 5:jt||Eo(n,e);case 6:var r=ut,s=kn;ut=null,Xr(t,e,n),ut=r,kn=s,ut!==null&&(kn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(kn?(t=ut,n=n.stateNode,t.nodeType===8?qf(t.parentNode,n):t.nodeType===1&&qf(t,n),Dl(t)):qf(ut,n.stateNode));break;case 4:r=ut,s=kn,ut=n.stateNode.containerInfo,kn=!0,Xr(t,e,n),ut=r,kn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gm(n,e,o),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!jt&&(Eo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,Xr(t,e,n),jt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function qx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fk),e.forEach(function(r){var s=Qk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ut=l.stateNode,kn=!1;break e;case 3:ut=l.stateNode.containerInfo,kn=!0;break e;case 4:ut=l.stateNode.containerInfo,kn=!0;break e}l=l.return}if(ut===null)throw Error(B(160));DT(i,o,s),ut=null,kn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){He(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)OT(e,t),e=e.sibling}function OT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),Wn(t),r&4){try{vl(3,t,t.return),dh(3,t)}catch(x){He(t,t.return,x)}try{vl(5,t,t.return)}catch(x){He(t,t.return,x)}}break;case 1:Sn(e,t),Wn(t),r&512&&n!==null&&Eo(n,n.return);break;case 5:if(Sn(e,t),Wn(t),r&512&&n!==null&&Eo(n,n.return),t.flags&32){var s=t.stateNode;try{Rl(s,"")}catch(x){He(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rE(s,i),zp(l,o);var d=zp(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?lE(s,f):h==="dangerouslySetInnerHTML"?oE(s,f):h==="children"?Rl(s,f):Cg(s,h,f,d)}switch(l){case"input":Vp(s,i);break;case"textarea":sE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?So(s,!!i.multiple,_,!1):p!==!!i.multiple&&(i.defaultValue!=null?So(s,!!i.multiple,i.defaultValue,!0):So(s,!!i.multiple,i.multiple?[]:"",!1))}s[Fl]=i}catch(x){He(t,t.return,x)}}break;case 6:if(Sn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){He(t,t.return,x)}}break;case 3:if(Sn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(x){He(t,t.return,x)}break;case 4:Sn(e,t),Wn(t);break;case 13:Sn(e,t),Wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ay=Ke())),r&4&&qx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(d=jt)||h,Sn(e,t),jt=d):Sn(e,t),Wn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(q=t,h=t.child;h!==null;){for(f=q=h;q!==null;){switch(p=q,_=p.child,p.tag){case 0:case 11:case 14:case 15:vl(4,p,p.return);break;case 1:Eo(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(x){He(r,n,x)}}break;case 5:Eo(p,p.return);break;case 22:if(p.memoizedState!==null){Qx(f);continue}}_!==null?(_.return=p,q=_):Qx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=aE("display",o))}catch(x){He(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(x){He(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Sn(e,t),Wn(t),r&4&&qx(t);break;case 21:break;default:Sn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jT(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rl(s,""),r.flags&=-33);var i=Gx(t);xm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gx(t);vm(t,l,o);break;default:throw Error(B(161))}}catch(c){He(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $k(t,e,n){q=t,MT(t)}function MT(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||au;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||jt;l=au;var d=jt;if(au=o,(jt=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?Yx(s):c!==null?(c.return=o,q=c):Yx(s);for(;i!==null;)q=i,MT(i),i=i.sibling;q=s,au=l,jt=d}Kx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Kx(t)}}function Kx(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||dh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}jt||e.flags&512&&ym(e)}catch(p){He(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Qx(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Yx(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dh(4,e)}catch(c){He(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){He(e,s,c)}}var i=e.return;try{ym(e)}catch(c){He(e,i,c)}break;case 5:var o=e.return;try{ym(e)}catch(c){He(e,o,c)}}}catch(c){He(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var Bk=Math.ceil,xd=Wr.ReactCurrentDispatcher,iy=Wr.ReactCurrentOwner,yn=Wr.ReactCurrentBatchConfig,we=0,ot=null,Ye=null,yt=0,nn=0,To=qs(0),Ze=0,Wl=null,Ci=0,hh=0,oy=0,xl=null,Qt=null,ay=0,ea=1/0,wr=null,wd=!1,wm=null,Is=null,lu=!1,vs=null,_d=0,wl=0,_m=null,Du=-1,Ou=0;function Bt(){return we&6?Ke():Du!==-1?Du:Du=Ke()}function Ns(t){return t.mode&1?we&2&&yt!==0?yt&-yt:Sk.transition!==null?(Ou===0&&(Ou=wE()),Ou):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t):1}function Ln(t,e,n,r){if(50<wl)throw wl=0,_m=null,Error(B(185));ac(t,n,r),(!(we&2)||t!==ot)&&(t===ot&&(!(we&2)&&(hh|=n),Ze===4&&os(t,yt)),en(t,r),n===1&&we===0&&!(e.mode&1)&&(ea=Ke()+500,lh&&Ks()))}function en(t,e){var n=t.callbackNode;SP(t,e);var r=sd(t,t===ot?yt:0);if(r===0)n!==null&&ix(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ix(n),e===1)t.tag===0?Tk(Xx.bind(null,t)):GE(Xx.bind(null,t)),wk(function(){!(we&6)&&Ks()}),n=null;else{switch(_E(r)){case 1:n=jg;break;case 4:n=vE;break;case 16:n=rd;break;case 536870912:n=xE;break;default:n=rd}n=HT(n,LT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LT(t,e){if(Du=-1,Ou=0,we&6)throw Error(B(327));var n=t.callbackNode;if(Ro()&&t.callbackNode!==n)return null;var r=sd(t,t===ot?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bd(t,r);else{e=r;var s=we;we|=2;var i=FT();(ot!==t||yt!==e)&&(wr=null,ea=Ke()+500,bi(t,e));do try{Wk();break}catch(l){VT(t,l)}while(!0);Gg(),xd.current=i,we=s,Ye!==null?e=0:(ot=null,yt=0,e=Ze)}if(e!==0){if(e===2&&(s=Kp(t),s!==0&&(r=s,e=bm(t,s))),e===1)throw n=Wl,bi(t,0),os(t,r),en(t,Ke()),n;if(e===6)os(t,r);else{if(s=t.current.alternate,!(r&30)&&!zk(s)&&(e=bd(t,r),e===2&&(i=Kp(t),i!==0&&(r=i,e=bm(t,i))),e===1))throw n=Wl,bi(t,0),os(t,r),en(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:ci(t,Qt,wr);break;case 3:if(os(t,r),(r&130023424)===r&&(e=ay+500-Ke(),10<e)){if(sd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nm(ci.bind(null,t,Qt,wr),e);break}ci(t,Qt,wr);break;case 4:if(os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bk(r/1960))-r,10<r){t.timeoutHandle=nm(ci.bind(null,t,Qt,wr),r);break}ci(t,Qt,wr);break;case 5:ci(t,Qt,wr);break;default:throw Error(B(329))}}}return en(t,Ke()),t.callbackNode===n?LT.bind(null,t):null}function bm(t,e){var n=xl;return t.current.memoizedState.isDehydrated&&(bi(t,e).flags|=256),t=bd(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&Em(e)),t}function Em(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function zk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Fn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~oy,e&=~hh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function Xx(t){if(we&6)throw Error(B(327));Ro();var e=sd(t,0);if(!(e&1))return en(t,Ke()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var r=Kp(t);r!==0&&(e=r,n=bm(t,r))}if(n===1)throw n=Wl,bi(t,0),os(t,e),en(t,Ke()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ci(t,Qt,wr),en(t,Ke()),null}function ly(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ea=Ke()+500,lh&&Ks())}}function Ai(t){vs!==null&&vs.tag===0&&!(we&6)&&Ro();var e=we;we|=1;var n=yn.transition,r=Ie;try{if(yn.transition=null,Ie=1,t)return t()}finally{Ie=r,yn.transition=n,we=e,!(we&6)&&Ks()}}function cy(){nn=To.current,Me(To)}function bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xk(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(zg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cd();break;case 3:Jo(),Me(Jt),Me(Ot),Jg();break;case 5:Xg(r);break;case 4:Jo();break;case 13:Me(Ve);break;case 19:Me(Ve);break;case 10:qg(r.type._context);break;case 22:case 23:cy()}n=n.return}if(ot=t,Ye=t=Cs(t.current,null),yt=nn=e,Ze=0,Wl=null,oy=hh=Ci=0,Qt=xl=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}hi=null}return t}function VT(t,e){do{var n=Ye;try{if(Gg(),Pu.current=vd,yd){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yd=!1}if(Ni=0,it=Je=Fe=null,yl=!1,Bl=0,iy.current=null,n===null||n.return===null){Ze=1,Wl=e,Ye=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=Vx(o);if(_!==null){_.flags&=-257,Fx(_,o,l,i,e),_.mode&1&&Lx(i,d,e),e=_,c=d;var I=e.updateQueue;if(I===null){var x=new Set;x.add(c),e.updateQueue=x}else I.add(c);break e}else{if(!(e&1)){Lx(i,d,e),uy();break e}c=Error(B(426))}}else if(Le&&l.mode&1){var E=Vx(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Fx(E,o,l,i,e),Hg(Zo(c,l));break e}}i=c=Zo(c,l),Ze!==4&&(Ze=2),xl===null?xl=[i]:xl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=_T(i,c,e);Px(i,v);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Is===null||!Is.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=bT(i,l,e);Px(i,S);break e}}i=i.return}while(i!==null)}$T(n)}catch(j){e=j,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function FT(){var t=xd.current;return xd.current=vd,t===null?vd:t}function uy(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),ot===null||!(Ci&268435455)&&!(hh&268435455)||os(ot,yt)}function bd(t,e){var n=we;we|=2;var r=FT();(ot!==t||yt!==e)&&(wr=null,bi(t,e));do try{Hk();break}catch(s){VT(t,s)}while(!0);if(Gg(),we=n,xd.current=r,Ye!==null)throw Error(B(261));return ot=null,yt=0,Ze}function Hk(){for(;Ye!==null;)UT(Ye)}function Wk(){for(;Ye!==null&&!gP();)UT(Ye)}function UT(t){var e=zT(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?$T(t):Ye=e,iy.current=null}function $T(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vk(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ye=null;return}}else if(n=Lk(n,e,nn),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);Ze===0&&(Ze=5)}function ci(t,e,n){var r=Ie,s=yn.transition;try{yn.transition=null,Ie=1,Gk(t,e,n,r)}finally{yn.transition=s,Ie=r}return null}function Gk(t,e,n,r){do Ro();while(vs!==null);if(we&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(IP(t,i),t===ot&&(Ye=ot=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lu||(lu=!0,HT(rd,function(){return Ro(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=yn.transition,yn.transition=null;var o=Ie;Ie=1;var l=we;we|=4,iy.current=null,Uk(t,n),OT(n,t),hk(em),id=!!Zp,em=Zp=null,t.current=n,$k(n),yP(),we=l,Ie=o,yn.transition=i}else t.current=n;if(lu&&(lu=!1,vs=t,_d=s),i=t.pendingLanes,i===0&&(Is=null),wP(n.stateNode),en(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wd)throw wd=!1,t=wm,wm=null,t;return _d&1&&t.tag!==0&&Ro(),i=t.pendingLanes,i&1?t===_m?wl++:(wl=0,_m=t):wl=0,Ks(),null}function Ro(){if(vs!==null){var t=_E(_d),e=yn.transition,n=Ie;try{if(yn.transition=null,Ie=16>t?16:t,vs===null)var r=!1;else{if(t=vs,vs=null,_d=0,we&6)throw Error(B(331));var s=we;for(we|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(q=d;q!==null;){var h=q;switch(h.tag){case 0:case 11:case 15:vl(8,h,i)}var f=h.child;if(f!==null)f.return=h,q=f;else for(;q!==null;){h=q;var p=h.sibling,_=h.return;if(kT(h),h===d){q=null;break}if(p!==null){p.return=_,q=p;break}q=_}}}var I=i.alternate;if(I!==null){var x=I.child;if(x!==null){I.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:vl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,q=v;break e}q=i.return}}var y=t.current;for(q=y;q!==null;){o=q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,q=b;else e:for(o=y;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dh(9,l)}}catch(j){He(l,l.return,j)}if(l===o){q=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,q=S;break e}q=l.return}}if(we=s,Ks(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(rh,t)}catch{}r=!0}return r}finally{Ie=n,yn.transition=e}}return!1}function Jx(t,e,n){e=Zo(n,e),e=_T(t,e,1),t=Ss(t,e,1),e=Bt(),t!==null&&(ac(t,1,e),en(t,e))}function He(t,e,n){if(t.tag===3)Jx(t,t,n);else for(;e!==null;){if(e.tag===3){Jx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=Zo(n,t),t=bT(e,t,1),e=Ss(e,t,1),t=Bt(),e!==null&&(ac(e,1,t),en(e,t));break}}e=e.return}}function qk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(yt&n)===n&&(Ze===4||Ze===3&&(yt&130023424)===yt&&500>Ke()-ay?bi(t,0):oy|=n),en(t,e)}function BT(t,e){e===0&&(t.mode&1?(e=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):e=1);var n=Bt();t=Lr(t,e),t!==null&&(ac(t,e,n),en(t,n))}function Kk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BT(t,n)}function Qk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),BT(t,n)}var zT;zT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,Mk(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,Le&&e.flags&1048576&&qE(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ju(t,e),t=e.pendingProps;var s=Qo(e,Ot.current);Ao(e,n),s=ey(null,e,r,t,s,n);var i=ty();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(i=!0,ud(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qg(e),s.updater=uh,e.stateNode=s,s._reactInternals=e,cm(e,r,t,n),e=hm(null,e,r,!0,i,n)):(e.tag=0,Le&&i&&Bg(e),Ut(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ju(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Xk(r),t=Cn(r,t),s){case 0:e=dm(null,e,r,t,n);break e;case 1:e=Bx(null,e,r,t,n);break e;case 11:e=Ux(null,e,r,t,n);break e;case 14:e=$x(null,e,r,Cn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),dm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Bx(t,e,r,s,n);case 3:e:{if(IT(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ZE(t,e),md(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zo(Error(B(423)),e),e=zx(t,e,r,n,s);break e}else if(r!==s){s=Zo(Error(B(424)),e),e=zx(t,e,r,n,s);break e}else for(sn=Ts(e.stateNode.containerInfo.firstChild),an=e,Le=!0,jn=null,n=XE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yo(),r===s){e=Vr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return eT(e),t===null&&om(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,tm(r,s)?o=null:i!==null&&tm(r,i)&&(e.flags|=32),ST(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&om(e),null;case 13:return NT(t,e,n);case 4:return Yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xo(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),Ux(t,e,r,s,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(fd,r._currentValue),r._currentValue=o,i!==null)if(Fn(i.value,o)){if(i.children===s.children&&!Jt.current){e=Vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),am(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),am(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ut(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ao(e,n),s=wn(s),r=r(s),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,s=Cn(r,e.pendingProps),s=Cn(r.type,s),$x(t,e,r,s,n);case 15:return ET(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Cn(r,s),ju(t,e),e.tag=1,Zt(r)?(t=!0,ud(e)):t=!1,Ao(e,n),wT(e,r,s),cm(e,r,s,n),hm(null,e,r,!0,t,n);case 19:return CT(t,e,n);case 22:return TT(t,e,n)}throw Error(B(156,e.tag))};function HT(t,e){return yE(t,e)}function Yk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new Yk(t,e,n,r)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xk(t){if(typeof t=="function")return dy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rg)return 11;if(t===Pg)return 14}return 2}function Cs(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case po:return Ei(n.children,s,i,e);case Ag:o=8,s|=8;break;case jp:return t=gn(12,n,e,s|2),t.elementType=jp,t.lanes=i,t;case Dp:return t=gn(13,n,e,s),t.elementType=Dp,t.lanes=i,t;case Op:return t=gn(19,n,e,s),t.elementType=Op,t.lanes=i,t;case eE:return fh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jb:o=10;break e;case Zb:o=9;break e;case Rg:o=11;break e;case Pg:o=14;break e;case rs:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=gn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ei(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function fh(t,e,n,r){return t=gn(22,t,r,e),t.elementType=eE,t.lanes=n,t.stateNode={isHidden:!1},t}function tp(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function np(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Jk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mf(0),this.expirationTimes=Mf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hy(t,e,n,r,s,i,o,l,c){return t=new Jk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qg(i),t}function Zk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WT(t){if(!t)return Os;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Zt(n))return WE(t,n,e)}return e}function GT(t,e,n,r,s,i,o,l,c){return t=hy(n,r,!0,t,s,i,o,l,c),t.context=WT(null),n=t.current,r=Bt(),s=Ns(n),i=Rr(r,s),i.callback=e??null,Ss(n,i,s),t.current.lanes=s,ac(t,s,r),en(t,r),t}function ph(t,e,n,r){var s=e.current,i=Bt(),o=Ns(s);return n=WT(n),e.context===null?e.context=n:e.pendingContext=n,e=Rr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,o),t!==null&&(Ln(t,s,o,i),Ru(t,s,o)),o}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fy(t,e){Zx(t,e),(t=t.alternate)&&Zx(t,e)}function e2(){return null}var qT=typeof reportError=="function"?reportError:function(t){console.error(t)};function py(t){this._internalRoot=t}mh.prototype.render=py.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));ph(t,e,null,null)};mh.prototype.unmount=py.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){ph(null,t,null,null)}),e[Mr]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=TE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<is.length&&e!==0&&e<is[n].priority;n++);is.splice(n,0,t),n===0&&IE(t)}};function my(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ew(){}function t2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ed(o);i.call(d)}}var o=GT(e,r,t,0,null,!1,!1,"",ew);return t._reactRootContainer=o,t[Mr]=o.current,Ll(t.nodeType===8?t.parentNode:t),Ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ed(c);l.call(d)}}var c=hy(t,0,!1,null,null,!1,!1,"",ew);return t._reactRootContainer=c,t[Mr]=c.current,Ll(t.nodeType===8?t.parentNode:t),Ai(function(){ph(e,c,n,r)}),c}function yh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ed(o);l.call(c)}}ph(e,o,t,s)}else o=t2(n,e,t,s,r);return Ed(o)}bE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rl(e.pendingLanes);n!==0&&(Dg(e,n|1),en(e,Ke()),!(we&6)&&(ea=Ke()+500,Ks()))}break;case 13:Ai(function(){var r=Lr(t,1);if(r!==null){var s=Bt();Ln(r,t,1,s)}}),fy(t,1)}};Og=function(t){if(t.tag===13){var e=Lr(t,134217728);if(e!==null){var n=Bt();Ln(e,t,134217728,n)}fy(t,134217728)}};EE=function(t){if(t.tag===13){var e=Ns(t),n=Lr(t,e);if(n!==null){var r=Bt();Ln(n,t,e,r)}fy(t,e)}};TE=function(){return Ie};SE=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};Wp=function(t,e,n){switch(e){case"input":if(Vp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ah(r);if(!s)throw Error(B(90));nE(r),Vp(r,s)}}}break;case"textarea":sE(t,n);break;case"select":e=n.value,e!=null&&So(t,!!n.multiple,e,!1)}};dE=ly;hE=Ai;var n2={usingClientEntryPoint:!1,Events:[cc,vo,ah,cE,uE,ly]},Ya={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r2={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||e2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{rh=cu.inject(r2),er=cu}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n2;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(e))throw Error(B(200));return Zk(t,e,null,n)};un.createRoot=function(t,e){if(!my(t))throw Error(B(299));var n=!1,r="",s=qT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hy(t,1,!1,null,null,n,!1,r,s),t[Mr]=e.current,Ll(t.nodeType===8?t.parentNode:t),new py(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=mE(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return Ai(t)};un.hydrate=function(t,e,n){if(!gh(e))throw Error(B(200));return yh(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!my(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=qT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=GT(e,null,t,1,n??null,s,!1,i,o),t[Mr]=e.current,Ll(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new mh(e)};un.render=function(t,e,n){if(!gh(e))throw Error(B(200));return yh(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!gh(t))throw Error(B(40));return t._reactRootContainer?(Ai(function(){yh(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};un.unstable_batchedUpdates=ly;un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gh(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return yh(t,e,n,!1,r)};un.version="18.3.1-next-f1338f8080-20240426";function KT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KT)}catch(t){console.error(t)}}KT(),Kb.exports=un;var Hi=Kb.exports;const s2=Mb(Hi);var QT,tw=Hi;QT=tw.createRoot,tw.hydrateRoot;function i2(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var YT={exports:{}},XT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=g;function o2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var a2=typeof Object.is=="function"?Object.is:o2,l2=ta.useState,c2=ta.useEffect,u2=ta.useLayoutEffect,d2=ta.useDebugValue;function h2(t,e){var n=e(),r=l2({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return u2(function(){s.value=n,s.getSnapshot=e,rp(s)&&i({inst:s})},[t,n,e]),c2(function(){return rp(s)&&i({inst:s}),t(function(){rp(s)&&i({inst:s})})},[t]),d2(n),n}function rp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!a2(t,n)}catch{return!0}}function f2(t,e){return e()}var p2=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f2:h2;XT.useSyncExternalStore=ta.useSyncExternalStore!==void 0?ta.useSyncExternalStore:p2;YT.exports=XT;var m2=YT.exports;const g2=Sg.useInsertionEffect,y2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v2=y2?g.useLayoutEffect:g.useEffect,x2=g2||v2,JT=t=>{const e=g.useRef([t,(...n)=>e[0](...n)]).current;return x2(()=>{e[0]=t}),e[1]},w2="popstate",gy="pushState",yy="replaceState",_2="hashchange",nw=[w2,gy,yy,_2],b2=t=>{for(const e of nw)addEventListener(e,t);return()=>{for(const e of nw)removeEventListener(e,t)}},ZT=(t,e)=>m2.useSyncExternalStore(b2,t,e),E2=()=>location.search,T2=({ssrSearch:t=""}={})=>ZT(E2,()=>t),rw=()=>location.pathname,S2=({ssrPath:t}={})=>ZT(rw,t?()=>t:rw),I2=(t,{replace:e=!1,state:n=null}={})=>history[e?yy:gy](n,"",t),N2=(t={})=>[S2(t),I2],sw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[sw]>"u"){for(const t of[gy,yy]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,sw,{value:!0})}const C2=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",e1=(t="")=>t==="/"?"":t,A2=(t,e)=>t[0]==="~"?t.slice(1):e1(e)+t,R2=(t="",e)=>C2(iw(e1(t)),iw(e)),iw=t=>{try{return decodeURI(t)}catch{return t}},t1={hook:N2,searchHook:T2,parser:i2,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},n1=g.createContext(t1),ga=()=>g.useContext(n1),r1={},s1=g.createContext(r1),P2=()=>g.useContext(s1),vh=t=>{const[e,n]=t.hook(t);return[R2(t.base,e),JT((r,s)=>n(A2(r,t.base),s))]},ya=()=>vh(ga()),vy=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return d&&Object.assign(h,d),h})(),...r?[l]:[]]:[!1,null]},k2=t=>vy(ga().parser,t,ya()[0]),j2=({children:t,...e})=>{var h,f;const n=ga(),r=e.hook?t1:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=g.useRef({}),c=l.current,d=c;for(let p in r){const _=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===d&&_!==d[p]&&(l.current=d={...d}),d[p]=_,(_!==r[p]||_!==s[p])&&(s=d)}return g.createElement(n1.Provider,{value:s,children:t})},ow=({children:t,component:e},n)=>e?g.createElement(e,{params:n}):typeof t=="function"?t(n):t,D2=t=>{let e=g.useRef(r1);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},In=({path:t,nest:e,match:n,...r})=>{const s=ga(),[i]=vh(s),[o,l,c]=n??vy(s.parser,t,i,e),d=D2({...P2(),...l});if(!o)return null;const h=c?g.createElement(j2,{base:c},ow(r,d)):ow(r,d);return g.createElement(s1.Provider,{value:d,children:h})},Pr=g.forwardRef((t,e)=>{const n=ga(),[r,s]=vh(n),{to:i="",href:o=i,onClick:l,asChild:c,children:d,className:h,replace:f,state:p,..._}=t,I=JT(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(l==null||l(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&g.isValidElement(d)?g.cloneElement(d,{onClick:I,href:x}):g.createElement("a",{..._,onClick:I,href:x,className:h!=null&&h.call?h(r===o):h,children:d,ref:e})}),i1=t=>Array.isArray(t)?t.flatMap(e=>i1(e&&e.type===g.Fragment?e.props.children:e)):[t],O2=({children:t,location:e})=>{const n=ga(),[r]=vh(n);for(const s of i1(t)){let i=0;if(g.isValidElement(s)&&(i=vy(n.parser,s.props.path,e||r,s.props.nest))[0])return g.cloneElement(s,{match:i})}return null};var dc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xh=typeof window>"u"||"Deno"in globalThis;function fn(){}function M2(t,e){return typeof t=="function"?t(e):t}function L2(t){return typeof t=="number"&&t>=0&&t!==1/0}function V2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Tm(t,e){return typeof t=="function"?t(e):t}function F2(t,e){return typeof t=="function"?t(e):t}function aw(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==xy(o,e.options))return!1}else if(!Gl(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function lw(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ri(e.options.mutationKey)!==Ri(i))return!1}else if(!Gl(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function xy(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ri)(t)}function Ri(t){return JSON.stringify(t,(e,n)=>Sm(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Gl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Gl(t[n],e[n])):!1}function o1(t,e){if(t===e)return t;const n=cw(t)&&cw(e);if(n||Sm(t)&&Sm(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let d=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,d++):(l[f]=o1(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&d++)}return s===o&&d===s?t:l}return e}function U2(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function cw(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sm(t){if(!uw(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!uw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function uw(t){return Object.prototype.toString.call(t)==="[object Object]"}function $2(t){return new Promise(e=>{setTimeout(e,t)})}function B2(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?o1(t,e):e}function z2(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function H2(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var wy=Symbol();function a1(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function W2(t,e){return typeof t=="function"?t(...e):!!t}var gi,us,Uo,Nb,G2=(Nb=class extends dc{constructor(){super();he(this,gi);he(this,us);he(this,Uo);se(this,Uo,e=>{if(!xh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){L(this,us)||this.setEventListener(L(this,Uo))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,us))==null||e.call(this),se(this,us,void 0))}setEventListener(e){var n;se(this,Uo,e),(n=L(this,us))==null||n.call(this),se(this,us,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){L(this,gi)!==e&&(se(this,gi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof L(this,gi)=="boolean"?L(this,gi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gi=new WeakMap,us=new WeakMap,Uo=new WeakMap,Nb),l1=new G2,$o,ds,Bo,Cb,q2=(Cb=class extends dc{constructor(){super();he(this,$o,!0);he(this,ds);he(this,Bo);se(this,Bo,e=>{if(!xh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){L(this,ds)||this.setEventListener(L(this,Bo))}onUnsubscribe(){var e;this.hasListeners()||((e=L(this,ds))==null||e.call(this),se(this,ds,void 0))}setEventListener(e){var n;se(this,Bo,e),(n=L(this,ds))==null||n.call(this),se(this,ds,e(this.setOnline.bind(this)))}setOnline(e){L(this,$o)!==e&&(se(this,$o,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return L(this,$o)}},$o=new WeakMap,ds=new WeakMap,Bo=new WeakMap,Cb),Td=new q2;function K2(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Q2(t){return Math.min(1e3*2**t,3e4)}function c1(t){return(t??"online")==="online"?Td.isOnline():!0}var u1=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sp(t){return t instanceof u1}function d1(t){let e=!1,n=0,r=!1,s;const i=K2(),o=x=>{var E;r||(p(new u1(x)),(E=t.abort)==null||E.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>l1.isFocused()&&(t.networkMode==="always"||Td.isOnline())&&t.canRun(),h=()=>c1(t.networkMode)&&t.canRun(),f=x=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,x),s==null||s(),i.resolve(x))},p=x=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,x),s==null||s(),i.reject(x))},_=()=>new Promise(x=>{var E;s=v=>{(r||d())&&x(v)},(E=t.onPause)==null||E.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),I=()=>{if(r)return;let x;const E=n===0?t.initialPromise:void 0;try{x=E??t.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(f).catch(v=>{var O;if(r)return;const y=t.retry??(xh?0:3),b=t.retryDelay??Q2,S=typeof b=="function"?b(n,v):b,j=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,v);if(e||!j){p(v);return}n++,(O=t.onFail)==null||O.call(t,n,v),$2(S).then(()=>d()?void 0:_()).then(()=>{e?p(v):I()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?I():_().then(I),i)}}var Y2=t=>setTimeout(t,0);function X2(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=Y2;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var mt=X2(),yi,Ab,h1=(Ab=class{constructor(){he(this,yi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),L2(this.gcTime)&&se(this,yi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(xh?1/0:5*60*1e3))}clearGcTimeout(){L(this,yi)&&(clearTimeout(L(this,yi)),se(this,yi,void 0))}},yi=new WeakMap,Ab),zo,vi,hn,xi,Ct,sc,wi,An,xr,Rb,J2=(Rb=class extends h1{constructor(n){super();he(this,An);he(this,zo);he(this,vi);he(this,hn);he(this,xi);he(this,Ct);he(this,sc);he(this,wi);se(this,wi,!1),se(this,sc,n.defaultOptions),this.setOptions(n.options),this.observers=[],se(this,xi,n.client),se(this,hn,L(this,xi).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,se(this,zo,ej(this.options)),this.state=n.state??L(this,zo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=L(this,Ct))==null?void 0:n.promise}setOptions(n){this.options={...L(this,sc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&L(this,hn).remove(this)}setData(n,r){const s=B2(this.state.data,n,this.options);return Ge(this,An,xr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ge(this,An,xr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=L(this,Ct))==null?void 0:s.promise;return(i=L(this,Ct))==null||i.cancel(n),r?r.then(fn).catch(fn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(L(this,zo))}isActive(){return this.observers.some(n=>F2(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Tm(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!V2(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Ct))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=L(this,Ct))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),L(this,hn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(L(this,Ct)&&(L(this,wi)?L(this,Ct).cancel({revert:!0}):L(this,Ct).cancelRetry()),this.scheduleGc()),L(this,hn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,An,xr).call(this,{type:"invalidate"})}fetch(n,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(L(this,Ct))return L(this,Ct).continueRetry(),L(this,Ct).promise}if(n&&this.setOptions(n),!this.options.queryFn){const _=this.observers.find(I=>I.options.queryFn);_&&this.setOptions(_.options)}const s=new AbortController,i=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(se(this,wi,!0),s.signal)})},o=()=>{const _=a1(this.options,r),x=(()=>{const E={client:L(this,xi),queryKey:this.queryKey,meta:this.meta};return i(E),E})();return se(this,wi,!1),this.options.persister?this.options.persister(_,x,this):_(x)},c=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:L(this,xi),state:this.state,fetchFn:o};return i(_),_})();(h=this.options.behavior)==null||h.onFetch(c,this),se(this,vi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&Ge(this,An,xr).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta});const d=_=>{var I,x,E,v;sp(_)&&_.silent||Ge(this,An,xr).call(this,{type:"error",error:_}),sp(_)||((x=(I=L(this,hn).config).onError)==null||x.call(I,_,this),(v=(E=L(this,hn).config).onSettled)==null||v.call(E,this.state.data,_,this)),this.scheduleGc()};return se(this,Ct,d1({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:_=>{var I,x,E,v;if(_===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(_)}catch(y){d(y);return}(x=(I=L(this,hn).config).onSuccess)==null||x.call(I,_,this),(v=(E=L(this,hn).config).onSettled)==null||v.call(E,_,this.state.error,this),this.scheduleGc()},onError:d,onFail:(_,I)=>{Ge(this,An,xr).call(this,{type:"failed",failureCount:_,error:I})},onPause:()=>{Ge(this,An,xr).call(this,{type:"pause"})},onContinue:()=>{Ge(this,An,xr).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),L(this,Ct).start()}},zo=new WeakMap,vi=new WeakMap,hn=new WeakMap,xi=new WeakMap,Ct=new WeakMap,sc=new WeakMap,wi=new WeakMap,An=new WeakSet,xr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Z2(s.data,this.options),fetchMeta:n.meta??null};case"success":return se(this,vi,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return sp(i)&&i.revert&&L(this,vi)?{...L(this,vi),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),mt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),L(this,hn).notify({query:this,type:"updated",action:n})})},Rb);function Z2(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c1(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ej(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Kn,Pb,tj=(Pb=class extends dc{constructor(e={}){super();he(this,Kn);this.config=e,se(this,Kn,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??xy(s,n);let o=this.get(i);return o||(o=new J2({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){L(this,Kn).has(e.queryHash)||(L(this,Kn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=L(this,Kn).get(e.queryHash);n&&(e.destroy(),n===e&&L(this,Kn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return L(this,Kn).get(e)}getAll(){return[...L(this,Kn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>aw(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>aw(e,r)):n}notify(e){mt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){mt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Kn=new WeakMap,Pb),Qn,Ft,_i,Yn,ts,kb,nj=(kb=class extends h1{constructor(n){super();he(this,Yn);he(this,Qn);he(this,Ft);he(this,_i);this.mutationId=n.mutationId,se(this,Ft,n.mutationCache),se(this,Qn,[]),this.state=n.state||f1(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){L(this,Qn).includes(n)||(L(this,Qn).push(n),this.clearGcTimeout(),L(this,Ft).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){se(this,Qn,L(this,Qn).filter(r=>r!==n)),this.scheduleGc(),L(this,Ft).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){L(this,Qn).length||(this.state.status==="pending"?this.scheduleGc():L(this,Ft).remove(this))}continue(){var n;return((n=L(this,_i))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,d,h,f,p,_,I,x,E,v,y,b,S,j,O,N,T,R;const r=()=>{Ge(this,Yn,ts).call(this,{type:"continue"})};se(this,_i,d1({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(P,A)=>{Ge(this,Yn,ts).call(this,{type:"failed",failureCount:P,error:A})},onPause:()=>{Ge(this,Yn,ts).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>L(this,Ft).canRun(this)}));const s=this.state.status==="pending",i=!L(this,_i).canStart();try{if(s)r();else{Ge(this,Yn,ts).call(this,{type:"pending",variables:n,isPaused:i}),await((l=(o=L(this,Ft).config).onMutate)==null?void 0:l.call(o,n,this));const A=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,n));A!==this.state.context&&Ge(this,Yn,ts).call(this,{type:"pending",context:A,variables:n,isPaused:i})}const P=await L(this,_i).start();return await((f=(h=L(this,Ft).config).onSuccess)==null?void 0:f.call(h,P,n,this.state.context,this)),await((_=(p=this.options).onSuccess)==null?void 0:_.call(p,P,n,this.state.context)),await((x=(I=L(this,Ft).config).onSettled)==null?void 0:x.call(I,P,null,this.state.variables,this.state.context,this)),await((v=(E=this.options).onSettled)==null?void 0:v.call(E,P,null,n,this.state.context)),Ge(this,Yn,ts).call(this,{type:"success",data:P}),P}catch(P){try{throw await((b=(y=L(this,Ft).config).onError)==null?void 0:b.call(y,P,n,this.state.context,this)),await((j=(S=this.options).onError)==null?void 0:j.call(S,P,n,this.state.context)),await((N=(O=L(this,Ft).config).onSettled)==null?void 0:N.call(O,void 0,P,this.state.variables,this.state.context,this)),await((R=(T=this.options).onSettled)==null?void 0:R.call(T,void 0,P,n,this.state.context)),P}finally{Ge(this,Yn,ts).call(this,{type:"error",error:P})}}finally{L(this,Ft).runNext(this)}}},Qn=new WeakMap,Ft=new WeakMap,_i=new WeakMap,Yn=new WeakSet,ts=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),mt.batch(()=>{L(this,Qn).forEach(s=>{s.onMutationUpdate(n)}),L(this,Ft).notify({mutation:this,type:"updated",action:n})})},kb);function f1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var br,Rn,ic,jb,rj=(jb=class extends dc{constructor(e={}){super();he(this,br);he(this,Rn);he(this,ic);this.config=e,se(this,br,new Set),se(this,Rn,new Map),se(this,ic,0)}build(e,n,r){const s=new nj({mutationCache:this,mutationId:++Gc(this,ic)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){L(this,br).add(e);const n=uu(e);if(typeof n=="string"){const r=L(this,Rn).get(n);r?r.push(e):L(this,Rn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(L(this,br).delete(e)){const n=uu(e);if(typeof n=="string"){const r=L(this,Rn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&L(this,Rn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uu(e);if(typeof n=="string"){const r=L(this,Rn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=uu(e);if(typeof n=="string"){const s=(r=L(this,Rn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mt.batch(()=>{L(this,br).forEach(e=>{this.notify({type:"removed",mutation:e})}),L(this,br).clear(),L(this,Rn).clear()})}getAll(){return Array.from(L(this,br))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>lw(n,r))}findAll(e={}){return this.getAll().filter(n=>lw(e,n))}notify(e){mt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return mt.batch(()=>Promise.all(e.map(n=>n.continue().catch(fn))))}},br=new WeakMap,Rn=new WeakMap,ic=new WeakMap,jb);function uu(t){var e;return(e=t.options.scope)==null?void 0:e.id}function dw(t){return{onFetch:(e,n)=>{var h,f,p,_,I;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((_=e.state.data)==null?void 0:_.pages)||[],o=((I=e.state.data)==null?void 0:I.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const E=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},v=a1(e.options,e.fetchOptions),y=async(b,S,j)=>{if(x)return Promise.reject();if(S==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:S,direction:j?"backward":"forward",meta:e.options.meta};return E(A),A})(),T=await v(N),{maxPages:R}=e.options,P=j?H2:z2;return{pages:P(b.pages,T,R),pageParams:P(b.pageParams,S,R)}};if(s&&i.length){const b=s==="backward",S=b?sj:hw,j={pages:i,pageParams:o},O=S(r,j);l=await y(j,O,b)}else{const b=t??i.length;do{const S=c===0?o[0]??r.initialPageParam:hw(r,l);if(c>0&&S==null)break;l=await y(l,S),c++}while(c<b)}return l};e.options.persister?e.fetchFn=()=>{var x,E;return(E=(x=e.options).persister)==null?void 0:E.call(x,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function hw(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function sj(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ze,hs,fs,Ho,Wo,ps,Go,qo,Db,ij=(Db=class{constructor(t={}){he(this,ze);he(this,hs);he(this,fs);he(this,Ho);he(this,Wo);he(this,ps);he(this,Go);he(this,qo);se(this,ze,t.queryCache||new tj),se(this,hs,t.mutationCache||new rj),se(this,fs,t.defaultOptions||{}),se(this,Ho,new Map),se(this,Wo,new Map),se(this,ps,0)}mount(){Gc(this,ps)._++,L(this,ps)===1&&(se(this,Go,l1.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,ze).onFocus())})),se(this,qo,Td.subscribe(async t=>{t&&(await this.resumePausedMutations(),L(this,ze).onOnline())})))}unmount(){var t,e;Gc(this,ps)._--,L(this,ps)===0&&((t=L(this,Go))==null||t.call(this),se(this,Go,void 0),(e=L(this,qo))==null||e.call(this),se(this,qo,void 0))}isFetching(t){return L(this,ze).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return L(this,hs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,ze).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=L(this,ze).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Tm(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return L(this,ze).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=L(this,ze).get(r.queryHash),i=s==null?void 0:s.state.data,o=M2(e,i);if(o!==void 0)return L(this,ze).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return mt.batch(()=>L(this,ze).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=L(this,ze).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=L(this,ze);mt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=L(this,ze);return mt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=mt.batch(()=>L(this,ze).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(fn).catch(fn)}invalidateQueries(t,e={}){return mt.batch(()=>(L(this,ze).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=mt.batch(()=>L(this,ze).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(fn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(fn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=L(this,ze).build(this,e);return n.isStaleByTime(Tm(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fn).catch(fn)}fetchInfiniteQuery(t){return t.behavior=dw(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fn).catch(fn)}ensureInfiniteQueryData(t){return t.behavior=dw(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Td.isOnline()?L(this,hs).resumePausedMutations():Promise.resolve()}getQueryCache(){return L(this,ze)}getMutationCache(){return L(this,hs)}getDefaultOptions(){return L(this,fs)}setDefaultOptions(t){se(this,fs,t)}setQueryDefaults(t,e){L(this,Ho).set(Ri(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...L(this,Ho).values()],n={};return e.forEach(r=>{Gl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){L(this,Wo).set(Ri(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...L(this,Wo).values()],n={};return e.forEach(r=>{Gl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...L(this,fs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...L(this,fs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){L(this,ze).clear(),L(this,hs).clear()}},ze=new WeakMap,hs=new WeakMap,fs=new WeakMap,Ho=new WeakMap,Wo=new WeakMap,ps=new WeakMap,Go=new WeakMap,qo=new WeakMap,Db),ms,gs,qt,Er,Dr,Lu,Im,Ob,oj=(Ob=class extends dc{constructor(n,r){super();he(this,Dr);he(this,ms);he(this,gs);he(this,qt);he(this,Er);se(this,ms,n),this.setOptions(r),this.bindMethods(),Ge(this,Dr,Lu).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=L(this,ms).defaultMutationOptions(n),U2(this.options,r)||L(this,ms).getMutationCache().notify({type:"observerOptionsUpdated",mutation:L(this,qt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ri(r.mutationKey)!==Ri(this.options.mutationKey)?this.reset():((s=L(this,qt))==null?void 0:s.state.status)==="pending"&&L(this,qt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=L(this,qt))==null||n.removeObserver(this)}onMutationUpdate(n){Ge(this,Dr,Lu).call(this),Ge(this,Dr,Im).call(this,n)}getCurrentResult(){return L(this,gs)}reset(){var n;(n=L(this,qt))==null||n.removeObserver(this),se(this,qt,void 0),Ge(this,Dr,Lu).call(this),Ge(this,Dr,Im).call(this)}mutate(n,r){var s;return se(this,Er,r),(s=L(this,qt))==null||s.removeObserver(this),se(this,qt,L(this,ms).getMutationCache().build(L(this,ms),this.options)),L(this,qt).addObserver(this),L(this,qt).execute(n)}},ms=new WeakMap,gs=new WeakMap,qt=new WeakMap,Er=new WeakMap,Dr=new WeakSet,Lu=function(){var r;const n=((r=L(this,qt))==null?void 0:r.state)??f1();se(this,gs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Im=function(n){mt.batch(()=>{var r,s,i,o,l,c,d,h;if(L(this,Er)&&this.hasListeners()){const f=L(this,gs).variables,p=L(this,gs).context;(n==null?void 0:n.type)==="success"?((s=(r=L(this,Er)).onSuccess)==null||s.call(r,n.data,f,p),(o=(i=L(this,Er)).onSettled)==null||o.call(i,n.data,null,f,p)):(n==null?void 0:n.type)==="error"&&((c=(l=L(this,Er)).onError)==null||c.call(l,n.error,f,p),(h=(d=L(this,Er)).onSettled)==null||h.call(d,void 0,n.error,f,p))}this.listeners.forEach(f=>{f(L(this,gs))})})},Ob),p1=g.createContext(void 0),m1=t=>{const e=g.useContext(p1);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},aj=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(p1.Provider,{value:t,children:e}));function Xa(t,e){const n=m1(),[r]=g.useState(()=>new oj(n,t));g.useEffect(()=>{r.setOptions(t)},[r,t]);const s=g.useSyncExternalStore(g.useCallback(o=>r.subscribe(mt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=g.useCallback((o,l)=>{r.mutate(o,l).catch(fn)},[r]);if(s.error&&W2(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}async function g1(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Po(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await g1(r),r}const lj=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return await g1(n),await n.json()},cj=new ij({defaultOptions:{queries:{queryFn:lj({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),uj=1,dj=1e6;let ip=0;function hj(){return ip=(ip+1)%Number.MAX_SAFE_INTEGER,ip.toString()}const op=new Map,fw=t=>{if(op.has(t))return;const e=setTimeout(()=>{op.delete(t),_l({type:"REMOVE_TOAST",toastId:t})},dj);op.set(t,e)},fj=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,uj)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?fw(n):t.toasts.forEach(r=>{fw(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Vu=[];let Fu={toasts:[]};function _l(t){Fu=fj(Fu,t),Vu.forEach(e=>{e(Fu)})}function pj({...t}){const e=hj(),n=s=>_l({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>_l({type:"DISMISS_TOAST",toastId:e});return _l({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function y1(){const[t,e]=g.useState(Fu);return g.useEffect(()=>(Vu.push(e),()=>{const n=Vu.indexOf(e);n>-1&&Vu.splice(n,1)}),[t]),{...t,toast:pj,dismiss:n=>_l({type:"DISMISS_TOAST",toastId:n})}}function ee(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function pw(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function v1(...t){return e=>{let n=!1;const r=t.map(s=>{const i=pw(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():pw(t[s],null)}}}}function Re(...t){return g.useCallback(v1(...t),t)}function mj(t,e){const n=g.createContext(e),r=i=>{const{children:o,...l}=i,c=g.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Qs(t,e=[]){let n=[];function r(i,o){const l=g.createContext(o),c=n.length;n=[...n,o];const d=f=>{var v;const{scope:p,children:_,...I}=f,x=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,E=g.useMemo(()=>I,Object.values(I));return a.jsx(x.Provider,{value:E,children:_})};d.displayName=i+"Provider";function h(f,p){var x;const _=((x=p==null?void 0:p[t])==null?void 0:x[c])||l,I=g.useContext(_);if(I)return I;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>g.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,gj(s,...e)]}function gj(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function na(t){const e=vj(t),n=g.forwardRef((r,s)=>{const{children:i,...o}=r,l=g.Children.toArray(i),c=l.find(wj);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return a.jsx(e,{...o,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var yj=na("Slot");function vj(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const o=bj(s),l=_j(i,s.props);return s.type!==g.Fragment&&(l.ref=r?v1(r,o):o),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var x1=Symbol("radix.slottable");function xj(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=x1,e}function wj(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===x1}function _j(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function bj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function _y(t){const e=t+"CollectionProvider",[n,r]=Qs(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:E,children:v}=x,y=Pn.useRef(null),b=Pn.useRef(new Map).current;return a.jsx(s,{scope:E,itemMap:b,collectionRef:y,children:v})};o.displayName=e;const l=t+"CollectionSlot",c=na(l),d=Pn.forwardRef((x,E)=>{const{scope:v,children:y}=x,b=i(l,v),S=Re(E,b.collectionRef);return a.jsx(c,{ref:S,children:y})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=na(h),_=Pn.forwardRef((x,E)=>{const{scope:v,children:y,...b}=x,S=Pn.useRef(null),j=Re(E,S),O=i(h,v);return Pn.useEffect(()=>(O.itemMap.set(S,{ref:S,...b}),()=>void O.itemMap.delete(S))),a.jsx(p,{[f]:"",ref:j,children:y})});_.displayName=h;function I(x){const E=i(t+"CollectionConsumer",x);return Pn.useCallback(()=>{const y=E.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(E.itemMap.values()).sort((O,N)=>b.indexOf(O.ref.current)-b.indexOf(N.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:d,ItemSlot:_},I,r]}var Ej=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ce=Ej.reduce((t,e)=>{const n=na(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function w1(t,e){t&&Hi.flushSync(()=>t.dispatchEvent(e))}function bn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Tj(t,e=globalThis==null?void 0:globalThis.document){const n=bn(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Sj="DismissableLayer",Nm="dismissableLayer.update",Ij="dismissableLayer.pointerDownOutside",Nj="dismissableLayer.focusOutside",mw,_1=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hc=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=g.useContext(_1),[h,f]=g.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=g.useState({}),I=Re(e,N=>f(N)),x=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(E),y=h?x.indexOf(h):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,S=y>=v,j=Aj(N=>{const T=N.target,R=[...d.branches].some(P=>P.contains(T));!S||R||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),O=Rj(N=>{const T=N.target;[...d.branches].some(P=>P.contains(T))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return Tj(N=>{y===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(mw=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),gw(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=mw)}},[h,p,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),gw())},[h,d]),g.useEffect(()=>{const N=()=>_({});return document.addEventListener(Nm,N),()=>document.removeEventListener(Nm,N)},[]),a.jsx(ce.div,{...c,ref:I,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ee(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ee(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ee(t.onPointerDownCapture,j.onPointerDownCapture)})});hc.displayName=Sj;var Cj="DismissableLayerBranch",b1=g.forwardRef((t,e)=>{const n=g.useContext(_1),r=g.useRef(null),s=Re(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ce.div,{...t,ref:s})});b1.displayName=Cj;function Aj(t,e=globalThis==null?void 0:globalThis.document){const n=bn(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){E1(Ij,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Rj(t,e=globalThis==null?void 0:globalThis.document){const n=bn(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&E1(Nj,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gw(){const t=new CustomEvent(Nm);document.dispatchEvent(t)}function E1(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?w1(s,i):s.dispatchEvent(i)}var Pj=hc,kj=b1,xt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},jj="Portal",wh=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);xt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?s2.createPortal(a.jsx(ce.div,{...r,ref:e}),o):null});wh.displayName=jj;function Dj(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Wi=t=>{const{present:e,children:n}=t,r=Oj(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Re(r.ref,Mj(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};Wi.displayName="Presence";function Oj(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),o=t?"mounted":"unmounted",[l,c]=Dj(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=du(r.current);i.current=l==="mounted"?d:"none"},[l]),xt(()=>{const d=r.current,h=s.current;if(h!==t){const p=i.current,_=du(d);t?c("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),xt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=_=>{const x=du(r.current).includes(_.animationName);if(_.target===e&&x&&(c("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=_=>{_.target===e&&(i.current=du(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function du(t){return(t==null?void 0:t.animationName)||"none"}function Mj(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Lj=Sg[" useInsertionEffect ".trim().toString()]||xt;function ra({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=Vj({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const p=Fj(h)?h(t):h;p!==t&&((f=o.current)==null||f.call(o,p))}else i(h)},[l,t,i,o]);return[c,d]}function Vj({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return Lj(()=>{i.current=e},[e]),g.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function Fj(t){return typeof t=="function"}var T1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Uj="VisuallyHidden",_h=g.forwardRef((t,e)=>a.jsx(ce.span,{...t,ref:e,style:{...T1,...t.style}}));_h.displayName=Uj;var $j=_h,by="ToastProvider",[Ey,Bj,zj]=_y("Toast"),[S1,N$]=Qs("Toast",[zj]),[Hj,bh]=S1(by),I1=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=g.useState(null),[d,h]=g.useState(0),f=g.useRef(!1),p=g.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${by}\`. Expected non-empty \`string\`.`),a.jsx(Ey.Provider,{scope:e,children:a.jsx(Hj,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:g.useCallback(()=>h(_=>_+1),[]),onToastRemove:g.useCallback(()=>h(_=>_-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};I1.displayName=by;var N1="ToastViewport",Wj=["F8"],Cm="toast.viewportPause",Am="toast.viewportResume",C1=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Wj,label:s="Notifications ({hotkey})",...i}=t,o=bh(N1,n),l=Bj(n),c=g.useRef(null),d=g.useRef(null),h=g.useRef(null),f=g.useRef(null),p=Re(e,f,o.onViewportChange),_=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=o.toastCount>0;g.useEffect(()=>{const E=v=>{var b;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),g.useEffect(()=>{const E=c.current,v=f.current;if(I&&E&&v){const y=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Cm);v.dispatchEvent(O),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(Am);v.dispatchEvent(O),o.isClosePausedRef.current=!1}},S=O=>{!E.contains(O.relatedTarget)&&b()},j=()=>{E.contains(document.activeElement)||b()};return E.addEventListener("focusin",y),E.addEventListener("focusout",S),E.addEventListener("pointermove",y),E.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{E.removeEventListener("focusin",y),E.removeEventListener("focusout",S),E.removeEventListener("pointermove",y),E.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[I,o.isClosePausedRef]);const x=g.useCallback(({tabbingDirection:E})=>{const y=l().map(b=>{const S=b.ref.current,j=[S,...sD(S)];return E==="forwards"?j:j.reverse()});return(E==="forwards"?y.reverse():y).flat()},[l]);return g.useEffect(()=>{const E=f.current;if(E){const v=y=>{var j,O,N;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const T=document.activeElement,R=y.shiftKey;if(y.target===E&&R){(j=d.current)==null||j.focus();return}const D=x({tabbingDirection:R?"backwards":"forwards"}),k=D.findIndex(z=>z===T);ap(D.slice(k+1))?y.preventDefault():R?(O=d.current)==null||O.focus():(N=h.current)==null||N.focus()}};return E.addEventListener("keydown",v),()=>E.removeEventListener("keydown",v)}},[l,x]),a.jsxs(kj,{ref:c,role:"region","aria-label":s.replace("{hotkey}",_),tabIndex:-1,style:{pointerEvents:I?void 0:"none"},children:[I&&a.jsx(Rm,{ref:d,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"forwards"});ap(E)}}),a.jsx(Ey.Slot,{scope:n,children:a.jsx(ce.ol,{tabIndex:-1,...i,ref:p})}),I&&a.jsx(Rm,{ref:h,onFocusFromOutsideViewport:()=>{const E=x({tabbingDirection:"backwards"});ap(E)}})]})});C1.displayName=N1;var A1="ToastFocusProxy",Rm=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=bh(A1,n);return a.jsx(_h,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Rm.displayName=A1;var fc="Toast",Gj="toast.swipeStart",qj="toast.swipeMove",Kj="toast.swipeCancel",Qj="toast.swipeEnd",R1=g.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=ra({prop:r,defaultProp:s??!0,onChange:i,caller:fc});return a.jsx(Wi,{present:n||l,children:a.jsx(Jj,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:bn(t.onPause),onResume:bn(t.onResume),onSwipeStart:ee(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ee(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ee(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ee(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});R1.displayName=fc;var[Yj,Xj]=S1(fc,{onClose(){}}),Jj=g.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:_,...I}=t,x=bh(fc,n),[E,v]=g.useState(null),y=Re(e,z=>v(z)),b=g.useRef(null),S=g.useRef(null),j=s||x.duration,O=g.useRef(0),N=g.useRef(j),T=g.useRef(0),{onToastAdd:R,onToastRemove:P}=x,A=bn(()=>{var Z;(E==null?void 0:E.contains(document.activeElement))&&((Z=x.viewport)==null||Z.focus()),o()}),D=g.useCallback(z=>{!z||z===1/0||(window.clearTimeout(T.current),O.current=new Date().getTime(),T.current=window.setTimeout(A,z))},[A]);g.useEffect(()=>{const z=x.viewport;if(z){const Z=()=>{D(N.current),d==null||d()},Q=()=>{const te=new Date().getTime()-O.current;N.current=N.current-te,window.clearTimeout(T.current),c==null||c()};return z.addEventListener(Cm,Q),z.addEventListener(Am,Z),()=>{z.removeEventListener(Cm,Q),z.removeEventListener(Am,Z)}}},[x.viewport,j,c,d,D]),g.useEffect(()=>{i&&!x.isClosePausedRef.current&&D(j)},[i,j,x.isClosePausedRef,D]),g.useEffect(()=>(R(),()=>P()),[R,P]);const k=g.useMemo(()=>E?L1(E):null,[E]);return x.viewport?a.jsxs(a.Fragment,{children:[k&&a.jsx(Zj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),a.jsx(Yj,{scope:n,onClose:A,children:Hi.createPortal(a.jsx(Ey.ItemSlot,{scope:n,children:a.jsx(Pj,{asChild:!0,onEscapeKeyDown:ee(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||A(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...I,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ee(t.onKeyDown,z=>{z.key==="Escape"&&(l==null||l(z.nativeEvent),z.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ee(t.onPointerDown,z=>{z.button===0&&(b.current={x:z.clientX,y:z.clientY})}),onPointerMove:ee(t.onPointerMove,z=>{if(!b.current)return;const Z=z.clientX-b.current.x,Q=z.clientY-b.current.y,te=!!S.current,F=["left","right"].includes(x.swipeDirection),H=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Y=F?H(0,Z):0,ie=F?0:H(0,Q),de=z.pointerType==="touch"?10:2,_e={x:Y,y:ie},We={originalEvent:z,delta:_e};te?(S.current=_e,hu(qj,f,We,{discrete:!1})):yw(_e,x.swipeDirection,de)?(S.current=_e,hu(Gj,h,We,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(Z)>de||Math.abs(Q)>de)&&(b.current=null)}),onPointerUp:ee(t.onPointerUp,z=>{const Z=S.current,Q=z.target;if(Q.hasPointerCapture(z.pointerId)&&Q.releasePointerCapture(z.pointerId),S.current=null,b.current=null,Z){const te=z.currentTarget,F={originalEvent:z,delta:Z};yw(Z,x.swipeDirection,x.swipeThreshold)?hu(Qj,_,F,{discrete:!0}):hu(Kj,p,F,{discrete:!0}),te.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),Zj=t=>{const{__scopeToast:e,children:n,...r}=t,s=bh(fc,e),[i,o]=g.useState(!1),[l,c]=g.useState(!1);return nD(()=>o(!0)),g.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:a.jsx(wh,{asChild:!0,children:a.jsx(_h,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},eD="ToastTitle",P1=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ce.div,{...r,ref:e})});P1.displayName=eD;var tD="ToastDescription",k1=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ce.div,{...r,ref:e})});k1.displayName=tD;var j1="ToastAction",D1=g.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(M1,{altText:n,asChild:!0,children:a.jsx(Ty,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${j1}\`. Expected non-empty \`string\`.`),null)});D1.displayName=j1;var O1="ToastClose",Ty=g.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=Xj(O1,n);return a.jsx(M1,{asChild:!0,children:a.jsx(ce.button,{type:"button",...r,ref:e,onClick:ee(t.onClick,s.onClose)})})});Ty.displayName=O1;var M1=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function L1(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),rD(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...L1(r))}}),e}function hu(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?w1(s,i):s.dispatchEvent(i)}var yw=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function nD(t=()=>{}){const e=bn(t);xt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function rD(t){return t.nodeType===t.ELEMENT_NODE}function sD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ap(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var iD=I1,V1=C1,F1=R1,U1=P1,$1=k1,B1=D1,z1=Ty;function H1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=H1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function W1(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=H1(t))&&(r&&(r+=" "),r+=e);return r}const vw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,xw=W1,Eh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return xw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const p=vw(h)||vw(f);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:p,..._}=h;return Object.entries(_).every(I=>{let[x,E]=I;return Array.isArray(E)?E.includes({...i,...l}[x]):{...i,...l}[x]===E})?[...d,f,p]:d},[]);return xw(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G1=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...aD,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:G1("lucide",s),...l},[...o.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(lD,{ref:i,iconNode:e,className:G1(`lucide-${oD(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=ve("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ve("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=ve("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ve("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=ve("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ve("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=ve("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=ve("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ve("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ny="-",wD=t=>{const e=bD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Ny);return l[0]===""&&l.length!==1&&l.shift(),Y1(l,e)||_D(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Y1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?Y1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ny);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Tw=/^\[(.+)\]$/,_D=t=>{if(Tw.test(t)){const e=Tw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},bD=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return TD(Object.entries(t.classGroups),n).forEach(([i,o])=>{Pm(o,r,i,e)}),r},Pm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Sw(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(ED(s)){Pm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Pm(o,Sw(e,i),n,r)})})},Sw=(t,e)=>{let n=t;return e.split(Ny).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ED=t=>t.isThemeGetter,TD=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,SD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},X1="!",ID=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let d=0,h=0,f;for(let E=0;E<l.length;E++){let v=l[E];if(d===0){if(v===s&&(r||l.slice(E,E+i)===e)){c.push(l.slice(h,E)),h=E+i;continue}if(v==="/"){f=E;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(h),_=p.startsWith(X1),I=_?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:_,baseClassName:I,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},ND=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},CD=t=>({cache:SD(t.cacheSize),parseClassName:ID(t),...wD(t)}),AD=/\s+/,RD=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(AD);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:_}=n(d);let I=!!_,x=r(I?p.substring(0,_):p);if(!x){if(!I){l=d+(l.length>0?" "+l:l);continue}if(x=r(p),!x){l=d+(l.length>0?" "+l:l);continue}I=!1}const E=ND(h).join(":"),v=f?E+X1:E,y=v+x;if(i.includes(y))continue;i.push(y);const b=s(x,I);for(let S=0;S<b.length;++S){const j=b[S];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function PD(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=J1(e))&&(r&&(r+=" "),r+=n);return r}const J1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=J1(t[r]))&&(n&&(n+=" "),n+=e);return n};function kD(t,...e){let n,r,s,i=o;function o(c){const d=e.reduce((h,f)=>f(h),t());return n=CD(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=RD(c,n);return s(c,h),h}return function(){return i(PD.apply(null,arguments))}}const ke=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Z1=/^\[(?:([a-z-]+):)?(.+)\]$/i,jD=/^\d+\/\d+$/,DD=new Set(["px","full","screen"]),OD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,VD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,FD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vr=t=>jo(t)||DD.has(t)||jD.test(t),Jr=t=>xa(t,"length",qD),jo=t=>!!t&&!Number.isNaN(Number(t)),cp=t=>xa(t,"number",jo),Ja=t=>!!t&&Number.isInteger(Number(t)),UD=t=>t.endsWith("%")&&jo(t.slice(0,-1)),le=t=>Z1.test(t),Zr=t=>OD.test(t),$D=new Set(["length","size","percentage"]),BD=t=>xa(t,$D,eS),zD=t=>xa(t,"position",eS),HD=new Set(["image","url"]),WD=t=>xa(t,HD,QD),GD=t=>xa(t,"",KD),Za=()=>!0,xa=(t,e,n)=>{const r=Z1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},qD=t=>MD.test(t)&&!LD.test(t),eS=()=>!1,KD=t=>VD.test(t),QD=t=>FD.test(t),YD=()=>{const t=ke("colors"),e=ke("spacing"),n=ke("blur"),r=ke("brightness"),s=ke("borderColor"),i=ke("borderRadius"),o=ke("borderSpacing"),l=ke("borderWidth"),c=ke("contrast"),d=ke("grayscale"),h=ke("hueRotate"),f=ke("invert"),p=ke("gap"),_=ke("gradientColorStops"),I=ke("gradientColorStopPositions"),x=ke("inset"),E=ke("margin"),v=ke("opacity"),y=ke("padding"),b=ke("saturate"),S=ke("scale"),j=ke("sepia"),O=ke("skew"),N=ke("space"),T=ke("translate"),R=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",le,e],D=()=>[le,e],k=()=>["",vr,Jr],z=()=>["auto",jo,le],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",le],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[jo,le];return{cacheSize:500,separator:":",theme:{colors:[Za],spacing:[vr,Jr],blur:["none","",Zr,le],brightness:ie(),borderColor:[t],borderRadius:["none","","full",Zr,le],borderSpacing:D(),borderWidth:k(),contrast:ie(),grayscale:H(),hueRotate:ie(),invert:H(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[UD,Jr],inset:A(),margin:A(),opacity:ie(),padding:D(),saturate:ie(),scale:ie(),sepia:H(),skew:ie(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",le]}],container:["container"],columns:[{columns:[Zr]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),le]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ja,le]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",le]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Ja,le]}],"grid-cols":[{"grid-cols":[Za]}],"col-start-end":[{col:["auto",{span:["full",Ja,le]},le]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Za]}],"row-start-end":[{row:["auto",{span:[Ja,le]},le]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",le]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",le,e]}],"min-w":[{"min-w":[le,e,"min","max","fit"]}],"max-w":[{"max-w":[le,e,"none","full","min","max","fit","prose",{screen:[Zr]},Zr]}],h:[{h:[le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zr,Jr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",cp]}],"font-family":[{font:[Za]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",le]}],"line-clamp":[{"line-clamp":["none",jo,cp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vr,le]}],"list-image":[{"list-image":["none",le]}],"list-style-type":[{list:["none","disc","decimal",le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vr,Jr]}],"underline-offset":[{"underline-offset":["auto",vr,le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),zD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",BD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},WD]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[vr,le]}],"outline-w":[{outline:[vr,Jr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[vr,Jr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zr,GD]}],"shadow-color":[{shadow:[Za]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zr,le]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",le]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",le]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ja,le]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[vr,Jr,cp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},XD=kD(YD);function ye(...t){return XD(W1(t))}const JD=iD,tS=g.forwardRef(({className:t,...e},n)=>a.jsx(V1,{ref:n,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));tS.displayName=V1.displayName;const ZD=Eh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nS=g.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(F1,{ref:r,className:ye(ZD({variant:e}),t),...n}));nS.displayName=F1.displayName;const eO=g.forwardRef(({className:t,...e},n)=>a.jsx(B1,{ref:n,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));eO.displayName=B1.displayName;const rS=g.forwardRef(({className:t,...e},n)=>a.jsx(z1,{ref:n,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(bl,{className:"h-4 w-4"})}));rS.displayName=z1.displayName;const sS=g.forwardRef(({className:t,...e},n)=>a.jsx(U1,{ref:n,className:ye("text-sm font-semibold",t),...e}));sS.displayName=U1.displayName;const iS=g.forwardRef(({className:t,...e},n)=>a.jsx($1,{ref:n,className:ye("text-sm opacity-90",t),...e}));iS.displayName=$1.displayName;function tO(){const{toasts:t}=y1();return a.jsxs(JD,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(nS,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(sS,{children:n}),r&&a.jsx(iS,{children:r})]}),s,a.jsx(rS,{})]},e)}),a.jsx(tS,{})]})}var nO=Sg[" useId ".trim().toString()]||(()=>{}),rO=0;function As(t){const[e,n]=g.useState(nO());return xt(()=>{n(r=>r??String(rO++))},[t]),e?`radix-${e}`:""}const sO=["top","right","bottom","left"],Ls=Math.min,rn=Math.max,Sd=Math.round,fu=Math.floor,nr=t=>({x:t,y:t}),iO={left:"right",right:"left",bottom:"top",top:"bottom"},oO={start:"end",end:"start"};function km(t,e,n){return rn(t,Ls(e,n))}function Fr(t,e){return typeof t=="function"?t(e):t}function Ur(t){return t.split("-")[0]}function wa(t){return t.split("-")[1]}function Cy(t){return t==="x"?"y":"x"}function Ay(t){return t==="y"?"height":"width"}function Zn(t){return["top","bottom"].includes(Ur(t))?"y":"x"}function Ry(t){return Cy(Zn(t))}function aO(t,e,n){n===void 0&&(n=!1);const r=wa(t),s=Ry(t),i=Ay(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Id(o)),[o,Id(o)]}function lO(t){const e=Id(t);return[jm(t),e,jm(e)]}function jm(t){return t.replace(/start|end/g,e=>oO[e])}function cO(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function uO(t,e,n,r){const s=wa(t);let i=cO(Ur(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(jm)))),i}function Id(t){return t.replace(/left|right|bottom|top/g,e=>iO[e])}function dO(t){return{top:0,right:0,bottom:0,left:0,...t}}function oS(t){return typeof t!="number"?dO(t):{top:t,right:t,bottom:t,left:t}}function Nd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Iw(t,e,n){let{reference:r,floating:s}=t;const i=Zn(e),o=Ry(e),l=Ay(o),c=Ur(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let _;switch(c){case"top":_={x:h,y:r.y-s.height};break;case"bottom":_={x:h,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:f};break;case"left":_={x:r.x-s.width,y:f};break;default:_={x:r.x,y:r.y}}switch(wa(e)){case"start":_[o]-=p*(n&&d?-1:1);break;case"end":_[o]+=p*(n&&d?-1:1);break}return _}const hO=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=Iw(d,r,c),p=r,_={},I=0;for(let x=0;x<l.length;x++){const{name:E,fn:v}=l[x],{x:y,y:b,data:S,reset:j}=await v({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:_,rects:d,platform:o,elements:{reference:t,floating:e}});h=y??h,f=b??f,_={..._,[E]:{..._[E],...S}},j&&I<=50&&(I++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=Iw(d,p,c)),x=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:_}};async function ql(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:_=0}=Fr(e,t),I=oS(_),E=l[p?f==="floating"?"reference":"floating":f],v=Nd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},j=Nd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-j.top+I.top)/S.y,bottom:(j.bottom-v.bottom+I.bottom)/S.y,left:(v.left-j.left+I.left)/S.x,right:(j.right-v.right+I.right)/S.x}}const fO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=Fr(t,e)||{};if(d==null)return{};const f=oS(h),p={x:n,y:r},_=Ry(s),I=Ay(_),x=await o.getDimensions(d),E=_==="y",v=E?"top":"left",y=E?"bottom":"right",b=E?"clientHeight":"clientWidth",S=i.reference[I]+i.reference[_]-p[_]-i.floating[I],j=p[_]-i.reference[_],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let N=O?O[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(O)))&&(N=l.floating[b]||i.floating[I]);const T=S/2-j/2,R=N/2-x[I]/2-1,P=Ls(f[v],R),A=Ls(f[y],R),D=P,k=N-x[I]-A,z=N/2-x[I]/2+T,Z=km(D,z,k),Q=!c.arrow&&wa(s)!=null&&z!==Z&&i.reference[I]/2-(z<D?P:A)-x[I]/2<0,te=Q?z<D?z-D:z-k:0;return{[_]:p[_]+te,data:{[_]:Z,centerOffset:z-Z-te,...Q&&{alignmentOffset:te}},reset:Q}}}),pO=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:x=!0,...E}=Fr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=Ur(s),y=Zn(l),b=Ur(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=p||(b||!x?[Id(l)]:lO(l)),O=I!=="none";!p&&O&&j.push(...uO(l,x,I,S));const N=[l,...j],T=await ql(e,E),R=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&R.push(T[v]),f){const z=aO(s,o,S);R.push(T[z[0]],T[z[1]])}if(P=[...P,{placement:s,overflows:R}],!R.every(z=>z<=0)){var A,D;const z=(((A=i.flip)==null?void 0:A.index)||0)+1,Z=N[z];if(Z&&(!(f==="alignment"?y!==Zn(Z):!1)||P.every(F=>F.overflows[0]>0&&Zn(F.placement)===y)))return{data:{index:z,overflows:P},reset:{placement:Z}};let Q=(D=P.filter(te=>te.overflows[0]<=0).sort((te,F)=>te.overflows[1]-F.overflows[1])[0])==null?void 0:D.placement;if(!Q)switch(_){case"bestFit":{var k;const te=(k=P.filter(F=>{if(O){const H=Zn(F.placement);return H===y||H==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(H=>H>0).reduce((H,Y)=>H+Y,0)]).sort((F,H)=>F[1]-H[1])[0])==null?void 0:k[0];te&&(Q=te);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Nw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Cw(t){return sO.some(e=>t[e]>=0)}const mO=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Fr(t,e);switch(r){case"referenceHidden":{const i=await ql(e,{...s,elementContext:"reference"}),o=Nw(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Cw(o)}}}case"escaped":{const i=await ql(e,{...s,altBoundary:!0}),o=Nw(i,n.floating);return{data:{escapedOffsets:o,escaped:Cw(o)}}}default:return{}}}}};async function gO(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ur(n),l=wa(n),c=Zn(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Fr(e,t);let{mainAxis:p,crossAxis:_,alignmentAxis:I}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof I=="number"&&(_=l==="end"?I*-1:I),c?{x:_*h,y:p*d}:{x:p*d,y:_*h}}const yO=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await gO(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},vO=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:E=>{let{x:v,y}=E;return{x:v,y}}},...c}=Fr(t,e),d={x:n,y:r},h=await ql(e,c),f=Zn(Ur(s)),p=Cy(f);let _=d[p],I=d[f];if(i){const E=p==="y"?"top":"left",v=p==="y"?"bottom":"right",y=_+h[E],b=_-h[v];_=km(y,_,b)}if(o){const E=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=I+h[E],b=I-h[v];I=km(y,I,b)}const x=l.fn({...e,[p]:_,[f]:I});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[f]:o}}}}}},xO=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Fr(t,e),h={x:n,y:r},f=Zn(s),p=Cy(f);let _=h[p],I=h[f];const x=Fr(l,e),E=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const b=p==="y"?"height":"width",S=i.reference[p]-i.floating[b]+E.mainAxis,j=i.reference[p]+i.reference[b]-E.mainAxis;_<S?_=S:_>j&&(_=j)}if(d){var v,y;const b=p==="y"?"width":"height",S=["top","left"].includes(Ur(s)),j=i.reference[f]-i.floating[b]+(S&&((v=o.offset)==null?void 0:v[f])||0)+(S?0:E.crossAxis),O=i.reference[f]+i.reference[b]+(S?0:((y=o.offset)==null?void 0:y[f])||0)-(S?E.crossAxis:0);I<j?I=j:I>O&&(I=O)}return{[p]:_,[f]:I}}}},wO=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...d}=Fr(t,e),h=await ql(e,d),f=Ur(s),p=wa(s),_=Zn(s)==="y",{width:I,height:x}=i.floating;let E,v;f==="top"||f==="bottom"?(E=f,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,E=p==="end"?"top":"bottom");const y=x-h.top-h.bottom,b=I-h.left-h.right,S=Ls(x-h[E],y),j=Ls(I-h[v],b),O=!e.middlewareData.shift;let N=S,T=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=y),O&&!p){const P=rn(h.left,0),A=rn(h.right,0),D=rn(h.top,0),k=rn(h.bottom,0);_?T=I-2*(P!==0||A!==0?P+A:rn(h.left,h.right)):N=x-2*(D!==0||k!==0?D+k:rn(h.top,h.bottom))}await c({...e,availableWidth:T,availableHeight:N});const R=await o.getDimensions(l.floating);return I!==R.width||x!==R.height?{reset:{rects:!0}}:{}}}};function Sh(){return typeof window<"u"}function _a(t){return aS(t)?(t.nodeName||"").toLowerCase():"#document"}function ln(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function dr(t){var e;return(e=(aS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aS(t){return Sh()?t instanceof Node||t instanceof ln(t).Node:!1}function Un(t){return Sh()?t instanceof Element||t instanceof ln(t).Element:!1}function lr(t){return Sh()?t instanceof HTMLElement||t instanceof ln(t).HTMLElement:!1}function Aw(t){return!Sh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ln(t).ShadowRoot}function mc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=$n(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function _O(t){return["table","td","th"].includes(_a(t))}function Ih(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Py(t){const e=ky(),n=Un(t)?$n(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function bO(t){let e=Vs(t);for(;lr(e)&&!sa(e);){if(Py(e))return e;if(Ih(e))return null;e=Vs(e)}return null}function ky(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sa(t){return["html","body","#document"].includes(_a(t))}function $n(t){return ln(t).getComputedStyle(t)}function Nh(t){return Un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Vs(t){if(_a(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Aw(t)&&t.host||dr(t);return Aw(e)?e.host:e}function lS(t){const e=Vs(t);return sa(e)?t.ownerDocument?t.ownerDocument.body:t.body:lr(e)&&mc(e)?e:lS(e)}function Kl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=lS(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=ln(s);if(i){const l=Dm(o);return e.concat(o,o.visualViewport||[],mc(s)?s:[],l&&n?Kl(l):[])}return e.concat(s,Kl(s,[],n))}function Dm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cS(t){const e=$n(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=lr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Sd(n)!==i||Sd(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function jy(t){return Un(t)?t:t.contextElement}function Do(t){const e=jy(t);if(!lr(e))return nr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=cS(e);let o=(i?Sd(n.width):n.width)/r,l=(i?Sd(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const EO=nr(0);function uS(t){const e=ln(t);return!ky()||!e.visualViewport?EO:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function TO(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ln(t)?!1:e}function Pi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=jy(t);let o=nr(1);e&&(r?Un(r)&&(o=Do(r)):o=Do(t));const l=TO(i,n,r)?uS(i):nr(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=ln(i),_=r&&Un(r)?ln(r):r;let I=p,x=Dm(I);for(;x&&r&&_!==I;){const E=Do(x),v=x.getBoundingClientRect(),y=$n(x),b=v.left+(x.clientLeft+parseFloat(y.paddingLeft))*E.x,S=v.top+(x.clientTop+parseFloat(y.paddingTop))*E.y;c*=E.x,d*=E.y,h*=E.x,f*=E.y,c+=b,d+=S,I=ln(x),x=Dm(I)}}return Nd({width:h,height:f,x:c,y:d})}function Dy(t,e){const n=Nh(t).scrollLeft;return e?e.left+n:Pi(dr(t)).left+n}function dS(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Dy(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function SO(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=dr(r),l=e?Ih(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=nr(1);const h=nr(0),f=lr(r);if((f||!f&&!i)&&((_a(r)!=="body"||mc(o))&&(c=Nh(r)),lr(r))){const _=Pi(r);d=Do(r),h.x=_.x+r.clientLeft,h.y=_.y+r.clientTop}const p=o&&!f&&!i?dS(o,c,!0):nr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-c.scrollTop*d.y+h.y+p.y}}function IO(t){return Array.from(t.getClientRects())}function NO(t){const e=dr(t),n=Nh(t),r=t.ownerDocument.body,s=rn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=rn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Dy(t);const l=-n.scrollTop;return $n(r).direction==="rtl"&&(o+=rn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function CO(t,e){const n=ln(t),r=dr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=ky();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function AO(t,e){const n=Pi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=lr(t)?Do(t):nr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function Rw(t,e,n){let r;if(e==="viewport")r=CO(t,n);else if(e==="document")r=NO(dr(t));else if(Un(e))r=AO(e,n);else{const s=uS(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Nd(r)}function hS(t,e){const n=Vs(t);return n===e||!Un(n)||sa(n)?!1:$n(n).position==="fixed"||hS(n,e)}function RO(t,e){const n=e.get(t);if(n)return n;let r=Kl(t,[],!1).filter(l=>Un(l)&&_a(l)!=="body"),s=null;const i=$n(t).position==="fixed";let o=i?Vs(t):t;for(;Un(o)&&!sa(o);){const l=$n(o),c=Py(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||mc(o)&&!c&&hS(t,o))?r=r.filter(h=>h!==o):s=l,o=Vs(o)}return e.set(t,r),r}function PO(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ih(e)?[]:RO(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,h)=>{const f=Rw(e,h,s);return d.top=rn(f.top,d.top),d.right=Ls(f.right,d.right),d.bottom=Ls(f.bottom,d.bottom),d.left=rn(f.left,d.left),d},Rw(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function kO(t){const{width:e,height:n}=cS(t);return{width:e,height:n}}function jO(t,e,n){const r=lr(e),s=dr(e),i=n==="fixed",o=Pi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=nr(0);function d(){c.x=Dy(s)}if(r||!r&&!i)if((_a(e)!=="body"||mc(s))&&(l=Nh(e)),r){const _=Pi(e,!0,i,e);c.x=_.x+e.clientLeft,c.y=_.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?dS(s,l):nr(0),f=o.left+l.scrollLeft-c.x-h.x,p=o.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function up(t){return $n(t).position==="static"}function Pw(t,e){if(!lr(t)||$n(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return dr(t)===n&&(n=n.ownerDocument.body),n}function fS(t,e){const n=ln(t);if(Ih(t))return n;if(!lr(t)){let s=Vs(t);for(;s&&!sa(s);){if(Un(s)&&!up(s))return s;s=Vs(s)}return n}let r=Pw(t,e);for(;r&&_O(r)&&up(r);)r=Pw(r,e);return r&&sa(r)&&up(r)&&!Py(r)?n:r||bO(t)||n}const DO=async function(t){const e=this.getOffsetParent||fS,n=this.getDimensions,r=await n(t.floating);return{reference:jO(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OO(t){return $n(t).direction==="rtl"}const MO={convertOffsetParentRelativeRectToViewportRelativeRect:SO,getDocumentElement:dr,getClippingRect:PO,getOffsetParent:fS,getElementRects:DO,getClientRects:IO,getDimensions:kO,getScale:Do,isElement:Un,isRTL:OO};function pS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function LO(t,e){let n=null,r;const s=dr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:p,height:_}=d;if(l||e(),!p||!_)return;const I=fu(f),x=fu(s.clientWidth-(h+p)),E=fu(s.clientHeight-(f+_)),v=fu(h),b={rootMargin:-I+"px "+-x+"px "+-E+"px "+-v+"px",threshold:rn(0,Ls(1,c))||1};let S=!0;function j(O){const N=O[0].intersectionRatio;if(N!==c){if(!S)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!pS(d,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(j,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,b)}n.observe(t)}return o(!0),i}function VO(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=jy(t),h=s||i?[...d?Kl(d):[],...Kl(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const f=d&&l?LO(d,n):null;let p=-1,_=null;o&&(_=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=_)==null||b.observe(e)})),n()}),d&&!c&&_.observe(d),_.observe(e));let I,x=c?Pi(t):null;c&&E();function E(){const v=Pi(t);x&&!pS(x,v)&&n(),x=v,I=requestAnimationFrame(E)}return n(),()=>{var v;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(v=_)==null||v.disconnect(),_=null,c&&cancelAnimationFrame(I)}}const FO=yO,UO=vO,$O=pO,BO=wO,zO=mO,kw=fO,HO=xO,WO=(t,e,n)=>{const r=new Map,s={platform:MO,...n},i={...s.platform,_c:r};return hO(t,e,{...s,platform:i})};var GO=typeof document<"u",qO=function(){},$u=GO?g.useLayoutEffect:qO;function Cd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Cd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Cd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function mS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function jw(t,e){const n=mS(t);return Math.round(e*n)/n}function dp(t){const e=g.useRef(t);return $u(()=>{e.current=t}),e}function KO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,_]=g.useState(r);Cd(p,r)||_(r);const[I,x]=g.useState(null),[E,v]=g.useState(null),y=g.useCallback(F=>{F!==O.current&&(O.current=F,x(F))},[]),b=g.useCallback(F=>{F!==N.current&&(N.current=F,v(F))},[]),S=i||I,j=o||E,O=g.useRef(null),N=g.useRef(null),T=g.useRef(h),R=c!=null,P=dp(c),A=dp(s),D=dp(d),k=g.useCallback(()=>{if(!O.current||!N.current)return;const F={placement:e,strategy:n,middleware:p};A.current&&(F.platform=A.current),WO(O.current,N.current,F).then(H=>{const Y={...H,isPositioned:D.current!==!1};z.current&&!Cd(T.current,Y)&&(T.current=Y,Hi.flushSync(()=>{f(Y)}))})},[p,e,n,A,D]);$u(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[d]);const z=g.useRef(!1);$u(()=>(z.current=!0,()=>{z.current=!1}),[]),$u(()=>{if(S&&(O.current=S),j&&(N.current=j),S&&j){if(P.current)return P.current(S,j,k);k()}},[S,j,k,P,R]);const Z=g.useMemo(()=>({reference:O,floating:N,setReference:y,setFloating:b}),[y,b]),Q=g.useMemo(()=>({reference:S,floating:j}),[S,j]),te=g.useMemo(()=>{const F={position:n,left:0,top:0};if(!Q.floating)return F;const H=jw(Q.floating,h.x),Y=jw(Q.floating,h.y);return l?{...F,transform:"translate("+H+"px, "+Y+"px)",...mS(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:Y}},[n,l,Q.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:k,refs:Z,elements:Q,floatingStyles:te}),[h,k,Z,Q,te])}const QO=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kw({element:r.current,padding:s}).fn(n):{}:r?kw({element:r,padding:s}).fn(n):{}}}},YO=(t,e)=>({...FO(t),options:[t,e]}),XO=(t,e)=>({...UO(t),options:[t,e]}),JO=(t,e)=>({...HO(t),options:[t,e]}),ZO=(t,e)=>({...$O(t),options:[t,e]}),eM=(t,e)=>({...BO(t),options:[t,e]}),tM=(t,e)=>({...zO(t),options:[t,e]}),nM=(t,e)=>({...QO(t),options:[t,e]});var rM="Arrow",gS=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ce.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});gS.displayName=rM;var sM=gS;function iM(t){const[e,n]=g.useState(void 0);return xt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Oy="Popper",[yS,Ch]=Qs(Oy),[oM,vS]=yS(Oy),xS=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return a.jsx(oM,{scope:e,anchor:r,onAnchorChange:s,children:n})};xS.displayName=Oy;var wS="PopperAnchor",_S=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=vS(wS,n),o=g.useRef(null),l=Re(e,o);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ce.div,{...s,ref:l})});_S.displayName=wS;var My="PopperContent",[aM,lM]=yS(My),bS=g.forwardRef((t,e)=>{var X,Ne,rt,Te,xe,be;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:_="optimized",onPlaced:I,...x}=t,E=vS(My,n),[v,y]=g.useState(null),b=Re(e,lt=>y(lt)),[S,j]=g.useState(null),O=iM(S),N=(O==null?void 0:O.width)??0,T=(O==null?void 0:O.height)??0,R=r+(i!=="center"?"-"+i:""),P=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(d)?d:[d],D=A.length>0,k={padding:P,boundary:A.filter(uM),altBoundary:D},{refs:z,floatingStyles:Z,placement:Q,isPositioned:te,middlewareData:F}=KO({strategy:"fixed",placement:R,whileElementsMounted:(...lt)=>VO(...lt,{animationFrame:_==="always"}),elements:{reference:E.anchor},middleware:[YO({mainAxis:s+T,alignmentAxis:o}),c&&XO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?JO():void 0,...k}),c&&ZO({...k}),eM({...k,apply:({elements:lt,rects:Gt,availableWidth:mr,availableHeight:qr})=>{const{width:ni,height:uf}=Gt.reference,ri=lt.floating.style;ri.setProperty("--radix-popper-available-width",`${mr}px`),ri.setProperty("--radix-popper-available-height",`${qr}px`),ri.setProperty("--radix-popper-anchor-width",`${ni}px`),ri.setProperty("--radix-popper-anchor-height",`${uf}px`)}}),S&&nM({element:S,padding:l}),dM({arrowWidth:N,arrowHeight:T}),p&&tM({strategy:"referenceHidden",...k})]}),[H,Y]=SS(Q),ie=bn(I);xt(()=>{te&&(ie==null||ie())},[te,ie]);const de=(X=F.arrow)==null?void 0:X.x,_e=(Ne=F.arrow)==null?void 0:Ne.y,We=((rt=F.arrow)==null?void 0:rt.centerOffset)!==0,[_t,at]=g.useState();return xt(()=>{v&&at(window.getComputedStyle(v).zIndex)},[v]),a.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:te?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_t,"--radix-popper-transform-origin":[(Te=F.transformOrigin)==null?void 0:Te.x,(xe=F.transformOrigin)==null?void 0:xe.y].join(" "),...((be=F.hide)==null?void 0:be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(aM,{scope:n,placedSide:H,onArrowChange:j,arrowX:de,arrowY:_e,shouldHideArrow:We,children:a.jsx(ce.div,{"data-side":H,"data-align":Y,...x,ref:b,style:{...x.style,animation:te?void 0:"none"}})})})});bS.displayName=My;var ES="PopperArrow",cM={top:"bottom",right:"left",bottom:"top",left:"right"},TS=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=lM(ES,r),o=cM[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(sM,{...s,ref:n,style:{...s.style,display:"block"}})})});TS.displayName=ES;function uM(t){return t!==null}var dM=t=>({name:"transformOrigin",options:t,fn(e){var E,v,y;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,h]=SS(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,_=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let I="",x="";return d==="bottom"?(I=o?f:`${p}px`,x=`${-c}px`):d==="top"?(I=o?f:`${p}px`,x=`${r.floating.height+c}px`):d==="right"?(I=`${-c}px`,x=o?f:`${_}px`):d==="left"&&(I=`${r.floating.width+c}px`,x=o?f:`${_}px`),{data:{x:I,y:x}}}});function SS(t){const[e,n="center"]=t.split("-");return[e,n]}var hM=xS,IS=_S,NS=bS,CS=TS,[Ah,C$]=Qs("Tooltip",[Ch]),Ly=Ch(),AS="TooltipProvider",fM=700,Dw="tooltip.open",[pM,RS]=Ah(AS),PS=t=>{const{__scopeTooltip:e,delayDuration:n=fM,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=g.useRef(!0),l=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),a.jsx(pM,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};PS.displayName=AS;var kS="Tooltip",[A$,Rh]=Ah(kS),Om="TooltipTrigger",mM=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Rh(Om,n),i=RS(Om,n),o=Ly(n),l=g.useRef(null),c=Re(e,l,s.onTriggerChange),d=g.useRef(!1),h=g.useRef(!1),f=g.useCallback(()=>d.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(IS,{asChild:!0,...o,children:a.jsx(ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ee(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ee(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ee(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ee(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:ee(t.onBlur,s.onClose),onClick:ee(t.onClick,s.onClose)})})});mM.displayName=Om;var gM="TooltipPortal",[R$,yM]=Ah(gM,{forceMount:void 0}),ia="TooltipContent",jS=g.forwardRef((t,e)=>{const n=yM(ia,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Rh(ia,t.__scopeTooltip);return a.jsx(Wi,{present:r||o.open,children:o.disableHoverableContent?a.jsx(DS,{side:s,...i,ref:e}):a.jsx(vM,{side:s,...i,ref:e})})}),vM=g.forwardRef((t,e)=>{const n=Rh(ia,t.__scopeTooltip),r=RS(ia,t.__scopeTooltip),s=g.useRef(null),i=Re(e,s),[o,l]=g.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,p=g.useCallback(()=>{l(null),f(!1)},[f]),_=g.useCallback((I,x)=>{const E=I.currentTarget,v={x:I.clientX,y:I.clientY},y=EM(v,E.getBoundingClientRect()),b=TM(v,y),S=SM(x.getBoundingClientRect()),j=NM([...b,...S]);l(j),f(!0)},[f]);return g.useEffect(()=>()=>p(),[p]),g.useEffect(()=>{if(c&&h){const I=E=>_(E,h),x=E=>_(E,c);return c.addEventListener("pointerleave",I),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",I),h.removeEventListener("pointerleave",x)}}},[c,h,_,p]),g.useEffect(()=>{if(o){const I=x=>{const E=x.target,v={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(E))||(h==null?void 0:h.contains(E)),b=!IM(v,o);y?p():b&&(p(),d())};return document.addEventListener("pointermove",I),()=>document.removeEventListener("pointermove",I)}},[c,h,o,d,p]),a.jsx(DS,{...t,ref:i})}),[xM,wM]=Ah(kS,{isInside:!1}),_M=xj("TooltipContent"),DS=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Rh(ia,n),d=Ly(n),{onClose:h}=c;return g.useEffect(()=>(document.addEventListener(Dw,h),()=>document.removeEventListener(Dw,h)),[h]),g.useEffect(()=>{if(c.trigger){const f=p=>{const _=p.target;_!=null&&_.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(hc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(NS,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(_M,{children:r}),a.jsx(xM,{scope:n,isInside:!0,children:a.jsx($j,{id:c.contentId,role:"tooltip",children:s||r})})]})})});jS.displayName=ia;var OS="TooltipArrow",bM=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ly(n);return wM(OS,n).isInside?null:a.jsx(CS,{...s,...r,ref:e})});bM.displayName=OS;function EM(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function TM(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function SM(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function IM(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],d=l.x,h=l.y,f=c.x,p=c.y;h>r!=p>r&&n<(f-d)*(r-h)/(p-h)+d&&(s=!s)}return s}function NM(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),CM(e)}function CM(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var AM=PS,MS=jS;const RM=AM,PM=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(MS,{ref:r,sideOffset:e,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));PM.displayName=MS.displayName;/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=()=>{};var Ow={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,_=d&63;c||(_=64,o||(p=64)),r.push(n[h],n[f],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new DM;const p=i<<2|l>>4;if(r.push(p),d!==64){const _=l<<4&240|d>>2;if(r.push(_),f!==64){const I=d<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OM=function(t){const e=LS(t);return VS.encodeByteArray(e,!0)},Ad=function(t){return OM(t).replace(/\./g,"")},FS=function(t){try{return VS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=()=>MM().__FIREBASE_DEFAULTS__,VM=()=>{if(typeof process>"u"||typeof Ow>"u")return;const t=Ow.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FS(t[1]);return e&&JSON.parse(e)},Ph=()=>{try{return kM()||LM()||VM()||FM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},US=t=>{var e,n;return(n=(e=Ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$S=t=>{const e=US(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},BS=()=>{var t;return(t=Ph())===null||t===void 0?void 0:t.config},zS=t=>{var e;return(e=Ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){return t.endsWith(".cloudworkstations.dev")}async function Vy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ad(JSON.stringify(n)),Ad(JSON.stringify(o)),""].join(".")}const El={};function $M(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function BM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Mw=!1;function Fy(t,e){if(typeof window>"u"||typeof document>"u"||!Ki(window.location.host)||El[t]===e||El[t]||Mw)return;El[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=$M().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Mw=!0,o()},p}function h(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=BM(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),v=n("preprendIcon"),y=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;l(b),h(E,x);const S=d();c(y,v),b.append(y,I,E,S),document.body.appendChild(b)}i?(I.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function HM(){var t;const e=(t=Ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KM(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function QM(){return!HM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YM(){try{return typeof indexedDB=="object"}catch{return!1}}function XM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="FirebaseError";class hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JM,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ZM(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new hr(s,l,r)}}function ZM(t,e){return t.replace(e4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const e4=/\{\$([^}]+)}/g;function t4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Lw(i)&&Lw(o)){if(!ki(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Lw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ol(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function n4(t,e){const n=new r4(t,e);return n.subscribe.bind(n)}class r4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hp),s.error===void 0&&(s.error=hp),s.complete===void 0&&(s.complete=hp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new UM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a4(e))try{this.getOrInitializeService({instanceIdentifier:ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ui){return this.instances.has(e)}getOptions(e=ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ui){return this.component?this.component.multipleInstances?e:ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o4(t){return t===ui?void 0:t}function a4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const c4={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},u4=pe.INFO,d4={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},h4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=d4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=u4,this._logHandler=h4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const f4=(t,e)=>e.some(n=>t instanceof n);let Vw,Fw;function p4(){return Vw||(Vw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m4(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WS=new WeakMap,Mm=new WeakMap,GS=new WeakMap,fp=new WeakMap,$y=new WeakMap;function g4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Rs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WS.set(n,t)}).catch(()=>{}),$y.set(e,t),e}function y4(t){if(Mm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mm.set(t,e)}let Lm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v4(t){Lm=t(Lm)}function x4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(pp(this),e,...n);return GS.set(r,e.sort?e.sort():[e]),Rs(r)}:m4().includes(t)?function(...e){return t.apply(pp(this),e),Rs(WS.get(this))}:function(...e){return Rs(t.apply(pp(this),e))}}function w4(t){return typeof t=="function"?x4(t):(t instanceof IDBTransaction&&y4(t),f4(t,p4())?new Proxy(t,Lm):t)}function Rs(t){if(t instanceof IDBRequest)return g4(t);if(fp.has(t))return fp.get(t);const e=w4(t);return e!==t&&(fp.set(t,e),$y.set(e,t)),e}const pp=t=>$y.get(t);function _4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Rs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Rs(o.result),c.oldVersion,c.newVersion,Rs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const b4=["get","getKey","getAll","getAllKeys","count"],E4=["put","add","delete","clear"],mp=new Map;function Uw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=E4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||b4.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return mp.set(e,i),i}v4(t=>({...t,get:(e,n,r)=>Uw(e,n)||t.get(e,n,r),has:(e,n)=>!!Uw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function S4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vm="@firebase/app",$w="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Uy("@firebase/app"),I4="@firebase/app-compat",N4="@firebase/analytics-compat",C4="@firebase/analytics",A4="@firebase/app-check-compat",R4="@firebase/app-check",P4="@firebase/auth",k4="@firebase/auth-compat",j4="@firebase/database",D4="@firebase/data-connect",O4="@firebase/database-compat",M4="@firebase/functions",L4="@firebase/functions-compat",V4="@firebase/installations",F4="@firebase/installations-compat",U4="@firebase/messaging",$4="@firebase/messaging-compat",B4="@firebase/performance",z4="@firebase/performance-compat",H4="@firebase/remote-config",W4="@firebase/remote-config-compat",G4="@firebase/storage",q4="@firebase/storage-compat",K4="@firebase/firestore",Q4="@firebase/ai",Y4="@firebase/firestore-compat",X4="firebase",J4="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",Z4={[Vm]:"fire-core",[I4]:"fire-core-compat",[C4]:"fire-analytics",[N4]:"fire-analytics-compat",[R4]:"fire-app-check",[A4]:"fire-app-check-compat",[P4]:"fire-auth",[k4]:"fire-auth-compat",[j4]:"fire-rtdb",[D4]:"fire-data-connect",[O4]:"fire-rtdb-compat",[M4]:"fire-fn",[L4]:"fire-fn-compat",[V4]:"fire-iid",[F4]:"fire-iid-compat",[U4]:"fire-fcm",[$4]:"fire-fcm-compat",[B4]:"fire-perf",[z4]:"fire-perf-compat",[H4]:"fire-rc",[W4]:"fire-rc-compat",[G4]:"fire-gcs",[q4]:"fire-gcs-compat",[K4]:"fire-fst",[Y4]:"fire-fst-compat",[Q4]:"fire-vertex","fire-js":"fire-js",[X4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,eL=new Map,Um=new Map;function Bw(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ji(t){const e=t.name;if(Um.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;Um.set(e,t);for(const n of Rd.values())Bw(n,t);for(const n of eL.values())Bw(n,t);return!0}function kh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new gc("app","Firebase",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=J4;function By(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fm,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ps.create("bad-app-name",{appName:String(s)});if(n||(n=BS()),!n)throw Ps.create("no-options");const i=Rd.get(s);if(i){if(ki(n,i.options)&&ki(r,i.config))return i;throw Ps.create("duplicate-app",{appName:s})}const o=new l4(s);for(const c of Um.values())o.addComponent(c);const l=new nL(n,r,o);return Rd.set(s,l),l}function zy(t=Fm){const e=Rd.get(t);if(!e&&t===Fm&&BS())return By();if(!e)throw Ps.create("no-app",{appName:t});return e}function rr(t,e,n){var r;let s=(r=Z4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(l.join(" "));return}ji(new Fs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="firebase-heartbeat-database",sL=1,Ql="firebase-heartbeat-store";let gp=null;function qS(){return gp||(gp=_4(rL,sL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ps.create("idb-open",{originalErrorMessage:t.message})})),gp}async function iL(t){try{const n=(await qS()).transaction(Ql),r=await n.objectStore(Ql).get(KS(t));return await n.done,r}catch(e){if(e instanceof hr)$r.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function zw(t,e){try{const r=(await qS()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,KS(t)),await r.done}catch(n){if(n instanceof hr)$r.warn(n.message);else{const r=Ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(r.message)}}}function KS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=1024,aL=30;class lL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Hw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>aL){const o=dL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){$r.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hw(),{heartbeatsToSend:r,unsentEntries:s}=cL(this._heartbeatsCache.heartbeats),i=Ad(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return $r.warn(n),""}}}function Hw(){return new Date().toISOString().substring(0,10)}function cL(t,e=oL){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ww(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ww(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YM()?XM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ww(t){return Ad(JSON.stringify({version:2,heartbeats:t})).length}function dL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){ji(new Fs("platform-logger",e=>new T4(e),"PRIVATE")),ji(new Fs("heartbeat",e=>new lL(e),"PRIVATE")),rr(Vm,$w,t),rr(Vm,$w,"esm2017"),rr("fire-js","")}hL("");var Jn=function(){return Jn=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jn.apply(this,arguments)};function vc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function fL(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function QS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pL=QS,YS=new gc("auth","Firebase",QS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Uy("@firebase/auth");function mL(t,...e){Pd.logLevel<=pe.WARN&&Pd.warn(`Auth (${Qi}): ${t}`,...e)}function Bu(t,...e){Pd.logLevel<=pe.ERROR&&Pd.error(`Auth (${Qi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,...e){throw Wy(t,...e)}function Vn(t,...e){return Wy(t,...e)}function Hy(t,e,n){const r=Object.assign(Object.assign({},pL()),{[e]:n});return new gc("auth","Firebase",r).create(e,{appName:t.name})}function sr(t){return Hy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&En(t,"argument-error"),Hy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YS.create(t,...e)}function ne(t,e,...n){if(!t)throw Wy(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function Br(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gL(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gL()||GM()||"connection"in navigator)?navigator.onLine:!0}function vL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=zM()||qM()}get(){return yL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_L=new xc(3e4,6e4);function Ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xs(t,e,n,r,s={}){return ZS(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=yc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return WM()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(d.credentials="include"),JS.fetch()(await eI(t,t.config.apiHost,n,l),d)})}async function ZS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xL),e);try{const s=new EL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw pu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw pu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw pu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw pu(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Hy(t,h,d);En(t,h)}}catch(s){if(s instanceof hr)throw s;En(t,"network-request-failed",{message:String(s)})}}async function wc(t,e,n,r,s={}){const i=await Xs(t,e,n,r,s);return"mfaPendingCredential"in i&&En(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function eI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Gy(t.config,s):`${t.config.apiScheme}://${s}`;return wL.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function bL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),_L.get())})}}function pu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vn(t,e,r);return s.customData._tokenResponse=n,s}function qw(t){return t!==void 0&&t.enterprise!==void 0}class TL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SL(t,e){return Xs(t,"GET","/v2/recaptchaConfig",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,e){return Xs(t,"POST","/v1/accounts:delete",e)}async function kd(t,e){return Xs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NL(t,e=!1){const n=nt(t),r=await n.getIdToken(e),s=qy(r);ne(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Tl(yp(s.auth_time)),issuedAtTime:Tl(yp(s.iat)),expirationTime:Tl(yp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function yp(t){return Number(t)*1e3}function qy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const s=FS(n);return s?JSON.parse(s):(Bu("Failed to decode base64 JWT payload"),null)}catch(s){return Bu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Kw(t){const e=qy(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hr&&CL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function CL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tl(this.lastLoginAt),this.creationTime=Tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Yl(t,kd(n,{idToken:r}));ne(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tI(i.providerUserInfo):[],l=PL(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=c?d:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Bm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function RL(t){const e=nt(t);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tI(t){return t.map(e=>{var{providerId:n}=e,r=vc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e){const n=await ZS(t,{},async()=>{const r=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await eI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ki(t.emulatorConfig.host)&&(c.credentials="include"),JS.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jL(t,e){return Xs(t,"POST","/v2/accounts:revokeToken",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const n=Kw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await kL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Oo;return r&&(ne(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ne(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ne(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NL(this,e)}reload(){return RL(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(sr(this.auth));const e=await this.getIdToken();return await Yl(this,IL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,E=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,v=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:S,isAnonymous:j,providerData:O,stsTokenManager:N}=n;ne(b&&N,e,"internal-error");const T=Oo.fromJSON(this.name,N);ne(typeof b=="string",e,"internal-error"),es(f,e.name),es(p,e.name),ne(typeof S=="boolean",e,"internal-error"),ne(typeof j=="boolean",e,"internal-error"),es(_,e.name),es(I,e.name),es(x,e.name),es(E,e.name),es(v,e.name),es(y,e.name);const R=new Dn({uid:b,auth:e,email:p,emailVerified:S,displayName:f,isAnonymous:j,photoURL:I,phoneNumber:_,tenantId:x,stsTokenManager:T,createdAt:v,lastLoginAt:y});return O&&Array.isArray(O)&&(R.providerData=O.map(P=>Object.assign({},P))),E&&(R._redirectEventId=E),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oo;s.updateFromServerResponse(n);const i=new Dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ne(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Oo;l.updateFromIdToken(r);const c=new Dn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;function Cr(t){Br(t instanceof Function,"Expected a class definition");let e=Qw.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nI.type="NONE";const Yw=nI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){return`firebase:${t}:${e}:${n}`}class Mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=zu(this.userKey,s.apiKey,i),this.fullPersistenceKey=zu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await kd(this.auth,{idToken:e}).catch(()=>{});return n?Dn._fromGetAccountInfoResponse(this.auth,n,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mo(Cr(Yw),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Cr(Yw);const o=zu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const p=await kd(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Dn._fromGetAccountInfoResponse(e,p,h)}else f=Dn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Mo(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Mo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lI(e))return"Blackberry";if(cI(e))return"Webos";if(sI(e))return"Safari";if((e.includes("chrome/")||iI(e))&&!e.includes("edge/"))return"Chrome";if(aI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rI(t=Mt()){return/firefox\//i.test(t)}function sI(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iI(t=Mt()){return/crios\//i.test(t)}function oI(t=Mt()){return/iemobile/i.test(t)}function aI(t=Mt()){return/android/i.test(t)}function lI(t=Mt()){return/blackberry/i.test(t)}function cI(t=Mt()){return/webos/i.test(t)}function Ky(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DL(t=Mt()){var e;return Ky(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OL(){return KM()&&document.documentMode===10}function uI(t=Mt()){return Ky(t)||aI(t)||cI(t)||lI(t)||/windows phone/i.test(t)||oI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t,e=[]){let n;switch(t){case"Browser":n=Xw(Mt());break;case"Worker":n=`${Xw(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(t,e={}){return Xs(t,"GET","/v2/passwordPolicy",Ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=6;class FL{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:VL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jw(this),this.idTokenSubscription=new Jw(this),this.beforeStateQueue=new ML(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await kd(this,{idToken:e}),r=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(sr(this));const n=e?nt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LL(this),n=new FL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cr(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Cr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fr(t){return nt(t)}class Jw{constructor(e){this.auth=e,this.observer=null,this.addObserver=n4(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $L(t){jh=t}function hI(t){return jh.loadJS(t)}function BL(){return jh.recaptchaEnterpriseScript}function zL(){return jh.gapiScript}function HL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class WL{constructor(){this.enterprise=new GL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const qL="recaptcha-enterprise",fI="NO_RECAPTCHA";class KL{constructor(e){this.type=qL,this.auth=fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{SL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new TL(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;qw(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(fI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&qw(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=BL();c.length!==0&&(c+=l),hI(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Zw(t,e,n,r=!1,s=!1){const i=new KL(t);let o;if(s)o=fI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function zm(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Zw(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Zw(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t,e){const n=kh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ki(i,e??{}))return s;En(s,"already-initialized")}return n.initialize({options:e})}function YL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XL(t,e,n){const r=fr(t);ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=pI(e),{host:o,port:l}=JL(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ne(ki(d,r.config.emulator)&&ki(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ki(o)?(Vy(`${i}//${o}${c}`),Fy("Auth",!0)):ZL()}function pI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JL(t){const e=pI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:e_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:e_(o)}}}function e_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function e6(t,e){return Xs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){return wc(t,"POST","/v1/accounts:signInWithPassword",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}async function r6(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends Qy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,n,"signInWithPassword",t6);case"emailLink":return n6(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,r,"signUpPassword",e6);case"emailLink":return r6(e,{idToken:n,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(t,e){return wc(t,"POST","/v1/accounts:signInWithIdp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="http://localhost";class Di extends Qy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):En("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=vc(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Di(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Lo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lo(e,n)}buildRequest(){const e={requestUri:s6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o6(t){const e=il(ol(t)).link,n=e?il(ol(e)).deep_link_id:null,r=il(ol(t)).deep_link_id;return(r?il(ol(r)).link:null)||r||n||e||t}class Yy{constructor(e){var n,r,s,i,o,l;const c=il(ol(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=i6((s=c.mode)!==null&&s!==void 0?s:null);ne(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=o6(e);try{return new Yy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.providerId=ba.PROVIDER_ID}static credential(e,n){return Xl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yy.parseLink(n);return ne(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ba.PROVIDER_ID="password";ba.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ba.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Dh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends _c{constructor(){super("facebook.com")}static credential(e){return Di._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Di._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com";Tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends _c{constructor(){super("github.com")}static credential(e){return Di._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends _c{constructor(){super("twitter.com")}static credential(e,n){return Di._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a6(t,e){return wc(t,"POST","/v1/accounts:signUp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Dn._fromIdTokenResponse(e,r,s),o=t_(r);return new Oi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=t_(r);return new Oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function t_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends hr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Dd(e,n,r,s)}}function mI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(t,i,e,r):i})}async function l6(t,e,n=!1){const r=await Yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c6(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(sr(r));const s="reauthenticate";try{const i=await Yl(t,mI(r,s,e,t),n);ne(i.idToken,r,"internal-error");const o=qy(i.idToken);ne(o,r,"internal-error");const{sub:l}=o;return ne(t.uid===l,r,"user-mismatch"),Oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&En(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(t,e,n=!1){if($t(t.app))return Promise.reject(sr(t));const r="signIn",s=await mI(t,r,e),i=await Oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function u6(t,e){return gI(fr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t){const e=fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function d6(t,e,n){if($t(t.app))return Promise.reject(sr(t));const r=fr(t),o=await zm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a6).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&yI(t),c}),l=await Oi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function h6(t,e,n){return $t(t.app)?Promise.reject(sr(t)):u6(nt(t),ba.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yI(t),r})}function f6(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function p6(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function vI(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function xI(t){return nt(t).signOut()}const Od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Od,"1"),this.storage.removeItem(Od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=1e3,g6=10;class _I extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);OL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},m6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_I.type="LOCAL";const y6=_I;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bI.type="SESSION";const EI=bI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Oh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await v6(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Xy("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function w6(t){ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function _6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function E6(){return TI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="firebaseLocalStorageDb",T6=1,Md="firebaseLocalStorage",II="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(t,e){return t.transaction([Md],e?"readwrite":"readonly").objectStore(Md)}function S6(){const t=indexedDB.deleteDatabase(SI);return new bc(t).toPromise()}function Hm(){const t=indexedDB.open(SI,T6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Md,{keyPath:II})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Md)?e(r):(r.close(),await S6(),e(await Hm()))})})}async function n_(t,e,n){const r=Mh(t,!0).put({[II]:e,value:n});return new bc(r).toPromise()}async function I6(t,e){const n=Mh(t,!1).get(e),r=await new bc(n).toPromise();return r===void 0?null:r.value}function r_(t,e){const n=Mh(t,!0).delete(e);return new bc(n).toPromise()}const N6=800,C6=3;class NI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>C6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oh._getInstance(E6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _6(),!this.activeServiceWorker)return;this.sender=new x6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await n_(e,Od,"1"),await r_(e,Od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>I6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>r_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mh(s,!1).getAll();return new bc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NI.type="LOCAL";const A6=NI;new xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e){return e?Cr(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends Qy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function R6(t){return gI(t.auth,new Zy(t),t.bypassAuthState)}function P6(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),c6(n,new Zy(t),t.bypassAuthState)}async function k6(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),l6(n,new Zy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R6;case"linkViaPopup":case"linkViaRedirect":return k6;case"reauthViaPopup":case"reauthViaRedirect":return P6;default:En(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new xc(2e3,1e4);async function D6(t,e,n){if($t(t.app))return Promise.reject(Vn(t,"operation-not-supported-in-this-environment"));const r=fr(t);XS(t,e,Dh);const s=Jy(r,n);return new pi(r,"signInViaPopup",e,s).executeNotNull()}class pi extends CI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,pi.currentPopupAction&&pi.currentPopupAction.cancel(),pi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=Xy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j6.get())};e()}}pi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6="pendingRedirect",Hu=new Map;class M6 extends CI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const r=await L6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L6(t,e){const n=RI(e),r=AI(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function V6(t,e){return AI(t)._set(RI(e),"true")}function F6(t,e){Hu.set(t._key(),e)}function AI(t){return Cr(t._redirectPersistence)}function RI(t){return zu(O6,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e,n){return $6(t,e,n)}async function $6(t,e,n){if($t(t.app))return Promise.reject(sr(t));const r=fr(t);XS(t,e,Dh),await r._initializationPromise;const s=Jy(r,n);return await V6(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function B6(t,e){return await fr(t)._initializationPromise,PI(t,e,!1)}async function PI(t,e,n=!1){if($t(t.app))return Promise.reject(sr(t));const r=fr(t),s=Jy(r,e),o=await new M6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=10*60*1e3;class H6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!kI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z6&&this.cachedEventUids.clear(),this.cachedEventUids.has(s_(e))}saveEventToCache(e){this.cachedEventUids.add(s_(e)),this.lastProcessedEventTime=Date.now()}}function s_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function W6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e={}){return Xs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K6=/^https?/;async function Q6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G6(t);for(const n of e)try{if(Y6(n))return}catch{}En(t,"unauthorized-domain")}function Y6(t){const e=$m(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!K6.test(n))return!1;if(q6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new xc(3e4,6e4);function i_(){const t=ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function J6(t){return new Promise((e,n)=>{var r,s,i;function o(){i_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i_(),n(Vn(t,"network-request-failed"))},timeout:X6.get()})}if(!((s=(r=ir().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ir().gapi)===null||i===void 0)&&i.load)o();else{const l=HL("iframefcb");return ir()[l]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},hI(`${zL()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function Z6(t){return Wu=Wu||J6(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new xc(5e3,15e3),t3="__/auth/iframe",n3="emulator/auth/iframe",r3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i3(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gy(e,n3):`https://${t.config.authDomain}/${t3}`,r={apiKey:e.apiKey,appName:t.name,v:Qi},s=s3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${yc(r).slice(1)}`}async function o3(t){const e=await Z6(t),n=ir().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:i3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),l=ir().setTimeout(()=>{i(o)},e3.get());function c(){ir().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},l3=500,c3=600,u3="_blank",d3="http://localhost";class o_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h3(t,e,n,r=l3,s=c3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},a3),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Mt().toLowerCase();n&&(l=iI(d)?u3:n),rI(d)&&(e=e||d3,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[_,I])=>`${p}${_}=${I},`,"");if(DL(d)&&l!=="_self")return f3(e||"",l),new o_(null);const f=window.open(e||"",l,h);ne(f,t,"popup-blocked");try{f.focus()}catch{}return new o_(f)}function f3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="__/auth/handler",m3="emulator/auth/handler",g3=encodeURIComponent("fac");async function a_(t,e,n,r,s,i){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qi,eventId:s};if(e instanceof Dh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",t4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof _c){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${g3}=${encodeURIComponent(c)}`:"";return`${y3(t)}?${yc(l).slice(1)}${d}`}function y3({config:t}){return t.emulator?Gy(t,m3):`https://${t.authDomain}/${p3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="webStorageSupport";class v3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EI,this._completeRedirectFn=PI,this._overrideRedirectResult=F6}async _openPopup(e,n,r,s){var i;Br((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await a_(e,n,r,$m(),s);return h3(e,o,Xy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await a_(e,n,r,$m(),s);return w6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Br(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await o3(e),r=new H6(e);return n.register("authEvent",s=>(ne(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(vp,{type:vp},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vp];o!==void 0&&n(!!o),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uI()||sI()||Ky()}}const x3=v3;var l_="@firebase/auth",c_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b3(t){ji(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ne(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dI(t)},d=new UL(r,s,i,c);return YL(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ji(new Fs("auth-internal",e=>{const n=fr(e.getProvider("auth").getImmediate());return(r=>new w3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(l_,c_,_3(t)),rr(l_,c_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=5*60,T3=zS("authIdTokenMaxAge")||E3;let u_=null;const S3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>T3)return;const s=n==null?void 0:n.token;u_!==s&&(u_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function I3(t=zy()){const e=kh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QL(t,{popupRedirectResolver:x3,persistence:[A6,y6,EI]}),r=zS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=S3(i.toString());p6(n,o,()=>o(n.currentUser)),f6(n,l=>o(l))}}const s=US("auth");return s&&XL(n,`http://${s}`),n}function N3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$L({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",N3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b3("Browser");var C3="firebase",A3="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(C3,A3,"app");var d_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,jI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function R(){}R.prototype=T.prototype,N.D=T.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(P,A,D){for(var k=Array(arguments.length-2),z=2;z<arguments.length;z++)k[z-2]=arguments[z];return T.prototype[A].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,T,R){R||(R=0);var P=Array(16);if(typeof T=="string")for(var A=0;16>A;++A)P[A]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(A=0;16>A;++A)P[A]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=N.g[0],R=N.g[1],A=N.g[2];var D=N.g[3],k=T+(D^R&(A^D))+P[0]+3614090360&4294967295;T=R+(k<<7&4294967295|k>>>25),k=D+(A^T&(R^A))+P[1]+3905402710&4294967295,D=T+(k<<12&4294967295|k>>>20),k=A+(R^D&(T^R))+P[2]+606105819&4294967295,A=D+(k<<17&4294967295|k>>>15),k=R+(T^A&(D^T))+P[3]+3250441966&4294967295,R=A+(k<<22&4294967295|k>>>10),k=T+(D^R&(A^D))+P[4]+4118548399&4294967295,T=R+(k<<7&4294967295|k>>>25),k=D+(A^T&(R^A))+P[5]+1200080426&4294967295,D=T+(k<<12&4294967295|k>>>20),k=A+(R^D&(T^R))+P[6]+2821735955&4294967295,A=D+(k<<17&4294967295|k>>>15),k=R+(T^A&(D^T))+P[7]+4249261313&4294967295,R=A+(k<<22&4294967295|k>>>10),k=T+(D^R&(A^D))+P[8]+1770035416&4294967295,T=R+(k<<7&4294967295|k>>>25),k=D+(A^T&(R^A))+P[9]+2336552879&4294967295,D=T+(k<<12&4294967295|k>>>20),k=A+(R^D&(T^R))+P[10]+4294925233&4294967295,A=D+(k<<17&4294967295|k>>>15),k=R+(T^A&(D^T))+P[11]+2304563134&4294967295,R=A+(k<<22&4294967295|k>>>10),k=T+(D^R&(A^D))+P[12]+1804603682&4294967295,T=R+(k<<7&4294967295|k>>>25),k=D+(A^T&(R^A))+P[13]+4254626195&4294967295,D=T+(k<<12&4294967295|k>>>20),k=A+(R^D&(T^R))+P[14]+2792965006&4294967295,A=D+(k<<17&4294967295|k>>>15),k=R+(T^A&(D^T))+P[15]+1236535329&4294967295,R=A+(k<<22&4294967295|k>>>10),k=T+(A^D&(R^A))+P[1]+4129170786&4294967295,T=R+(k<<5&4294967295|k>>>27),k=D+(R^A&(T^R))+P[6]+3225465664&4294967295,D=T+(k<<9&4294967295|k>>>23),k=A+(T^R&(D^T))+P[11]+643717713&4294967295,A=D+(k<<14&4294967295|k>>>18),k=R+(D^T&(A^D))+P[0]+3921069994&4294967295,R=A+(k<<20&4294967295|k>>>12),k=T+(A^D&(R^A))+P[5]+3593408605&4294967295,T=R+(k<<5&4294967295|k>>>27),k=D+(R^A&(T^R))+P[10]+38016083&4294967295,D=T+(k<<9&4294967295|k>>>23),k=A+(T^R&(D^T))+P[15]+3634488961&4294967295,A=D+(k<<14&4294967295|k>>>18),k=R+(D^T&(A^D))+P[4]+3889429448&4294967295,R=A+(k<<20&4294967295|k>>>12),k=T+(A^D&(R^A))+P[9]+568446438&4294967295,T=R+(k<<5&4294967295|k>>>27),k=D+(R^A&(T^R))+P[14]+3275163606&4294967295,D=T+(k<<9&4294967295|k>>>23),k=A+(T^R&(D^T))+P[3]+4107603335&4294967295,A=D+(k<<14&4294967295|k>>>18),k=R+(D^T&(A^D))+P[8]+1163531501&4294967295,R=A+(k<<20&4294967295|k>>>12),k=T+(A^D&(R^A))+P[13]+2850285829&4294967295,T=R+(k<<5&4294967295|k>>>27),k=D+(R^A&(T^R))+P[2]+4243563512&4294967295,D=T+(k<<9&4294967295|k>>>23),k=A+(T^R&(D^T))+P[7]+1735328473&4294967295,A=D+(k<<14&4294967295|k>>>18),k=R+(D^T&(A^D))+P[12]+2368359562&4294967295,R=A+(k<<20&4294967295|k>>>12),k=T+(R^A^D)+P[5]+4294588738&4294967295,T=R+(k<<4&4294967295|k>>>28),k=D+(T^R^A)+P[8]+2272392833&4294967295,D=T+(k<<11&4294967295|k>>>21),k=A+(D^T^R)+P[11]+1839030562&4294967295,A=D+(k<<16&4294967295|k>>>16),k=R+(A^D^T)+P[14]+4259657740&4294967295,R=A+(k<<23&4294967295|k>>>9),k=T+(R^A^D)+P[1]+2763975236&4294967295,T=R+(k<<4&4294967295|k>>>28),k=D+(T^R^A)+P[4]+1272893353&4294967295,D=T+(k<<11&4294967295|k>>>21),k=A+(D^T^R)+P[7]+4139469664&4294967295,A=D+(k<<16&4294967295|k>>>16),k=R+(A^D^T)+P[10]+3200236656&4294967295,R=A+(k<<23&4294967295|k>>>9),k=T+(R^A^D)+P[13]+681279174&4294967295,T=R+(k<<4&4294967295|k>>>28),k=D+(T^R^A)+P[0]+3936430074&4294967295,D=T+(k<<11&4294967295|k>>>21),k=A+(D^T^R)+P[3]+3572445317&4294967295,A=D+(k<<16&4294967295|k>>>16),k=R+(A^D^T)+P[6]+76029189&4294967295,R=A+(k<<23&4294967295|k>>>9),k=T+(R^A^D)+P[9]+3654602809&4294967295,T=R+(k<<4&4294967295|k>>>28),k=D+(T^R^A)+P[12]+3873151461&4294967295,D=T+(k<<11&4294967295|k>>>21),k=A+(D^T^R)+P[15]+530742520&4294967295,A=D+(k<<16&4294967295|k>>>16),k=R+(A^D^T)+P[2]+3299628645&4294967295,R=A+(k<<23&4294967295|k>>>9),k=T+(A^(R|~D))+P[0]+4096336452&4294967295,T=R+(k<<6&4294967295|k>>>26),k=D+(R^(T|~A))+P[7]+1126891415&4294967295,D=T+(k<<10&4294967295|k>>>22),k=A+(T^(D|~R))+P[14]+2878612391&4294967295,A=D+(k<<15&4294967295|k>>>17),k=R+(D^(A|~T))+P[5]+4237533241&4294967295,R=A+(k<<21&4294967295|k>>>11),k=T+(A^(R|~D))+P[12]+1700485571&4294967295,T=R+(k<<6&4294967295|k>>>26),k=D+(R^(T|~A))+P[3]+2399980690&4294967295,D=T+(k<<10&4294967295|k>>>22),k=A+(T^(D|~R))+P[10]+4293915773&4294967295,A=D+(k<<15&4294967295|k>>>17),k=R+(D^(A|~T))+P[1]+2240044497&4294967295,R=A+(k<<21&4294967295|k>>>11),k=T+(A^(R|~D))+P[8]+1873313359&4294967295,T=R+(k<<6&4294967295|k>>>26),k=D+(R^(T|~A))+P[15]+4264355552&4294967295,D=T+(k<<10&4294967295|k>>>22),k=A+(T^(D|~R))+P[6]+2734768916&4294967295,A=D+(k<<15&4294967295|k>>>17),k=R+(D^(A|~T))+P[13]+1309151649&4294967295,R=A+(k<<21&4294967295|k>>>11),k=T+(A^(R|~D))+P[4]+4149444226&4294967295,T=R+(k<<6&4294967295|k>>>26),k=D+(R^(T|~A))+P[11]+3174756917&4294967295,D=T+(k<<10&4294967295|k>>>22),k=A+(T^(D|~R))+P[2]+718787259&4294967295,A=D+(k<<15&4294967295|k>>>17),k=R+(D^(A|~T))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+A&4294967295,N.g[3]=N.g[3]+D&4294967295}r.prototype.u=function(N,T){T===void 0&&(T=N.length);for(var R=T-this.blockSize,P=this.B,A=this.h,D=0;D<T;){if(A==0)for(;D<=R;)s(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<T;)if(P[A++]=N.charCodeAt(D++),A==this.blockSize){s(this,P),A=0;break}}else for(;D<T;)if(P[A++]=N[D++],A==this.blockSize){s(this,P),A=0;break}}this.h=A,this.o+=T},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;var R=8*this.o;for(T=N.length-8;T<N.length;++T)N[T]=R&255,R/=256;for(this.u(N),N=Array(16),T=R=0;4>T;++T)for(var P=0;32>P;P+=8)N[R++]=this.g[T]>>>P&255;return N};function i(N,T){var R=l;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=T(N)}function o(N,T){this.h=T;for(var R=[],P=!0,A=N.length-1;0<=A;A--){var D=N[A]|0;P&&D==T||(R[A]=D,P=!1)}this.g=R}var l={};function c(N){return-128<=N&&128>N?i(N,function(T){return new o([T|0],0>T?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return E(d(-N));for(var T=[],R=1,P=0;N>=R;P++)T[P]=N/R|0,R*=4294967296;return new o(T,0)}function h(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return E(h(N.substring(1),T));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=d(Math.pow(T,8)),P=f,A=0;A<N.length;A+=8){var D=Math.min(8,N.length-A),k=parseInt(N.substring(A,A+D),T);8>D?(D=d(Math.pow(T,D)),P=P.j(D).add(d(k))):(P=P.j(R),P=P.add(d(k)))}return P}var f=c(0),p=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-E(this).m();for(var N=0,T=1,R=0;R<this.g.length;R++){var P=this.i(R);N+=(0<=P?P:4294967296+P)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(I(this))return"0";if(x(this))return"-"+E(this).toString(N);for(var T=d(Math.pow(N,6)),R=this,P="";;){var A=S(R,T).g;R=v(R,A.j(T));var D=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=A,I(R))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function I(N){if(N.h!=0)return!1;for(var T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function x(N){return N.h==-1}t.l=function(N){return N=v(this,N),x(N)?-1:I(N)?0:1};function E(N){for(var T=N.g.length,R=[],P=0;P<T;P++)R[P]=~N.g[P];return new o(R,~N.h).add(p)}t.abs=function(){return x(this)?E(this):this},t.add=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],P=0,A=0;A<=T;A++){var D=P+(this.i(A)&65535)+(N.i(A)&65535),k=(D>>>16)+(this.i(A)>>>16)+(N.i(A)>>>16);P=k>>>16,D&=65535,k&=65535,R[A]=k<<16|D}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(N,T){return N.add(E(T))}t.j=function(N){if(I(this)||I(N))return f;if(x(this))return x(N)?E(this).j(E(N)):E(E(this).j(N));if(x(N))return E(this.j(E(N)));if(0>this.l(_)&&0>N.l(_))return d(this.m()*N.m());for(var T=this.g.length+N.g.length,R=[],P=0;P<2*T;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var A=0;A<N.g.length;A++){var D=this.i(P)>>>16,k=this.i(P)&65535,z=N.i(A)>>>16,Z=N.i(A)&65535;R[2*P+2*A]+=k*Z,y(R,2*P+2*A),R[2*P+2*A+1]+=D*Z,y(R,2*P+2*A+1),R[2*P+2*A+1]+=k*z,y(R,2*P+2*A+1),R[2*P+2*A+2]+=D*z,y(R,2*P+2*A+2)}for(P=0;P<T;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=T;P<2*T;P++)R[P]=0;return new o(R,0)};function y(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function b(N,T){this.g=N,this.h=T}function S(N,T){if(I(T))throw Error("division by zero");if(I(N))return new b(f,f);if(x(N))return T=S(E(N),T),new b(E(T.g),E(T.h));if(x(T))return T=S(N,E(T)),new b(E(T.g),T.h);if(30<N.g.length){if(x(N)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var R=p,P=T;0>=P.l(N);)R=j(R),P=j(P);var A=O(R,1),D=O(P,1);for(P=O(P,2),R=O(R,2);!I(P);){var k=D.add(P);0>=k.l(N)&&(A=A.add(R),D=k),P=O(P,1),R=O(R,1)}return T=v(N,A.j(T)),new b(A,T)}for(A=f;0<=N.l(T);){for(R=Math.max(1,Math.floor(N.m()/T.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=d(R),k=D.j(T);x(k)||0<k.l(N);)R-=P,D=d(R),k=D.j(T);I(D)&&(D=p),A=A.add(D),N=v(N,k)}return new b(A,N)}t.A=function(N){return S(this,N).h},t.and=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)&N.i(P);return new o(R,this.h&N.h)},t.or=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)|N.i(P);return new o(R,this.h|N.h)},t.xor=function(N){for(var T=Math.max(this.g.length,N.g.length),R=[],P=0;P<T;P++)R[P]=this.i(P)^N.i(P);return new o(R,this.h^N.h)};function j(N){for(var T=N.g.length+1,R=[],P=0;P<T;P++)R[P]=N.i(P)<<1|N.i(P-1)>>>31;return new o(R,N.h)}function O(N,T){var R=T>>5;T%=32;for(var P=N.g.length-R,A=[],D=0;D<P;D++)A[D]=0<T?N.i(D+R)>>>T|N.i(D+R+1)<<32-T:N.i(D+R);return new o(A,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ks=o}).apply(typeof d_<"u"?d_:typeof self<"u"?self:typeof window<"u"?window:{});var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DI,al,OI,Gu,Wm,MI,LI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,w){return u==Array.prototype||u==Object.prototype||(u[m]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mu=="object"&&mu];for(var m=0;m<u.length;++m){var w=u[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var w=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var M=u[C];if(!(M in w))break e;w=w[M]}u=u[u.length-1],C=w[u],m=m(C),m!=C&&m!=null&&e(w,u,{configurable:!0,writable:!0,value:m})}}function i(u,m){u instanceof String&&(u+="");var w=0,C=!1,M={next:function(){if(!C&&w<u.length){var V=w++;return{value:m(V,u[V]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return i(this,function(m,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function d(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,w){return u.call.apply(u.bind,arguments)}function f(u,m,w){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),u.apply(m,M)}}return function(){return u.apply(m,arguments)}}function p(u,m,w){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function _(u,m){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function I(u,m){function w(){}w.prototype=m.prototype,u.aa=m.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(C,M,V){for(var W=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)W[Ce-2]=arguments[Ce];return m.prototype[M].apply(C,W)}}function x(u){const m=u.length;if(0<m){const w=Array(m);for(let C=0;C<m;C++)w[C]=u[C];return w}return[]}function E(u,m){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(c(C)){const M=u.length||0,V=C.length||0;u.length=M+V;for(let W=0;W<V;W++)u[M+W]=C[W]}else u.push(C)}}class v{constructor(m,w){this.i=m,this.j=w,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function y(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=l.navigator;return u&&(u=u.userAgent)?u:""}function S(u){return S[" "](u),u}S[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function O(u,m,w){for(const C in u)m.call(w,u[C],C,u)}function N(u,m){for(const w in u)m.call(void 0,u[w],w,u)}function T(u){const m={};for(const w in u)m[w]=u[w];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let w,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(w in C)u[w]=C[w];for(let V=0;V<R.length;V++)w=R[V],Object.prototype.hasOwnProperty.call(C,w)&&(u[w]=C[w])}}function A(u){var m=1;u=u.split(":");const w=[];for(;0<m&&u.length;)w.push(u.shift()),m--;return u.length&&w.push(u.join(":")),w}function D(u){l.setTimeout(()=>{throw u},0)}function k(){var u=H;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class z{constructor(){this.h=this.g=null}add(m,w){const C=Z.get();C.set(m,w),this.h?this.h.next=C:this.g=C,this.h=C}}var Z=new v(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(m,w){this.h=m,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let te,F=!1,H=new z,Y=()=>{const u=l.Promise.resolve(void 0);te=()=>{u.then(ie)}};var ie=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(w){D(w)}var m=Z;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}F=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};l.addEventListener("test",w,m),l.removeEventListener("test",w,m)}catch{}return u}();function _t(u,m){if(_e.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(j){e:{try{S(m.nodeName);var M=!0;break e}catch{}M=!1}M||(m=null)}}else w=="mouseover"?m=u.fromElement:w=="mouseout"&&(m=u.toElement);this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:at[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&_t.aa.h.call(this)}}I(_t,_e);var at={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function rt(u,m,w,C,M){this.listener=u,this.proxy=null,this.src=m,this.type=w,this.capture=!!C,this.ha=M,this.key=++Ne,this.da=this.fa=!1}function Te(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,m,w,C,M){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var W=lt(u,m,C,M);return-1<W?(m=u[W],w||(m.fa=!1)):(m=new rt(m,this.src,V,!!C,M),m.fa=w,u.push(m)),m};function be(u,m){var w=m.type;if(w in u.g){var C=u.g[w],M=Array.prototype.indexOf.call(C,m,void 0),V;(V=0<=M)&&Array.prototype.splice.call(C,M,1),V&&(Te(m),u.g[w].length==0&&(delete u.g[w],u.h--))}}function lt(u,m,w,C){for(var M=0;M<u.length;++M){var V=u[M];if(!V.da&&V.listener==m&&V.capture==!!w&&V.ha==C)return M}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),mr={};function qr(u,m,w,C,M){if(Array.isArray(m)){for(var V=0;V<m.length;V++)qr(u,m[V],w,C,M);return null}return w=Yv(w),u&&u[X]?u.K(m,w,d(C)?!!C.capture:!1,M):ni(u,m,w,!1,C,M)}function ni(u,m,w,C,M,V){if(!m)throw Error("Invalid event type");var W=d(M)?!!M.capture:!!M,Ce=hf(u);if(Ce||(u[Gt]=Ce=new xe(u)),w=Ce.add(m,w,C,W,V),w.proxy)return w;if(C=uf(),w.proxy=C,C.src=u,C.listener=w,u.addEventListener)We||(M=W),M===void 0&&(M=!1),u.addEventListener(m.toString(),C,M);else if(u.attachEvent)u.attachEvent(Qv(m.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function uf(){function u(w){return m.call(u.src,u.listener,w)}const m=iR;return u}function ri(u,m,w,C,M){if(Array.isArray(m))for(var V=0;V<m.length;V++)ri(u,m[V],w,C,M);else C=d(C)?!!C.capture:!!C,w=Yv(w),u&&u[X]?(u=u.i,m=String(m).toString(),m in u.g&&(V=u.g[m],w=lt(V,w,C,M),-1<w&&(Te(V[w]),Array.prototype.splice.call(V,w,1),V.length==0&&(delete u.g[m],u.h--)))):u&&(u=hf(u))&&(m=u.g[m.toString()],u=-1,m&&(u=lt(m,w,C,M)),(w=-1<u?m[u]:null)&&df(w))}function df(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[X])be(m.i,u);else{var w=u.type,C=u.proxy;m.removeEventListener?m.removeEventListener(w,C,u.capture):m.detachEvent?m.detachEvent(Qv(w),C):m.addListener&&m.removeListener&&m.removeListener(C),(w=hf(m))?(be(w,u),w.h==0&&(w.src=null,m[Gt]=null)):Te(u)}}}function Qv(u){return u in mr?mr[u]:mr[u]="on"+u}function iR(u,m){if(u.da)u=!0;else{m=new _t(m,this);var w=u.listener,C=u.ha||u.src;u.fa&&df(u),u=w.call(C,m)}return u}function hf(u){return u=u[Gt],u instanceof xe?u:null}var ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yv(u){return typeof u=="function"?u:(u[ff]||(u[ff]=function(m){return u.handleEvent(m)}),u[ff])}function bt(){de.call(this),this.i=new xe(this),this.M=this,this.F=null}I(bt,de),bt.prototype[X]=!0,bt.prototype.removeEventListener=function(u,m,w,C){ri(this,u,m,w,C)};function Lt(u,m){var w,C=u.F;if(C)for(w=[];C;C=C.F)w.push(C);if(u=u.M,C=m.type||m,typeof m=="string")m=new _e(m,u);else if(m instanceof _e)m.target=m.target||u;else{var M=m;m=new _e(C,u),P(m,M)}if(M=!0,w)for(var V=w.length-1;0<=V;V--){var W=m.g=w[V];M=Rc(W,C,!0,m)&&M}if(W=m.g=u,M=Rc(W,C,!0,m)&&M,M=Rc(W,C,!1,m)&&M,w)for(V=0;V<w.length;V++)W=m.g=w[V],M=Rc(W,C,!1,m)&&M}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var w=u.g[m],C=0;C<w.length;C++)Te(w[C]);delete u.g[m],u.h--}}this.F=null},bt.prototype.K=function(u,m,w,C){return this.i.add(String(u),m,!1,w,C)},bt.prototype.L=function(u,m,w,C){return this.i.add(String(u),m,!0,w,C)};function Rc(u,m,w,C){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var M=!0,V=0;V<m.length;++V){var W=m[V];if(W&&!W.da&&W.capture==w){var Ce=W.listener,ct=W.ha||W.src;W.fa&&be(u.i,W),M=Ce.call(ct,C)!==!1&&M}}return M&&!C.defaultPrevented}function Xv(u,m,w){if(typeof u=="function")w&&(u=p(u,w));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(u,m||0)}function Jv(u){u.g=Xv(()=>{u.g=null,u.i&&(u.i=!1,Jv(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class oR extends de{constructor(m,w){super(),this.m=m,this.l=w,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Jv(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(u){de.call(this),this.h=u,this.g={}}I(Ra,de);var Zv=[];function e0(u){O(u.g,function(m,w){this.g.hasOwnProperty(w)&&df(m)},u),u.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),e0(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pf=l.JSON.stringify,aR=l.JSON.parse,lR=class{stringify(u){return l.JSON.stringify(u,void 0)}parse(u){return l.JSON.parse(u,void 0)}};function mf(){}mf.prototype.h=null;function t0(u){return u.h||(u.h=u.i())}function n0(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gf(){_e.call(this,"d")}I(gf,_e);function yf(){_e.call(this,"c")}I(yf,_e);var si={},r0=null;function Pc(){return r0=r0||new bt}si.La="serverreachability";function s0(u){_e.call(this,si.La,u)}I(s0,_e);function ka(u){const m=Pc();Lt(m,new s0(m))}si.STAT_EVENT="statevent";function i0(u,m){_e.call(this,si.STAT_EVENT,u),this.stat=m}I(i0,_e);function Vt(u){const m=Pc();Lt(m,new i0(m,u))}si.Ma="timingevent";function o0(u,m){_e.call(this,si.Ma,u),this.size=m}I(o0,_e);function ja(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){u()},m)}function Da(){this.g=!0}Da.prototype.xa=function(){this.g=!1};function cR(u,m,w,C,M,V){u.info(function(){if(u.g)if(V)for(var W="",Ce=V.split("&"),ct=0;ct<Ce.length;ct++){var Ee=Ce[ct].split("=");if(1<Ee.length){var Et=Ee[0];Ee=Ee[1];var Tt=Et.split("_");W=2<=Tt.length&&Tt[1]=="type"?W+(Et+"="+Ee+"&"):W+(Et+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+m+`
`+w+`
`+W})}function uR(u,m,w,C,M,V,W){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+m+`
`+w+`
`+V+" "+W})}function Zi(u,m,w,C){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+hR(u,w)+(C?" "+C:"")})}function dR(u,m){u.info(function(){return"TIMEOUT: "+m})}Da.prototype.info=function(){};function hR(u,m){if(!u.g)return m;if(!m)return null;try{var w=JSON.parse(m);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var C=w[u];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return pf(w)}catch{return m}}var kc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},a0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vf;function jc(){}I(jc,mf),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},vf=new jc;function Kr(u,m,w,C){this.j=u,this.i=m,this.l=w,this.R=C||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new l0}function l0(){this.i=null,this.g="",this.h=!1}var c0={},xf={};function wf(u,m,w){u.L=1,u.v=Lc(gr(m)),u.m=w,u.P=!0,u0(u,null)}function u0(u,m){u.F=Date.now(),Dc(u),u.A=gr(u.v);var w=u.A,C=u.R;Array.isArray(C)||(C=[String(C)]),T0(w.i,"t",C),u.C=0,w=u.j.J,u.h=new l0,u.g=B0(u.j,w?m:null,!u.m),0<u.O&&(u.M=new oR(p(u.Y,u,u.g),u.O)),m=u.U,w=u.g,C=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Zv[0]=M.toString()),M=Zv);for(var V=0;V<M.length;V++){var W=qr(w,M[V],C||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ka(),cR(u.i,u.u,u.A,u.l,u.R,u.m)}Kr.prototype.ca=function(u){u=u.target;const m=this.M;m&&yr(u)==3?m.j():this.Y(u)},Kr.prototype.Y=function(u){try{if(u==this.g)e:{const Tt=yr(this.g);var m=this.g.Ba();const no=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||P0(this.g)))){this.J||Tt!=4||m==7||(m==8||0>=no?ka(3):ka(2)),_f(this);var w=this.g.Z();this.X=w;t:if(d0(this)){var C=P0(this.g);u="";var M=C.length,V=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),Oa(this);var W="";break t}this.h.i=new l.TextDecoder}for(m=0;m<M;m++)this.h.h=!0,u+=this.h.i.decode(C[m],{stream:!(V&&m==M-1)});C.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=w==200,uR(this.i,this.u,this.A,this.l,this.R,Tt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,ct=this.g;if((Ce=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Ce)){var Ee=Ce;break t}}Ee=null}if(w=Ee)Zi(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bf(this,w);else{this.o=!1,this.s=3,Vt(12),ii(this),Oa(this);break e}}if(this.P){w=!0;let Tn;for(;!this.J&&this.C<W.length;)if(Tn=fR(this,W),Tn==xf){Tt==4&&(this.s=4,Vt(14),w=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==c0){this.s=4,Vt(15),Zi(this.i,this.l,W,"[Invalid Chunk]"),w=!1;break}else Zi(this.i,this.l,Tn,null),bf(this,Tn);if(d0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||W.length!=0||this.h.h||(this.s=1,Vt(16),w=!1),this.o=this.o&&w,!w)Zi(this.i,this.l,W,"[Invalid Chunked Response]"),ii(this),Oa(this);else if(0<W.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Cf(Et),Et.M=!0,Vt(11))}}else Zi(this.i,this.l,W,null),bf(this,W);Tt==4&&ii(this),this.o&&!this.J&&(Tt==4?V0(this.j,this):(this.o=!1,Dc(this)))}else RR(this.g),w==400&&0<W.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),ii(this),Oa(this)}}}catch{}finally{}};function d0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fR(u,m){var w=u.C,C=m.indexOf(`
`,w);return C==-1?xf:(w=Number(m.substring(w,C)),isNaN(w)?c0:(C+=1,C+w>m.length?xf:(m=m.slice(C,C+w),u.C=C+w,m)))}Kr.prototype.cancel=function(){this.J=!0,ii(this)};function Dc(u){u.S=Date.now()+u.I,h0(u,u.I)}function h0(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ja(p(u.ba,u),m)}function _f(u){u.B&&(l.clearTimeout(u.B),u.B=null)}Kr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(dR(this.i,this.A),this.L!=2&&(ka(),Vt(17)),ii(this),this.s=2,Oa(this)):h0(this,this.S-u)};function Oa(u){u.j.G==0||u.J||V0(u.j,u)}function ii(u){_f(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,e0(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function bf(u,m){try{var w=u.j;if(w.G!=0&&(w.g==u||Ef(w.h,u))){if(!u.K&&Ef(w.h,u)&&w.G==3){try{var C=w.Da.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)zc(w),$c(w);else break e;Nf(w),Vt(18)}}else w.za=M[1],0<w.za-w.T&&37500>M[2]&&w.F&&w.v==0&&!w.C&&(w.C=ja(p(w.Za,w),6e3));if(1>=m0(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ai(w,11)}else if((u.K||w.g==u)&&zc(w),!y(m))for(M=w.Da.g.parse(m),m=0;m<M.length;m++){let Ee=M[m];if(w.T=Ee[0],Ee=Ee[1],w.G==2)if(Ee[0]=="c"){w.K=Ee[1],w.ia=Ee[2];const Et=Ee[3];Et!=null&&(w.la=Et,w.j.info("VER="+w.la));const Tt=Ee[4];Tt!=null&&(w.Aa=Tt,w.j.info("SVER="+w.Aa));const no=Ee[5];no!=null&&typeof no=="number"&&0<no&&(C=1.5*no,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Tn=u.g;if(Tn){const Wc=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wc){var V=C.h;V.g||Wc.indexOf("spdy")==-1&&Wc.indexOf("quic")==-1&&Wc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Tf(V,V.h),V.h=null))}if(C.D){const Af=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Af&&(C.ya=Af,Pe(C.I,C.D,Af))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var W=u;if(C.qa=$0(C,C.J?C.ia:null,C.W),W.K){g0(C.h,W);var Ce=W,ct=C.L;ct&&(Ce.I=ct),Ce.B&&(_f(Ce),Dc(Ce)),C.g=W}else M0(C);0<w.i.length&&Bc(w)}else Ee[0]!="stop"&&Ee[0]!="close"||ai(w,7);else w.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ai(w,7):If(w):Ee[0]!="noop"&&w.l&&w.l.ta(Ee),w.v=0)}}ka(4)}catch{}}var pR=class{constructor(u,m){this.g=u,this.map=m}};function f0(u){this.l=u||10,l.PerformanceNavigationTiming?(u=l.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function p0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function m0(u){return u.h?1:u.g?u.g.size:0}function Ef(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Tf(u,m){u.g?u.g.add(m):u.h=m}function g0(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}f0.prototype.cancel=function(){if(this.i=y0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function y0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const w of u.g.values())m=m.concat(w.D);return m}return x(u.i)}function mR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var m=[],w=u.length,C=0;C<w;C++)m.push(u[C]);return m}m=[],w=0;for(C in u)m[w++]=u[C];return m}function gR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var m=[];u=u.length;for(var w=0;w<u;w++)m.push(w);return m}m=[],w=0;for(const C in u)m[w++]=C;return m}}}function v0(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var w=gR(u),C=mR(u),M=C.length,V=0;V<M;V++)m.call(void 0,C[V],w&&w[V],u)}var x0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yR(u,m){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var C=u[w].indexOf("="),M=null;if(0<=C){var V=u[w].substring(0,C);M=u[w].substring(C+1)}else V=u[w];m(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function oi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof oi){this.h=u.h,Oc(this,u.j),this.o=u.o,this.g=u.g,Mc(this,u.s),this.l=u.l;var m=u.i,w=new Va;w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w0(this,w),this.m=u.m}else u&&(m=String(u).match(x0))?(this.h=!1,Oc(this,m[1]||"",!0),this.o=Ma(m[2]||""),this.g=Ma(m[3]||"",!0),Mc(this,m[4]),this.l=Ma(m[5]||"",!0),w0(this,m[6]||"",!0),this.m=Ma(m[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}oi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(La(m,_0,!0),":");var w=this.g;return(w||m=="file")&&(u.push("//"),(m=this.o)&&u.push(La(m,_0,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(La(w,w.charAt(0)=="/"?wR:xR,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",La(w,bR)),u.join("")};function gr(u){return new oi(u)}function Oc(u,m,w){u.j=w?Ma(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Mc(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function w0(u,m,w){m instanceof Va?(u.i=m,ER(u.i,u.h)):(w||(m=La(m,_R)),u.i=new Va(m,u.h))}function Pe(u,m,w){u.i.set(m,w)}function Lc(u){return Pe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ma(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function La(u,m,w){return typeof u=="string"?(u=encodeURI(u).replace(m,vR),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _0=/[#\/\?@]/g,xR=/[#\?:]/g,wR=/[#\?]/g,_R=/[#\?@]/g,bR=/#/g;function Va(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Qr(u){u.g||(u.g=new Map,u.h=0,u.i&&yR(u.i,function(m,w){u.add(decodeURIComponent(m.replace(/\+/g," ")),w)}))}t=Va.prototype,t.add=function(u,m){Qr(this),this.i=null,u=eo(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(m),this.h+=1,this};function b0(u,m){Qr(u),m=eo(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function E0(u,m){return Qr(u),m=eo(u,m),u.g.has(m)}t.forEach=function(u,m){Qr(this),this.g.forEach(function(w,C){w.forEach(function(M){u.call(m,M,C,this)},this)},this)},t.na=function(){Qr(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),w=[];for(let C=0;C<m.length;C++){const M=u[C];for(let V=0;V<M.length;V++)w.push(m[C])}return w},t.V=function(u){Qr(this);let m=[];if(typeof u=="string")E0(this,u)&&(m=m.concat(this.g.get(eo(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)m=m.concat(u[w])}return m},t.set=function(u,m){return Qr(this),this.i=null,u=eo(this,u),E0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function T0(u,m,w){b0(u,m),0<w.length&&(u.i=null,u.g.set(eo(u,m),x(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var w=0;w<m.length;w++){var C=m[w];const V=encodeURIComponent(String(C)),W=this.V(C);for(C=0;C<W.length;C++){var M=V;W[C]!==""&&(M+="="+encodeURIComponent(String(W[C]))),u.push(M)}}return this.i=u.join("&")};function eo(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ER(u,m){m&&!u.j&&(Qr(u),u.i=null,u.g.forEach(function(w,C){var M=C.toLowerCase();C!=M&&(b0(this,C),T0(this,M,w))},u)),u.j=m}function TR(u,m){const w=new Da;if(l.Image){const C=new Image;C.onload=_(Yr,w,"TestLoadImage: loaded",!0,m,C),C.onerror=_(Yr,w,"TestLoadImage: error",!1,m,C),C.onabort=_(Yr,w,"TestLoadImage: abort",!1,m,C),C.ontimeout=_(Yr,w,"TestLoadImage: timeout",!1,m,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else m(!1)}function SR(u,m){const w=new Da,C=new AbortController,M=setTimeout(()=>{C.abort(),Yr(w,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:C.signal}).then(V=>{clearTimeout(M),V.ok?Yr(w,"TestPingServer: ok",!0,m):Yr(w,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),Yr(w,"TestPingServer: error",!1,m)})}function Yr(u,m,w,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(w)}catch{}}function IR(){this.g=new lR}function NR(u,m,w){const C=w||"";try{v0(u,function(M,V){let W=M;d(M)&&(W=pf(M)),m.push(C+V+"="+encodeURIComponent(W))})}catch(M){throw m.push(C+"type="+encodeURIComponent("_badmap")),M}}function Vc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Vc,mf),Vc.prototype.g=function(){return new Fc(this.l,this.j)},Vc.prototype.i=function(u){return function(){return u}}({});function Fc(u,m){bt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Fc,bt),t=Fc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ua(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;S0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function S0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fa(this):Ua(this),this.readyState==3&&S0(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Fa(this))},t.Qa=function(u){this.g&&(this.response=u,Fa(this))},t.ga=function(){this.g&&Fa(this)};function Fa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ua(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var w=m.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=m.next();return u.join(`\r
`)};function Ua(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function I0(u){let m="";return O(u,function(w,C){m+=C,m+=":",m+=w,m+=`\r
`}),m}function Sf(u,m,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=I0(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):Pe(u,m,w))}function Be(u){bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Be,bt);var CR=/^https?$/i,AR=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vf.g(),this.v=this.o?t0(this.o):t0(vf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(V){N0(this,V);return}if(u=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)w.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const V of C.keys())w.set(V,C.get(V));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(V=>V.toLowerCase()=="content-type"),M=l.FormData&&u instanceof l.FormData,!(0<=Array.prototype.indexOf.call(AR,m,void 0))||C||M||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of w)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{R0(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){N0(this,V)}};function N0(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,C0(u),Uc(u)}function C0(u){u.A||(u.A=!0,Lt(u,"complete"),Lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Lt(this,"complete"),Lt(this,"abort"),Uc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uc(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?A0(this):this.bb())},t.bb=function(){A0(this)};function A0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||yr(u)!=4||u.Z()!=2)){if(u.u&&yr(u)==4)Xv(u.Ea,0,u);else if(Lt(u,"readystatechange"),yr(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var w;if(!(w=m)){var C;if(C=W===0){var M=String(u.D).match(x0)[1]||null;!M&&l.self&&l.self.location&&(M=l.self.location.protocol.slice(0,-1)),C=!CR.test(M?M.toLowerCase():"")}w=C}if(w)Lt(u,"complete"),Lt(u,"success");else{u.m=6;try{var V=2<yr(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",C0(u)}}finally{Uc(u)}}}}function Uc(u,m){if(u.g){R0(u);const w=u.g,C=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Lt(u,"ready");try{w.onreadystatechange=C}catch{}}}function R0(u){u.I&&(l.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),aR(m)}};function P0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function RR(u){const m={};u=(u.g&&2<=yr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(y(u[C]))continue;var w=A(u[C]);const M=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const V=m[M]||[];m[M]=V,V.push(w)}N(m,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(u,m,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||m}function k0(u){this.Aa=0,this.i=[],this.j=new Da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,u),this.cb=$a("retryDelaySeedMs",1e4,u),this.Wa=$a("forwardChannelMaxRetries",2,u),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new f0(u&&u.concurrentRequestLimit),this.Da=new IR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=k0.prototype,t.la=8,t.G=1,t.connect=function(u,m,w,C){Vt(0),this.W=u,this.H=m||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=$0(this,null,this.W),Bc(this)};function If(u){if(j0(u),u.G==3){var m=u.U++,w=gr(u.I);if(Pe(w,"SID",u.K),Pe(w,"RID",m),Pe(w,"TYPE","terminate"),Ba(u,w),m=new Kr(u,u.j,m),m.L=2,m.v=Lc(gr(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!w&&l.Image&&(new Image().src=m.v,w=!0),w||(m.g=B0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Dc(m)}U0(u)}function $c(u){u.g&&(Cf(u),u.g.cancel(),u.g=null)}function j0(u){$c(u),u.u&&(l.clearTimeout(u.u),u.u=null),zc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&l.clearTimeout(u.s),u.s=null)}function Bc(u){if(!p0(u.h)&&!u.s){u.s=!0;var m=u.Ga;te||Y(),F||(te(),F=!0),H.add(m,u),u.B=0}}function PR(u,m){return m0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ja(p(u.Ga,u,m),F0(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Kr(this,this.j,u);let V=this.o;if(this.S&&(V?(V=T(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var m=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,4096<m){m=w;break e}if(m===4096||w===this.i.length-1){m=w+1;break e}}m=1e3}else m=1e3;m=O0(this,M,m),w=gr(this.I),Pe(w,"RID",u),Pe(w,"CVER",22),this.D&&Pe(w,"X-HTTP-Session-Id",this.D),Ba(this,w),V&&(this.O?m="headers="+encodeURIComponent(String(I0(V)))+"&"+m:this.m&&Sf(w,this.m,V)),Tf(this.h,M),this.Ua&&Pe(w,"TYPE","init"),this.P?(Pe(w,"$req",m),Pe(w,"SID","null"),M.T=!0,wf(M,w,null)):wf(M,w,m),this.G=2}}else this.G==3&&(u?D0(this,u):this.i.length==0||p0(this.h)||D0(this))};function D0(u,m){var w;m?w=m.l:w=u.U++;const C=gr(u.I);Pe(C,"SID",u.K),Pe(C,"RID",w),Pe(C,"AID",u.T),Ba(u,C),u.m&&u.o&&Sf(C,u.m,u.o),w=new Kr(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),m&&(u.i=m.D.concat(u.i)),m=O0(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tf(u.h,w),wf(w,C,m)}function Ba(u,m){u.H&&O(u.H,function(w,C){Pe(m,C,w)}),u.l&&v0({},function(w,C){Pe(m,C,w)})}function O0(u,m,w){w=Math.min(u.i.length,w);var C=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let V=-1;for(;;){const W=["count="+w];V==-1?0<w?(V=M[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Ce=!0;for(let ct=0;ct<w;ct++){let Ee=M[ct].g;const Et=M[ct].map;if(Ee-=V,0>Ee)V=Math.max(0,M[ct].g-100),Ce=!1;else try{NR(Et,W,"req"+Ee+"_")}catch{C&&C(Et)}}if(Ce){C=W.join("&");break e}}}return u=u.i.splice(0,w),m.D=u,C}function M0(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;te||Y(),F||(te(),F=!0),H.add(m,u),u.v=0}}function Nf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ja(p(u.Fa,u),F0(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,L0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ja(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),$c(this),L0(this))};function Cf(u){u.A!=null&&(l.clearTimeout(u.A),u.A=null)}function L0(u){u.g=new Kr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=gr(u.qa);Pe(m,"RID","rpc"),Pe(m,"SID",u.K),Pe(m,"AID",u.T),Pe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Pe(m,"TO",u.ja),Pe(m,"TYPE","xmlhttp"),Ba(u,m),u.m&&u.o&&Sf(m,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Lc(gr(m)),w.m=null,w.P=!0,u0(w,u)}t.Za=function(){this.C!=null&&(this.C=null,$c(this),Nf(this),Vt(19))};function zc(u){u.C!=null&&(l.clearTimeout(u.C),u.C=null)}function V0(u,m){var w=null;if(u.g==m){zc(u),Cf(u),u.g=null;var C=2}else if(Ef(u.h,m))w=m.D,g0(u.h,m),C=1;else return;if(u.G!=0){if(m.o)if(C==1){w=m.m?m.m.length:0,m=Date.now()-m.F;var M=u.B;C=Pc(),Lt(C,new o0(C,w)),Bc(u)}else M0(u);else if(M=m.s,M==3||M==0&&0<m.X||!(C==1&&PR(u,m)||C==2&&Nf(u)))switch(w&&0<w.length&&(m=u.h,m.i=m.i.concat(w)),M){case 1:ai(u,5);break;case 4:ai(u,10);break;case 3:ai(u,6);break;default:ai(u,2)}}}function F0(u,m){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*m}function ai(u,m){if(u.j.info("Error code "+m),m==2){var w=p(u.fb,u),C=u.Xa;const M=!C;C=new oi(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Oc(C,"https"),Lc(C),M?TR(C.toString(),w):SR(C.toString(),w)}else Vt(2);u.G=0,u.l&&u.l.sa(m),U0(u),j0(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function U0(u){if(u.G=0,u.ka=[],u.l){const m=y0(u.h);(m.length!=0||u.i.length!=0)&&(E(u.ka,m),E(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function $0(u,m,w){var C=w instanceof oi?gr(w):new oi(w);if(C.g!="")m&&(C.g=m+"."+C.g),Mc(C,C.s);else{var M=l.location;C=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;var V=new oi(null);C&&Oc(V,C),m&&(V.g=m),M&&Mc(V,M),w&&(V.l=w),C=V}return w=u.D,m=u.ya,w&&m&&Pe(C,w,m),Pe(C,"VER",u.la),Ba(u,C),C}function B0(u,m,w){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Be(new Vc({eb:w})):new Be(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function z0(){}t=z0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hc(){}Hc.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){bt.call(this),this.g=new k0(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!y(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!y(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new to(this)}I(tn,bt),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){If(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=pf(u),u=w);m.i.push(new pR(m.Ya++,u)),m.G==3&&Bc(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,If(this.g),delete this.g,tn.aa.N.call(this)};function H0(u){gf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const w in m){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}I(H0,gf);function W0(){yf.call(this),this.status=1}I(W0,yf);function to(u){this.g=u}I(to,z0),to.prototype.ua=function(){Lt(this.g,"a")},to.prototype.ta=function(u){Lt(this.g,new H0(u))},to.prototype.sa=function(u){Lt(this.g,new W0)},to.prototype.ra=function(){Lt(this.g,"b")},Hc.prototype.createWebChannel=Hc.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,VI=function(){return new Hc},LI=function(){return Pc()},MI=si,Wm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kc.NO_ERROR=0,kc.TIMEOUT=8,kc.HTTP_ERROR=6,Gu=kc,a0.COMPLETE="complete",OI=a0,n0.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",bt.prototype.listen=bt.prototype.K,al=n0,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,DI=Be}).apply(typeof mu<"u"?mu:typeof self<"u"?self:typeof window<"u"?window:{});const h_="@firebase/firestore",f_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new Uy("@firebase/firestore");function lo(){return Mi.logLevel}function G(t,...e){if(Mi.logLevel<=pe.DEBUG){const n=e.map(ev);Mi.debug(`Firestore (${Ea}): ${t}`,...n)}}function zr(t,...e){if(Mi.logLevel<=pe.ERROR){const n=e.map(ev);Mi.error(`Firestore (${Ea}): ${t}`,...n)}}function oa(t,...e){if(Mi.logLevel<=pe.WARN){const n=e.map(ev);Mi.warn(`Firestore (${Ea}): ${t}`,...n)}}function ev(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,FI(t,r,n)}function FI(t,e,n){let r=`FIRESTORE (${Ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zr(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||FI(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class R3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rt.UNAUTHENTICATED))}shutdown(){}}class P3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k3{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new UI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Rt(e)}}class j3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class D3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new j3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new p_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new p_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=M3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Gm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return ue(r,s);{const i=$I(),o=L3(i.encode(m_(t,n)),i.encode(m_(e,n)));return o!==0?o:ue(r,s)}}n+=r>65535?2:1}return ue(t.length,e.length)}function m_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function L3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ue(t[n],e[n]);return ue(t.length,e.length)}function aa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=-62135596800,y_=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*y_);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<g_)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y_}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-g_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new et(0,0))}static max(){return new oe(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__name__";class qn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=qn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ue(e.length,n.length)}static compareSegments(e,n){const r=qn.isNumericId(e),s=qn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?qn.extractNumericId(e).compare(qn.extractNumericId(n)):Gm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class Oe extends qn{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends qn{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v_}static keyField(){return new gt([v_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Oe.fromString(e))}static fromName(e){return new J(Oe.fromString(e).popFirst(5))}static empty(){return new J(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function F3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new Us(s,J.empty(),e)}function U3(t){return new Us(t.readTime,t.key,Jl)}class Us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(oe.min(),J.empty(),Jl)}static max(){return new Us(oe.max(),J.empty(),Jl)}}function $3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==B3)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function H3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=-1;function Vh(t){return t==null}function Ld(t){return t===0&&1/t==-1/0}function W3(t){return typeof t=="number"&&Number.isInteger(t)&&!Ld(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="";function G3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x_(e)),e=q3(t.get(n),e);return x_(e)}function q3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zI:n+="";break;default:n+=i}}return n}function x_(t){return t+zI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gu(this.root,e,this.comparator,!1)}getReverseIterator(){return new gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gu(this.root,e,this.comparator,!0)}}class gu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??dt.RED,this.left=s??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new dt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new __(this.data.getIterator())}getIteratorFrom(e){return new __(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class __{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new on([])}unionWith(e){let n=new tt(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new WI("Invalid base64 string: "+i):i}}(e);return new wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const K3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=K3.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bs(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="server_timestamp",qI="__type__",KI="__previous_value__",QI="__local_write_time__";function nv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qI])===null||n===void 0?void 0:n.stringValue)===GI}function Fh(t){const e=t.mapValue.fields[KI];return nv(e)?Fh(e):e}function Zl(t){const e=$s(t.mapValue.fields[QI].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n,r,s,i,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Vd="(default)";class ec{constructor(e,n){this.projectId=e,this.database=n||Vd}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="__type__",Y3="__max__",yu={mapValue:{}},XI="__vector__",Fd="value";function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nv(t)?4:J3(t)?9007199254740991:X3(t)?10:11:re(28295,{value:t})}function cr(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=$s(s.timestampValue),l=$s(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bs(s.bytesValue).isEqual(Bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return qe(s.geoPointValue.latitude)===qe(i.geoPointValue.latitude)&&qe(s.geoPointValue.longitude)===qe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return qe(s.integerValue)===qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=qe(s.doubleValue),l=qe(i.doubleValue);return o===l?Ld(o)===Ld(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return aa(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(w_(o)!==w_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!cr(o[c],l[c])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function tc(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function la(t,e){if(t===e)return 0;const n=zs(t),r=zs(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=qe(i.integerValue||i.doubleValue),c=qe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return b_(t.timestampValue,e.timestampValue);case 4:return b_(Zl(t),Zl(e));case 5:return Gm(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Bs(i),c=Bs(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=ue(l[d],c[d]);if(h!==0)return h}return ue(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ue(qe(i.latitude),qe(o.latitude));return l!==0?l:ue(qe(i.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return E_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,h;const f=i.fields||{},p=o.fields||{},_=(l=f[Fd])===null||l===void 0?void 0:l.arrayValue,I=(c=p[Fd])===null||c===void 0?void 0:c.arrayValue,x=ue(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:E_(_,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===yu.mapValue&&o===yu.mapValue)return 0;if(i===yu.mapValue)return 1;if(o===yu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Gm(c[f],h[f]);if(p!==0)return p;const _=la(l[c[f]],d[h[f]]);if(_!==0)return _}return ue(c.length,h.length)}(t.mapValue,e.mapValue);default:throw re(23264,{Pe:n})}}function b_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=$s(t),r=$s(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function E_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=la(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function ca(t){return qm(t)}function qm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=$s(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${qm(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function qu(t){switch(zs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fh(t);return e?16+qu(e):16;case 5:return 2*t.stringValue.length;case 6:return Bs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+qu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Js(r.fields,(i,o)=>{s+=i.length+qu(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function T_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Km(t){return!!t&&"integerValue"in t}function rv(t){return!!t&&"arrayValue"in t}function S_(t){return!!t&&"nullValue"in t}function I_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ku(t){return!!t&&"mapValue"in t}function X3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[YI])===null||n===void 0?void 0:n.stringValue)===XI}function Sl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Sl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function J3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Y3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Sl(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ku(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Js(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Yt(Sl(this.value))}}function JI(t){const e=[];return Js(t.fields,(n,r)=>{const s=new gt([n]);if(Ku(r)){const i=JI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,oe.min(),oe.min(),oe.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,s){return new Dt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,oe.min(),oe.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,oe.min(),oe.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.position=e,this.inclusive=n}}function N_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=la(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function C_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n="asc"){this.field=e,this.dir=n}}function Z3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{}class Xe extends ZI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tV(e,n,r):n==="array-contains"?new sV(e,r):n==="in"?new iV(e,r):n==="not-in"?new oV(e,r):n==="array-contains-any"?new aV(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nV(e,r):new rV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(la(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(la(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends ZI{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Bn(e,n)}matches(e){return eN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function eN(t){return t.op==="and"}function tN(t){return eV(t)&&eN(t)}function eV(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function Qm(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(tN(t))return t.filters.map(e=>Qm(e)).join(",");{const e=t.filters.map(n=>Qm(n)).join(",");return`${t.op}(${e})`}}function nN(t,e){return t instanceof Xe?function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&cr(r.value,s.value)}(t,e):t instanceof Bn?function(r,s){return s instanceof Bn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&nN(o,s.filters[l]),!0):!1}(t,e):void re(19439)}function rN(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(rN).join(" ,")+"}"}(t):"Filter"}class tV extends Xe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class nV extends Xe{constructor(e,n){super(e,"in",n),this.keys=sN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rV extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=sN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class sV extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rv(n)&&tc(n.arrayValue,this.value)}}class iV extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class oV extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tc(this.value.arrayValue,n)}}class aV extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function A_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new lV(t,e,n,r,s,i,o)}function sv(t){const e=ae(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.Ie=n}return e.Ie}function iv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!C_(t.startAt,e.startAt)&&C_(t.endAt,e.endAt)}function Ym(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function cV(t,e,n,r,s,i,o,l){return new Ec(t,e,n,r,s,i,o,l)}function ov(t){return new Ec(t)}function R_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iN(t){return t.collectionGroup!==null}function Il(t){const e=ae(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new tt(gt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new $d(i,r))}),n.has(gt.keyField().canonicalString())||e.Ee.push(new $d(gt.keyField(),r))}return e.Ee}function or(t){const e=ae(t);return e.de||(e.de=uV(e,Il(t))),e.de}function uV(t,e){if(t.limitType==="F")return A_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $d(s.field,i)});const n=t.endAt?new Ud(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ud(t.startAt.position,t.startAt.inclusive):null;return A_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xm(t,e){const n=t.filters.concat([e]);return new Ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jm(t,e,n){return new Ec(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return iv(or(t),or(e))&&t.limitType===e.limitType}function oN(t){return`${sv(or(t))}|lt:${t.limitType}`}function co(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rN(s)).join(", ")}]`),Vh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ca(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ca(s)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function $h(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Il(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=N_(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Il(r),s)||r.endAt&&!function(o,l,c){const d=N_(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Il(r),s))}(t,e)}function dV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aN(t){return(e,n)=>{let r=!1;for(const s of Il(t)){const i=hV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function hV(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?la(c,d):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=new $e(J.comparator);function Hr(){return fV}const lN=new $e(J.comparator);function ll(...t){let e=lN;for(const n of t)e=e.insert(n.key,n);return e}function cN(t){let e=lN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return Nl()}function uN(){return Nl()}function Nl(){return new Yi(t=>t.toString(),(t,e)=>t.isEqual(e))}const pV=new $e(J.comparator),mV=new tt(J.comparator);function me(...t){let e=mV;for(const n of t)e=e.add(n);return e}const gV=new tt(ue);function yV(){return gV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function dN(t){return{integerValue:""+t}}function vV(t,e){return W3(e)?dN(e):av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(){this._=void 0}}function xV(t,e,n){return t instanceof Bd?function(s,i){const o={fields:{[qI]:{stringValue:GI},[QI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nv(i)&&(i=Fh(i)),i&&(o.fields[KI]=i),{mapValue:o}}(n,e):t instanceof nc?fN(t,e):t instanceof rc?pN(t,e):function(s,i){const o=hN(s,i),l=P_(o)+P_(s.Re);return Km(o)&&Km(s.Re)?dN(l):av(s.serializer,l)}(t,e)}function wV(t,e,n){return t instanceof nc?fN(t,e):t instanceof rc?pN(t,e):n}function hN(t,e){return t instanceof zd?function(r){return Km(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Bd extends Bh{}class nc extends Bh{constructor(e){super(),this.elements=e}}function fN(t,e){const n=mN(e);for(const r of t.elements)n.some(s=>cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class rc extends Bh{constructor(e){super(),this.elements=e}}function pN(t,e){let n=mN(e);for(const r of t.elements)n=n.filter(s=>!cr(s,r));return{arrayValue:{values:n}}}class zd extends Bh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function P_(t){return qe(t.integerValue||t.doubleValue)}function mN(t){return rv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _V(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nc&&s instanceof nc||r instanceof rc&&s instanceof rc?aa(r.elements,s.elements,cr):r instanceof zd&&s instanceof zd?cr(r.Re,s.Re):r instanceof Bd&&s instanceof Bd}(t.transform,e.transform)}class bV{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zh{}function gN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lv(t.key,xn.none()):new Tc(t.key,t.data,xn.none());{const n=t.data,r=Yt.empty();let s=new tt(gt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zs(t.key,r,new on(s.toArray()),xn.none())}}function EV(t,e,n){t instanceof Tc?function(s,i,o){const l=s.value.clone(),c=j_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Zs?function(s,i,o){if(!Qu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=j_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(yN(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cl(t,e,n,r){return t instanceof Tc?function(i,o,l,c){if(!Qu(i.precondition,o))return l;const d=i.value.clone(),h=D_(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zs?function(i,o,l,c){if(!Qu(i.precondition,o))return l;const d=D_(i.fieldTransforms,c,o),h=o.data;return h.setAll(yN(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return Qu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function TV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hN(r.transform,s||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,i))}return n||null}function k_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&aa(r,s,(i,o)=>_V(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends zh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zs extends zh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function j_(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,wV(o,l,n[s]))}return r}function D_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xV(i,o,e))}return r}class lv extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SV extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&EV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=gN(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&aa(this.mutations,e.mutations,(n,r)=>k_(n,r))&&aa(this.baseMutations,e.baseMutations,(n,r)=>k_(n,r))}}class cv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return pV}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NV=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ge;function AV(t){switch(t){case $.OK:return re(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function vN(t){if(t===void 0)return zr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Qe.OK:return $.OK;case Qe.CANCELLED:return $.CANCELLED;case Qe.UNKNOWN:return $.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return $.INTERNAL;case Qe.UNAVAILABLE:return $.UNAVAILABLE;case Qe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Qe.NOT_FOUND:return $.NOT_FOUND;case Qe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Qe.ABORTED:return $.ABORTED;case Qe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Qe.DATA_LOSS:return $.DATA_LOSS;default:return re(39323,{code:t})}}(ge=Qe||(Qe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new ks([4294967295,4294967295],0);function O_(t){const e=$I().encode(t),n=new jI;return n.update(e),new Uint8Array(n.digest())}function M_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ks([n,r],0),new ks([s,i],0)]}class uv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cl(`Invalid padding: ${n}`);if(r<0)throw new cl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=ks.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(ks.fromNumber(r)));return s.compare(RV)===1&&(s=new ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=O_(e),[r,s]=M_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new uv(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const n=O_(e),[r,s]=M_(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hh(oe.min(),s,new $e(ue),Hr(),me())}}class Sc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sc(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class xN{constructor(e,n){this.targetId=e,this.Ce=n}}class wN{constructor(e,n,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class L_{constructor(){this.Fe=0,this.Me=V_(),this.xe=wt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=me(),n=me(),r=me();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new Sc(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=V_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Se(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class PV{constructor(e){this.ze=e,this.je=new Map,this.He=Hr(),this.Je=vu(),this.Ye=vu(),this.Ze=new $e(ue)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(Ym(i))if(r===0){const o=new J(i.path);this.tt(n,o,Dt.newNoDocument(o,oe.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Bs(r).toUint8Array()}catch(c){if(c instanceof WI)return oa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new uv(o,s,i)}catch(c){return oa(c instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Ym(l.target)){const c=new J(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Dt.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=me();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this._t(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Hh(e,n,this.Ze,this.He,r);return this.He=Hr(),this.Je=vu(),this.Ye=vu(),this.Ze=new $e(ue),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new L_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new tt(ue),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new tt(ue),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new L_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function vu(){return new $e(J.comparator)}function V_(){return new $e(J.comparator)}const kV={asc:"ASCENDING",desc:"DESCENDING"},jV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DV={and:"AND",or:"OR"};class OV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zm(t,e){return t.useProto3Json||Vh(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _N(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MV(t,e){return Hd(t,e.toTimestamp())}function ar(t){return Se(!!t,49232),oe.fromTimestamp(function(n){const r=$s(n);return new et(r.seconds,r.nanos)}(t))}function dv(t,e){return eg(t,e).canonicalString()}function eg(t,e){const n=function(s){return new Oe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bN(t){const e=Oe.fromString(t);return Se(NN(e),10190,{key:e.toString()}),e}function tg(t,e){return dv(t.databaseId,e.path)}function xp(t,e){const n=bN(e);if(n.get(1)!==t.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(TN(n))}function EN(t,e){return dv(t.databaseId,e)}function LV(t){const e=bN(t);return e.length===4?Oe.emptyPath():TN(e)}function ng(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function TN(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function F_(t,e,n){return{name:tg(t,e),fields:n.value.mapValue.fields}}function VV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:re(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Se(h===void 0||typeof h=="string",58123),wt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?$.UNKNOWN:vN(d.code);return new K(h,d.message||"")}(o);n=new wN(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xp(t,r.document.name),i=ar(r.document.updateTime),o=r.document.createTime?ar(r.document.createTime):oe.min(),l=new Yt({mapValue:{fields:r.document.fields}}),c=Dt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Yu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xp(t,r.document),i=r.readTime?ar(r.readTime):oe.min(),o=Dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Yu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xp(t,r.document),i=r.removedTargetIds||[];n=new Yu([],i,s,null)}else{if(!("filter"in e))return re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new CV(s,i),l=r.targetId;n=new xN(l,o)}}return n}function FV(t,e){let n;if(e instanceof Tc)n={update:F_(t,e.key,e.value)};else if(e instanceof lv)n={delete:tg(t,e.key)};else if(e instanceof Zs)n={update:F_(t,e.key,e.data),updateMask:KV(e.fieldMask)};else{if(!(e instanceof SV))return re(16599,{ft:e.type});n={verify:tg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zd)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:MV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function UV(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ar(s.updateTime):ar(i);return o.isEqual(oe.min())&&(o=ar(i)),new bV(o,s.transformResults||[])}(n,e))):[]}function $V(t,e){return{documents:[EN(t,e.path)]}}function BV(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=EN(t,s);const i=function(d){if(d.length!==0)return IN(Bn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:uo(p.field),direction:WV(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Zm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{gt:n,parent:s}}function zV(t){let e=LV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=SN(f);return p instanceof Bn&&tN(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(I){return new $d(ho(I.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Vh(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,_=f.values||[];return new Ud(_,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,_=f.values||[];return new Ud(_,p)}(n.endAt)),cV(e,s,o,i,l,"F",c,d)}function HV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ho(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ho(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ho(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ho(n.unaryFilter.field);return Xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(ho(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(r=>SN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function WV(t){return kV[t]}function GV(t){return jV[t]}function qV(t){return DV[t]}function uo(t){return{fieldPath:t.canonicalString()}}function ho(t){return gt.fromServerFormat(t.fieldPath)}function IN(t){return t instanceof Xe?function(n){if(n.op==="=="){if(I_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(S_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(S_(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:GV(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const r=n.getFilters().map(s=>IN(s));return r.length===1?r[0]:{compositeFilter:{op:qV(n.op),filters:r}}}(t):re(54877,{filter:t})}function KV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,s,i=oe.min(),o=oe.min(),l=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.wt=e}}function YV(t){const e=zV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.Cn=new JV}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Us.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class JV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(Oe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CN=41943040;class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(CN,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ua(0)}static lr(){return new ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",ZV=1048576;function B_([t,e],[n,r]){const s=ue(t,n);return s===0?ue(e,r):s}class e5{constructor(e){this.Er=e,this.buffer=new tt(B_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();B_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class t5{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){G($_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sa(n)?G($_,"Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.mr(3e5)})}}class n5{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Lh.le);const r=new e5(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(U_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),lo()<=pe.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function r5(t,e){return new n5(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.changes=new Yi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Cl(r.mutation,s,on.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ll();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Hr();const o=Nl(),l=function(){return Nl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Zs)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Cl(h.mutation,d,h.mutation.getFieldMask(),et.now())):o.set(d.key,on.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var f;return l.set(d,new i5(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Nl();let s=new $e((o,l)=>o-l),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||on.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||me()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=uN();h.forEach(p=>{if(!i.has(p)){const _=gN(n.get(p),r.get(p));_!==null&&f.set(p,_),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(mi());let l=Jl,c=i;return o.next(d=>U.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,me())).next(h=>({batchId:l,changes:cN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=ll();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ll();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(f,p){return new Ec(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))});let l=ll();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Cl(h.mutation,d,on.empty(),et.now()),$h(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return U.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ar(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:YV(s.bundledQuery),readTime:ar(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(){this.overlays=new $e(J.comparator),this.Qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=mi(),i=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new $e((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=mi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=mi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return U.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new NV(n,r));let i=this.Qr.get(n);i===void 0&&(i=me(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.$r=new tt(st.Ur),this.Kr=new tt(st.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new st(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new st(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new J(new Oe([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new J(new Oe([])),r=new st(n,e),s=new st(n,e+1);let i=me();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new st(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return J.comparator(e.key,n.key)||ue(e.Zr,n.Zr)}static Wr(e,n){return ue(e.Zr,n.Zr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new tt(st.Ur)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IV(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new st(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?tv:this.nr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ue);return n.forEach(s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),U.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new st(new J(i),0);let l=new tt(ue);return this.Xr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Zr)),!0)},o),U.resolve(this.ni(l))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return U.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new st(n,0),s=this.Xr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e){this.ii=e,this.docs=function(){return new $e(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let r=Hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hr();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||$3(U3(h),r)<=0||(s.has(h.key)||$h(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}si(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new h5(this)}getSize(e){return U.resolve(this.size)}}class h5 extends s5{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.persistence=e,this.oi=new Yi(n=>sv(n),iv),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this._i=0,this.ai=new hv,this.targetCount=0,this.ui=ua.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),U.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ua(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Tr(n),U.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.ci={},this.overlays={},this.li=new Lh(0),this.hi=!1,this.hi=!0,this.Pi=new c5,this.referenceDelegate=e(this),this.Ti=new f5(this),this.indexManager=new XV,this.remoteDocumentCache=function(s){return new d5(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new QV(n),this.Ei=new a5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new l5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new u5(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new p5(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return U.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class p5 extends z3{constructor(e){super(),this.currentSequenceNumber=e}}class fv{constructor(e){this.persistence=e,this.Vi=new hv,this.mi=null}static fi(e){return new fv(e)}get gi(){if(this.mi)return this.mi;throw re(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,r=>{const s=J.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return U.or([()=>U.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Wd{constructor(e,n){this.persistence=e,this.yi=new Yi(r=>G3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=r5(this,n)}static fi(e,n){return new Wd(e,n)}di(){}Ai(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return U.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),U.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qu(e.data.value)),n}Dr(e,n,r){return U.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return QM()?8:H3(Mt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new m5;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,n,o,l.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(lo()<=pe.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(lo()<=pe.DEBUG&&G("QueryEngine","Query:",co(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(lo()<=pe.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):U.resolve())}ws(e,n){if(R_(n))return U.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jm(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.vs(n,l);return this.Cs(n,d,o,c.readTime)?this.ws(e,Jm(n,null,"F")):this.Fs(e,d,n,c)}))})))}bs(e,n,r,s){return R_(n)||s.isEqual(oe.min())?U.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(lo()<=pe.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),co(n)),this.Fs(e,o,n,F3(s,Jl)).next(l=>l))})}vs(e,n){let r=new tt(aN(e));return n.forEach((s,i)=>{$h(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return lo()<=pe.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",co(n)),this.ys.getDocumentsMatchingQuery(e,n,Us.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="LocalStore",y5=3e8;class v5{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new $e(ue),this.Os=new Yi(i=>sv(i),iv),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o5(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function x5(t,e,n,r){return new v5(t,e,n,r)}async function RN(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=me();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function w5(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,p=f.keys();let _=U.resolve();return p.forEach(I=>{_=_.next(()=>h.getEntry(c,I)).next(x=>{const E=d.docVersions.get(I);Se(E!==null,48541),x.version.compareTo(E)<0&&(f.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=me();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function PN(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function _5(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let _=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(wt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(f,_),function(x,E,v){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=y5?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,_,h)&&l.push(n.Ti.updateTargetData(i,_))});let c=Hr(),d=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(b5(i,o,e.documentUpdates).next(h=>{c=h.qs,d=h.Qs})),!r.isEqual(oe.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.xs=s,i))}function b5(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):G(mv,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function E5(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T5(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new xs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function rg(t,e,n){const r=ae(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Sa(o))throw o;G(mv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function z_(t,e,n){const r=ae(t);let s=oe.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=ae(c),p=f.Os.get(h);return p!==void 0?U.resolve(f.xs.get(p)):f.Ti.getTargetData(d,h)}(r,o,or(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:me())).next(l=>(S5(r,dV(e),l),{documents:l,$s:i})))}function S5(t,e,n){let r=t.Ns.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class H_{constructor(){this.activeTargetIds=yV()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I5{constructor(){this.xo=new H_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new H_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="ConnectivityMonitor";class G_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){G(W_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){G(W_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function sg(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",C5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A5{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Vd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=sg(),l=this.jo(e,n.toUriEncodedString());G(wp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:d}=new URL(l),h=Ki(d);return this.Jo(e,l,c,r,h).then(f=>(G(wp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw oa(wp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ea}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=C5[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class P5 extends A5{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=sg();return new Promise((l,c)=>{const d=new DI;d.setWithCredentials(!0),d.listenOnce(OI.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gu.NO_ERROR:const f=d.getResponseJson();G(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Gu.TIMEOUT:G(Nt,`RPC '${e}' ${o} timed out`),c(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const p=d.getStatus();if(G(Nt,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const x=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(y)>=0?y:$.UNKNOWN}(I.status);c(new K(x,I.message))}else c(new K($.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new K($.UNAVAILABLE,"Connection failed."));break;default:re(9055,{h_:e,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{G(Nt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);G(Nt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}I_(e,n,r){const s=sg(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VI(),l=LI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");G(Nt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.E_(f);let p=!1,_=!1;const I=new R5({Zo:E=>{_?G(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(G(Nt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),G(Nt,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},Xo:()=>f.close()}),x=(E,v,y)=>{E.listen(v,b=>{try{y(b)}catch(S){setTimeout(()=>{throw S},0)}})};return x(f,al.EventType.OPEN,()=>{_||(G(Nt,`RPC '${e}' stream ${s} transport opened.`),I.__())}),x(f,al.EventType.CLOSE,()=>{_||(_=!0,G(Nt,`RPC '${e}' stream ${s} transport closed`),I.u_(),this.d_(f))}),x(f,al.EventType.ERROR,E=>{_||(_=!0,oa(Nt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),I.u_(new K($.UNAVAILABLE,"The operation could not be completed")))}),x(f,al.EventType.MESSAGE,E=>{var v;if(!_){const y=E.data[0];Se(!!y,16349);const b=y,S=(b==null?void 0:b.error)||((v=b[0])===null||v===void 0?void 0:v.error);if(S){G(Nt,`RPC '${e}' stream ${s} received error:`,S);const j=S.status;let O=function(R){const P=Qe[R];if(P!==void 0)return vN(P)}(j),N=S.message;O===void 0&&(O=$.INTERNAL,N="Unknown error status: "+j+" with message "+S.message),_=!0,I.u_(new K(O,N)),f.close()}else G(Nt,`RPC '${e}' stream ${s} received:`,y),I.c_(y)}}),x(l,MI.STAT_EVENT,E=>{E.stat===Wm.PROXY?G(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Wm.NOPROXY&&G(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return new OV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="PersistentStream";class jN{constructor(e,n,r,s,i,o,l,c){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new kN(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(zr(n.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new K($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return G(q_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(G(q_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k5 extends jN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=VV(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?ar(o.readTime):oe.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=ng(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ym(c)?{documents:$V(i,c)}:{query:BV(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=_N(i,o.resumeToken);const d=Zm(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){l.readTime=Hd(i,o.snapshotVersion.toTimestamp());const d=Zm(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=HV(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=ng(this.serializer),n.removeTarget=e,this.Q_(n)}}class j5 extends jN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=UV(e.writeResults,e.commitTime),r=ar(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=ng(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>FV(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{}class O5 extends D5{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,eg(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K($.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,eg(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K($.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class M5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(zr(n),this.ua=!1):G("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="RemoteStore";class L5{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Xi(this)&&(G(Li,"Restarting streams for network reachability change."),await async function(c){const d=ae(c);d.da.add(4),await Ic(d),d.Va.set("Unknown"),d.da.delete(4),await Gh(d)}(this))})}),this.Va=new M5(r,s)}}async function Gh(t){if(Xi(t))for(const e of t.Aa)await e(!0)}async function Ic(t){for(const e of t.Aa)await e(!1)}function DN(t,e){const n=ae(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),xv(n)?vv(n):Ia(n).N_()&&yv(n,e))}function gv(t,e){const n=ae(t),r=Ia(n);n.Ea.delete(e),r.N_()&&ON(n,e),n.Ea.size===0&&(r.N_()?r.k_():Xi(n)&&n.Va.set("Unknown"))}function yv(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).Z_(e)}function ON(t,e){t.ma.Ke(e),Ia(t).X_(e)}function vv(t){t.ma=new PV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.Va.ca()}function xv(t){return Xi(t)&&!Ia(t).O_()&&t.Ea.size>0}function Xi(t){return ae(t).da.size===0}function MN(t){t.ma=void 0}async function V5(t){t.Va.set("Online")}async function F5(t){t.Ea.forEach((e,n)=>{yv(t,e)})}async function U5(t,e){MN(t),xv(t)?(t.Va.Pa(e),vv(t)):t.Va.set("Unknown")}async function $5(t,e,n){if(t.Va.set("Online"),e instanceof wN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(t,e)}catch(r){G(Li,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gd(t,r)}else if(e instanceof Yu?t.ma.Xe(e):e instanceof xN?t.ma.ot(e):t.ma.nt(e),!n.isEqual(oe.min()))try{const r=await PN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ea.get(d);h&&i.Ea.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ea.get(c);if(!h)return;i.Ea.set(c,h.withResumeToken(wt.EMPTY_BYTE_STRING,h.snapshotVersion)),ON(i,c);const f=new xs(h.target,c,d,h.sequenceNumber);yv(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G(Li,"Failed to raise snapshot:",r),await Gd(t,r)}}async function Gd(t,e,n){if(!Sa(e))throw e;t.da.add(1),await Ic(t),t.Va.set("Offline"),n||(n=()=>PN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Li,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Gh(t)})}function LN(t,e){return e().catch(n=>Gd(t,n,e))}async function qh(t){const e=ae(t),n=Hs(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:tv;for(;B5(e);)try{const s=await E5(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,z5(e,s)}catch(s){await Gd(e,s)}VN(e)&&FN(e)}function B5(t){return Xi(t)&&t.Ia.length<10}function z5(t,e){t.Ia.push(e);const n=Hs(t);n.N_()&&n.ea&&n.ta(e.mutations)}function VN(t){return Xi(t)&&!Hs(t).O_()&&t.Ia.length>0}function FN(t){Hs(t).start()}async function H5(t){Hs(t).ia()}async function W5(t){const e=Hs(t);for(const n of t.Ia)e.ta(n.mutations)}async function G5(t,e,n){const r=t.Ia.shift(),s=cv.from(r,e,n);await LN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qh(t)}async function q5(t,e){e&&Hs(t).ea&&await async function(r,s){if(function(o){return AV(o)&&o!==$.ABORTED}(s.code)){const i=r.Ia.shift();Hs(r).L_(),await LN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qh(r)}}(t,e),VN(t)&&FN(t)}async function K_(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),G(Li,"RemoteStore received new credentials");const r=Xi(n);n.da.add(3),await Ic(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Gh(n)}async function K5(t,e){const n=ae(t);e?(n.da.delete(2),await Gh(n)):e||(n.da.add(2),await Ic(n),n.Va.set("Unknown"))}function Ia(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.oa(),new k5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:V5.bind(null,t),n_:F5.bind(null,t),i_:U5.bind(null,t),Y_:$5.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),xv(t)?vv(t):t.Va.set("Unknown")):(await t.fa.stop(),MN(t))})),t.fa}function Hs(t){return t.ga||(t.ga=function(n,r,s){const i=ae(n);return i.oa(),new j5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:H5.bind(null,t),i_:q5.bind(null,t),na:W5.bind(null,t),ra:G5.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await qh(t)):(await t.ga.stop(),t.Ia.length>0&&(G(Li,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new wv(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _v(t,e){if(zr("AsyncQueue",`${e}: ${t}`),Sa(t))return new K($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=ll(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.pa=new $e(J.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):re(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class da{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new da(e,n,Vo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Y5{constructor(){this.queries=Y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=Y_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function Y_(){return new Yi(t=>oN(t),Uh)}async function UN(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new Q5,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=_v(o,`Initialization of query '${co(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&bv(n)}async function $N(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function X5(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&bv(n)}function J5(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function bv(t){t.Ca.forEach(e=>{e.next()})}var ig,X_;(X_=ig||(ig={})).xa="default",X_.Cache="cache";class BN{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.key=e}}class HN{constructor(e){this.key=e}}class Z5{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=me(),this.mutatedKeys=me(),this.Za=aN(e),this.Xa=new Vo(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new Q_,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),_=$h(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let E=!1;p&&_?p.data.isEqual(_.data)?I!==x&&(r.track({type:3,doc:_}),E=!0):this.ru(p,_)||(r.track({type:2,doc:_}),E=!0,(c&&this.Za(_,c)>0||d&&this.Za(_,d)<0)&&(l=!0)):!p&&_?(r.track({type:0,doc:_}),E=!0):p&&!_&&(r.track({type:1,doc:p}),E=!0,(c||d)&&(l=!0)),E&&(_?(o=o.add(_),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,f)=>function(_,I){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Vt:E})}};return x(_)-x(I)}(h.type,f.type)||this.Za(h.doc,f.doc)),this.iu(r),s=s!=null&&s;const l=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Ja;return this.Ja=c,o.length!==0||d?{snapshot:new da(this.query,e.Xa,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new Q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=me(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new HN(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new zN(r))}),n}au(e){this.Ha=e.$s,this.Ya=me();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return da.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ev="SyncEngine";class eF{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tF{constructor(e){this.key=e,this.cu=!1}}class nF{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Yi(l=>oN(l),Uh),this.Pu=new Map,this.Tu=new Set,this.Iu=new $e(J.comparator),this.Eu=new Map,this.du=new hv,this.Au={},this.Ru=new Map,this.Vu=ua.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function rF(t,e,n=!0){const r=YN(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await WN(r,e,n,!0),s}async function sF(t,e){const n=YN(t);await WN(n,e,!0,!1)}async function WN(t,e,n,r){const s=await T5(t.localStore,or(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await iF(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&DN(t.remoteStore,s),l}async function iF(t,e,n,r,s){t.fu=(f,p,_)=>async function(x,E,v,y){let b=E.view.tu(v);b.Cs&&(b=await z_(x.localStore,E.query,!1).then(({documents:N})=>E.view.tu(N,b)));const S=y&&y.targetChanges.get(E.targetId),j=y&&y.targetMismatches.get(E.targetId)!=null,O=E.view.applyChanges(b,x.isPrimaryClient,S,j);return Z_(x,E.targetId,O.ou),O.snapshot}(t,f,p,_);const i=await z_(t.localStore,e,!0),o=new Z5(e,i.$s),l=o.tu(i.documents),c=Sc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Z_(t,n,d.ou);const h=new eF(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),d.snapshot}async function oF(t,e,n){const r=ae(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Uh(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gv(r.remoteStore,s.targetId),og(r,s.targetId)}).catch(Ta)):(og(r,s.targetId),await rg(r.localStore,s.targetId,!0))}async function aF(t,e){const n=ae(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gv(n.remoteStore,r.targetId))}async function lF(t,e,n){const r=mF(t);try{const s=await function(o,l){const c=ae(o),d=et.now(),h=l.reduce((_,I)=>_.add(I.key),me());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Hr(),x=me();return c.Bs.getEntries(_,h).next(E=>{I=E,I.forEach((v,y)=>{y.isValidDocument()||(x=x.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(E=>{f=E;const v=[];for(const y of l){const b=TV(y,f.get(y.key).overlayedDocument);b!=null&&v.push(new Zs(y.key,b,JI(b.value.mapValue),xn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,v,l)}).next(E=>{p=E;const v=E.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(_,E.batchId,v)})}).then(()=>({batchId:p.batchId,changes:cN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Au[o.currentUser.toKey()];d||(d=new $e(ue)),d=d.insert(l,c),o.Au[o.currentUser.toKey()]=d}(r,s.batchId,n),await Nc(r,s.changes),await qh(r.remoteStore)}catch(s){const i=_v(s,"Failed to persist write");n.reject(i)}}async function GN(t,e){const n=ae(t);try{const r=await _5(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?Se(o.cu,14607):s.removedDocuments.size>0&&(Se(o.cu,42227),o.cu=!1))}),await Nc(n,r,e)}catch(r){await Ta(r)}}function J_(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=ae(o);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.Fa(l)&&(d=!0)}),d&&bv(c)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cF(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new $e(J.comparator);o=o.insert(i,Dt.newNoDocument(i,oe.min()));const l=me().add(i),c=new Hh(oe.min(),new Map,new $e(ue),o,l);await GN(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(e),Tv(r)}else await rg(r.localStore,e,!1).then(()=>og(r,e,n)).catch(Ta)}async function uF(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await w5(n.localStore,e);KN(n,r,null),qN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(n,s)}catch(s){await Ta(s)}}async function dF(t,e,n){const r=ae(t);try{const s=await function(o,l){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Se(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);KN(r,e,n),qN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nc(r,s)}catch(s){await Ta(s)}}function qN(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function KN(t,e,n){const r=ae(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function og(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||QN(t,r)})}function QN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(gv(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),Tv(t))}function Z_(t,e,n){for(const r of n)r instanceof zN?(t.du.addReference(r.key,e),hF(t,r)):r instanceof HN?(G(Ev,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||QN(t,r.key)):re(19791,{pu:r})}function hF(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(G(Ev,"New document in limbo: "+n),t.Tu.add(r),Tv(t))}function Tv(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new J(Oe.fromString(e)),r=t.Vu.next();t.Eu.set(r,new tF(n)),t.Iu=t.Iu.insert(n,r),DN(t.remoteStore,new xs(or(ov(n.path)),r,"TargetPurposeLimboResolution",Lh.le))}}async function Nc(t,e,n){const r=ae(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{o.push(r.fu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=pv.Rs(c.targetId,d);i.push(f)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(c,d){const h=ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,p=>U.forEach(p.ds,_=>h.persistence.referenceDelegate.addReference(f,p.targetId,_)).next(()=>U.forEach(p.As,_=>h.persistence.referenceDelegate.removeReference(f,p.targetId,_)))))}catch(f){if(!Sa(f))throw f;G(mv,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const _=h.xs.get(p),I=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(I);h.xs=h.xs.insert(p,x)}}}(r.localStore,i))}async function fF(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){G(Ev,"User change. New user:",e.toKey());const r=await RN(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new K($.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(n,r.ks)}}function pF(t,e){const n=ae(t),r=n.Eu.get(e);if(r&&r.cu)return me().add(r.key);{let s=me();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const l=n.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function YN(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cF.bind(null,e),e.lu.Y_=X5.bind(null,e.eventManager),e.lu.gu=J5.bind(null,e.eventManager),e}function mF(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dF.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return x5(this.persistence,new g5,e.initialUser,this.serializer)}Su(e){return new AN(fv.fi,this.serializer)}bu(e){return new I5}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class gF extends qd{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Se(this.persistence.referenceDelegate instanceof Wd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new t5(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new AN(r=>Wd.fi(r,n),this.serializer)}}class ag{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fF.bind(null,this.syncEngine),await K5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y5}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),r=function(i){return new P5(i)}(e.databaseInfo);return function(i,o,l,c){return new O5(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new L5(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return G_.C()?new G_:new N5}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,h){const f=new nF(s,i,o,l,c,d);return h&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);G(Li,"RemoteStore shutting down."),i.da.add(5),await Ic(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class yF{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Rt.UNAUTHENTICATED,this.clientId=BI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(Ws,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(Ws,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_v(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bp(t,e){t.asyncQueue.verifyOperationInProgress(),G(Ws,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await RN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vF(t);G(Ws,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>K_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>K_(e.remoteStore,s)),t._onlineComponents=e}async function vF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Ws,"Using user provided OfflineComponentProvider");try{await bp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await bp(t,new qd)}}else G(Ws,"Using default OfflineComponentProvider"),await bp(t,new gF(void 0));return t._offlineComponents}async function JN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Ws,"Using user provided OnlineComponentProvider"),await eb(t,t._uninitializedComponentsProvider._online)):(G(Ws,"Using default OnlineComponentProvider"),await eb(t,new ag))),t._onlineComponents}function xF(t){return JN(t).then(e=>e.syncEngine)}async function ZN(t){const e=await JN(t),n=e.eventManager;return n.onListen=rF.bind(null,e.syncEngine),n.onUnlisten=oF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aF.bind(null,e.syncEngine),n}function wF(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new XN({next:p=>{h.xu(),o.enqueueAndForget(()=>$N(i,f));const _=p.docs.has(l);!_&&p.fromCache?d.reject(new K($.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&c&&c.source==="server"?d.reject(new K($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new BN(ov(l.path),h,{includeMetadataChanges:!0,Qa:!0});return UN(i,f)}(await ZN(t),t.asyncQueue,e,n,r)),r.promise}function _F(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new XN({next:p=>{h.xu(),o.enqueueAndForget(()=>$N(i,f)),p.fromCache&&c.source==="server"?d.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new BN(l,h,{includeMetadataChanges:!0,Qa:!0});return UN(i,f)}(await ZN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e,n){if(!n)throw new K($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bF(t,e,n,r){if(e===!0&&r===!0)throw new K($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nb(t){if(!J.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rb(t){if(J.isDocumentKey(t))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(t);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firestore.googleapis.com",sb=!0;class ib{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nC,this.ssl=sb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:sb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZV)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ib({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ib(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R3;switch(r.type){case"firstParty":return new D3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tb.get(n);r&&(G("ComponentProvider","Removing Datastore"),tb.delete(n),r.terminate())}(this),Promise.resolve()}}function EF(t,e,n,r={}){var s;t=zn(t,Qh);const i=Ki(e),o=t._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Vy(`https://${c}`),Fy("Firestore",!0)),o.host!==nC&&o.host!==c&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!ki(d,l)&&(t._setSettings(d),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Rt.MOCK_USER;else{h=HS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Rt(p)}t._authCredentials=new P3(new UI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class js extends Na{constructor(e,n,r){super(e,n,ov(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new J(e))}withConverter(e){return new js(this.firestore,e,this._path)}}function Sv(t,e,...n){if(t=nt(t),tC("collection","path",e),t instanceof Qh){const r=Oe.fromString(e,...n);return rb(r),new js(t,null,r)}{if(!(t instanceof zt||t instanceof js))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return rb(r),new js(t.firestore,null,r)}}function Ca(t,e,...n){if(t=nt(t),arguments.length===1&&(e=BI.newId()),tC("doc","path",e),t instanceof Qh){const r=Oe.fromString(e,...n);return nb(r),new zt(t,null,new J(r))}{if(!(t instanceof zt||t instanceof js))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return nb(r),new zt(t.firestore,t instanceof js?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="AsyncQueue";class ab{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new kN(this,"async_queue_retry"),this.rc=()=>{const r=_p();r&&G(ob,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=_p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=_p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new jr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Sa(e))throw e;G(ob,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,zr("INTERNAL UNHANDLED ERROR: ",lb(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=wv.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&re(47125,{cc:lb(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function lb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ji extends Qh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ab,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ab(e),this._firestoreClient=void 0,await e}}}function rC(t,e){const n=typeof t=="object"?t:zy(),r=typeof t=="string"?t:Vd,s=kh(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=$S("firestore");i&&EF(s,...i)}return s}function Iv(t){if(t._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TF(t),t._firestoreClient}function TF(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,h){return new Q3(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yF(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ha(wt.fromBase64String(e))}catch(n){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ha(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=/^__.*__$/;class IF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class sC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ic:t})}}class Rv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Rv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Kd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(iC(this.Ic)&&SF.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class NF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wh(e)}bc(e,n,r,s=!1){return new Rv({Ic:e,methodName:n,wc:r,path:gt.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(t){const e=t._freezeSettings(),n=Wh(t._databaseId);return new NF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oC(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);Pv("Data must be an object, but it was:",o,r);const l=aC(r,o);let c,d;if(i.merge)c=new on(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=lg(e,f,n);if(!o.contains(p))throw new K($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);cC(h,p)||h.push(p)}c=new on(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new IF(new Yt(l),c,d)}class Jh extends Nv{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function CF(t,e,n,r){const s=t.bc(1,e,n);Pv("Data must be an object, but it was:",s,r);const i=[],o=Yt.empty();Js(r,(c,d)=>{const h=kv(e,c,n);d=nt(d);const f=s.mc(h);if(d instanceof Jh)i.push(h);else{const p=Cc(d,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new on(i);return new sC(o,l,s.fieldTransforms)}function AF(t,e,n,r,s,i){const o=t.bc(1,e,n),l=[lg(e,r,n)],c=[s];if(i.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(lg(e,i[p])),c.push(i[p+1]);const d=[],h=Yt.empty();for(let p=l.length-1;p>=0;--p)if(!cC(d,l[p])){const _=l[p];let I=c[p];I=nt(I);const x=o.mc(_);if(I instanceof Jh)d.push(_);else{const E=Cc(I,x);E!=null&&(d.push(_),h.set(_,E))}}const f=new on(d);return new sC(h,f,o.fieldTransforms)}function RF(t,e,n,r=!1){return Cc(n,t.bc(r?4:3,e))}function Cc(t,e){if(lC(t=nt(t)))return Pv("Unsupported field value:",e,t),aC(t,e);if(t instanceof Nv)return function(r,s){if(!iC(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Cc(l,s.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:Hd(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(s.serializer,i)}}if(r instanceof Cv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ha)return{bytesValue:_N(s.serializer,r._byteString)};if(r instanceof zt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:dv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Av)return function(o,l){return{mapValue:{fields:{[YI]:{stringValue:XI},[Fd]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return av(l.serializer,d)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${Kh(r)}`)}(t,e)}function aC(t,e){const n={};return HI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,(r,s)=>{const i=Cc(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function lC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Cv||t instanceof ha||t instanceof zt||t instanceof Nv||t instanceof Av)}function Pv(t,e,n){if(!lC(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Kh(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function lg(t,e,n){if((e=nt(e))instanceof Yh)return e._internalPath;if(typeof e=="string")return kv(t,e);throw Kd("Field path arguments must be of type string or ",t,!1,void 0,n)}const PF=new RegExp("[~\\*/\\[\\]]");function kv(t,e,n){if(e.search(PF)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yh(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K($.INVALID_ARGUMENT,l+t+c)}function cC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kF extends uC{data(){return super.data()}}function jv(t,e){return typeof e=="string"?kv(t,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dv{}class DF extends Dv{}function OF(t,e,...n){let r=[];e instanceof Dv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Ov).length,l=i.filter(c=>c instanceof Zh).length;if(o>1||o>0&&l>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Zh extends DF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Zh(e,n,r)}_apply(e){const n=this._parse(e);return dC(e._query,n),new Na(e.firestore,e.converter,Xm(e._query,n))}_parse(e){const n=Xh(e.firestore);return function(i,o,l,c,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ub(f,h);const I=[];for(const x of f)I.push(cb(c,i,x));p={arrayValue:{values:I}}}else p=cb(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ub(f,h),p=RF(l,o,f,h==="in"||h==="not-in");return Xe.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function MF(t,e,n){const r=e,s=jv("where",t);return Zh._create(s,r,n)}class Ov extends Dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ov(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)dC(o,c),o=Xm(o,c)}(e._query,n),new Na(e.firestore,e.converter,Xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cb(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iN(e)&&n.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!J.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return T_(t,new J(r))}if(n instanceof zt)return T_(t,n._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function ub(t,e){if(!Array.isArray(t)||t.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dC(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LF{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Js(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Fd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>qe(o.doubleValue));return new Av(i)}convertGeoPoint(e){return new Cv(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=$s(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Se(NN(r),9688,{name:e});const s=new ec(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||zr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fC extends uC{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Xu extends fC{data(e={}){return super.data(e)}}class VF{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ul(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xu(this._firestore,this._userDataWriter,r.key,r,new ul(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ul(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ul(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:FF(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t){t=zn(t,zt);const e=zn(t.firestore,Ji);return wF(Iv(e),t._key).then(n=>zF(e,t,n))}class pC extends LF{constructor(e){super(),this.firestore=e}convertBytes(e){return new ha(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function mC(t){t=zn(t,Na);const e=zn(t.firestore,Ji),n=Iv(e),r=new pC(e);return jF(t._query),_F(n,t._query).then(s=>new VF(e,r,t,s))}function gC(t,e,n){t=zn(t,zt);const r=zn(t.firestore,Ji),s=hC(t.converter,e);return tf(r,[oC(Xh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function UF(t,e,n,...r){t=zn(t,zt);const s=zn(t.firestore,Ji),i=Xh(s);let o;return o=typeof(e=nt(e))=="string"||e instanceof Yh?AF(i,"updateDoc",t._key,e,n,r):CF(i,"updateDoc",t._key,e),tf(s,[o.toMutation(t._key,xn.exists(!0))])}function $F(t){return tf(zn(t.firestore,Ji),[new lv(t._key,xn.none())])}function BF(t,e){const n=zn(t.firestore,Ji),r=Ca(t),s=hC(t.converter,e);return tf(n,[oC(Xh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}function tf(t,e){return function(r,s){const i=new jr;return r.asyncQueue.enqueueAndForget(async()=>lF(await xF(r),s,i)),i.promise}(Iv(t),e)}function zF(t,e,n){const r=n.docs.get(e._key),s=new pC(t);return new fC(t,s,e._key,r,new ul(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ea=s})(Qi),ji(new Fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ji(new k3(r.getProvider("auth-internal")),new O3(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),rr(h_,f_,e),rr(h_,f_,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebasestorage.googleapis.com",HF="storageBucket",WF=2*60*1e3,GF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends hr{constructor(e,n,r=0){super(Ep(e),`Firebase Storage: ${n} (${Ep(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ep(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ur;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ur||(ur={}));function Ep(t){return"storage/"+t}function qF(){const t="An unknown error occurred, please check the error payload for server response.";return new pr(ur.UNKNOWN,t)}function KF(){return new pr(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QF(){return new pr(ur.CANCELED,"User canceled the upload/download.")}function YF(t){return new pr(ur.INVALID_URL,"Invalid URL '"+t+"'.")}function XF(t){return new pr(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function db(t){return new pr(ur.INVALID_ARGUMENT,t)}function vC(){return new pr(ur.APP_DELETED,"The Firebase app was deleted.")}function JF(t){return new pr(ur.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=On.makeFromUrl(e,n)}catch{return new On(e,"")}if(r.path==="")return r;throw XF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},x=n===yC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",v=new RegExp(`^https?://${x}/${s}/${E}`,"i"),b=[{regex:l,indices:c,postModify:i},{regex:_,indices:I,postModify:d},{regex:v,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<b.length;S++){const j=b[S],O=j.regex.exec(e);if(O){const N=O[j.indices.bucket];let T=O[j.indices.path];T||(T=""),r=new On(N,T),j.postModify(r);break}}if(r==null)throw YF(e);return r}}class ZF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...E){d||(d=!0,e.apply(null,E))}function f(E){s=setTimeout(()=>{s=null,t(_,c())},E)}function p(){i&&clearTimeout(i)}function _(E,...v){if(d){p();return}if(E){p(),h.call(null,E,...v);return}if(c()||o){p(),h.call(null,E,...v);return}r<64&&(r*=2);let b;l===1?(l=2,b=0):b=(r+Math.random())*1e3,f(b)}let I=!1;function x(E){I||(I=!0,p(),!d&&(s!==null?(E||(l=2),clearTimeout(s),f(0)):E||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function tU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){return t!==void 0}function hb(t,e,n,r){if(r<e)throw db(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw db(`Invalid value for '${t}'. Expected ${n} or less.`)}function rU(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Qd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qd||(Qd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,s,i,o,l,c,d,h,f,p=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,x)=>{this.resolve_=I,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new wu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Qd.NO_ERROR,c=i.getStatus();if(!l||sU(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Qd.ABORT;r(!1,new wu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new wu(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());nU(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=qF();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?vC():QF();o(c)}else{const c=KF();o(c)}};this.canceled_?n(!1,new wu(!1,null,!0)):this.backoffId_=eU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uU(t,e,n,r,s,i,o=!0,l=!1){const c=rU(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return lU(h,e),oU(h,n),aU(h,i),cU(h,r),new iU(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this._service=e,n instanceof On?this._location=n:this._location=On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yd(e,n)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hU(this._location.path)}get storage(){return this._service}get parent(){const e=dU(this._location.path);if(e===null)return null;const n=new On(this._location.bucket,e);return new Yd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JF(e)}}function fb(t,e){const n=e==null?void 0:e[HF];return n==null?null:On.makeFromBucketSpec(n,t)}function fU(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ki(e);s&&(Vy(`https://${t.host}/b`),Fy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:HS(i,t.app.options.projectId))}class pU{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=yC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WF,this._maxUploadRetryTime=GF,this._requests=new Set,s!=null?this._bucket=On.makeFromBucketSpec(s,this._host):this._bucket=fb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=fb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new ZF(vC());{const o=uU(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const pb="@firebase/storage",mb="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="storage";function mU(t=zy(),e){t=nt(t);const r=kh(t,xC).getImmediate({identifier:e}),s=$S("storage");return s&&gU(r,...s),r}function gU(t,e,n,r={}){fU(t,e,n,r)}function yU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new pU(n,r,s,e,Qi)}function vU(){ji(new Fs(xC,yU,"PUBLIC").setMultipleInstances(!0)),rr(pb,mb,""),rr(pb,mb,"esm2017")}vU();const xU={apiKey:"AIzaSyAy_j8eY964GwySbwz8Ixhqr4Uwq-2ijhI",authDomain:"emotional-978ec.firebaseapp.com",projectId:"emotional-978ec",storageBucket:"emotional-978ec.appspot.com",messagingSenderId:"310774535075",appId:"1:310774535075:web:1e6fd614d3dfde11e1c016",measurementId:"G-LF4GE0RZT9"},Mv=By(xU),pt=I3(Mv),Vi=rC(Mv);mU(Mv);const Xd=new Tr;Xd.addScope("email");Xd.addScope("profile");pt.useDeviceLanguage();async function wC(){const t=pt.currentUser;if(!t)return;const e=Ca(Vi,"users",t.uid);(await ef(e)).exists()||await gC(e,{credits:3,email:t.email,displayName:t.displayName,createdAt:new Date})}async function cg(){const t=pt.currentUser;if(!t)return 0;try{const e=Ca(Vi,"users",t.uid),n=await ef(e);return n.exists()?n.data().credits||0:(await wC(),3)}catch(e){return console.error("Error fetching user credits:",e),0}}async function wU(t){const e=pt.currentUser;if(e)try{const n=Ca(Vi,"users",e.uid),r=await ef(n);if(r.exists()){const s=r.data().credits||0;await UF(n,{credits:s+t})}else await gC(n,{credits:t,email:e.email,displayName:e.displayName,createdAt:new Date})}catch(n){console.error("Error adding user credits:",n)}}function Lv(){const[t,e]=g.useState(null),[n,r]=g.useState(!0);g.useEffect(()=>{console.log("Setting up auth state listener...");const c=vI(pt,async h=>{if(console.log("Auth state changed:",h?`✅ User signed in: ${h.email}`:"❌ User is signed out"),e(h),h)try{await wC(),console.log("User credits initialized")}catch(f){console.error("Failed to initialize user credits:",f)}r(!1)},h=>{console.error("Auth state change error:",h),r(!1)});return(async()=>{try{const h=await B6(pt);h&&console.log("Google sign-in via redirect successful:",h.user.email)}catch(h){console.error("Redirect result error:",h)}})(),c},[]);const s=async(c,d)=>{try{console.log("Attempting email sign-in for:",c),r(!0);const h=await h6(pt,c,d);return console.log("Email sign-in successful:",h.user.email),h.user}catch(h){console.error("Email sign-in error:",h.code,h.message);let f="Failed to sign in. Please try again.";throw h.code==="auth/user-not-found"?f="No account found with this email address.":h.code==="auth/wrong-password"?f="Incorrect password. Please try again.":h.code==="auth/invalid-email"?f="Please enter a valid email address.":h.code==="auth/too-many-requests"&&(f="Too many failed attempts. Please try again later."),new Error(f)}finally{r(!1)}},i=async(c,d)=>{try{console.log("Attempting email sign-up for:",c),r(!0);const h=await d6(pt,c,d);return console.log("Email sign-up successful:",h.user.email),h.user}catch(h){console.error("Email sign-up error:",h.code,h.message);let f="Failed to create account. Please try again.";throw h.code==="auth/email-already-in-use"?f="An account with this email already exists.":h.code==="auth/invalid-email"?f="Please enter a valid email address.":h.code==="auth/weak-password"&&(f="Password should be at least 6 characters long."),new Error(f)}finally{r(!1)}},o=async(c=!1)=>{try{if(console.log("Attempting Google sign-in...",c?"via redirect":"via popup"),r(!0),c)return await U6(pt,Xd),null;{const d=await D6(pt,Xd);return console.log("Google sign-in successful:",d.user.email),d.user}}catch(d){if(console.error("Google sign-in error:",d.code,d.message),d.code==="auth/popup-blocked")return console.log("Popup blocked, trying redirect method..."),await o(!0);let h="Failed to sign in with Google. Please try again.";throw d.code==="auth/popup-closed-by-user"?h="Sign-in was cancelled. Please try again.":d.code==="auth/popup-blocked"&&(h="Popup was blocked. Redirecting to Google sign-in..."),new Error(h)}finally{c||r(!1)}};return{user:t,loading:n,signInWithEmail:s,signUpWithEmail:i,signInWithGoogle:o,logout:async()=>{try{console.log("Signing out user..."),await xI(pt),console.log("User signed out successfully")}catch(c){throw console.error("Sign out error:",c),c}}}}const _U=Eh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),De=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?yj:"button";return a.jsx(o,{className:ye(_U({variant:e,size:n,className:t})),ref:i,...s})});De.displayName="Button";const ws=g.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ws.displayName="Input";var bU="Label",_C=g.forwardRef((t,e)=>a.jsx(ce.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));_C.displayName=bU;var bC=_C;const EU=Eh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ar=g.forwardRef(({className:t,...e},n)=>a.jsx(bC,{ref:n,className:ye(EU(),t),...e}));Ar.displayName=bC.displayName;var Tp="focusScope.autoFocusOnMount",Sp="focusScope.autoFocusOnUnmount",gb={bubbles:!1,cancelable:!0},TU="FocusScope",Vv=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=g.useState(null),d=bn(s),h=bn(i),f=g.useRef(null),p=Re(e,x=>c(x)),_=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let x=function(b){if(_.paused||!l)return;const S=b.target;l.contains(S)?f.current=S:ns(f.current,{select:!0})},E=function(b){if(_.paused||!l)return;const S=b.relatedTarget;S!==null&&(l.contains(S)||ns(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const j of b)j.removedNodes.length>0&&ns(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",E);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",E),y.disconnect()}}},[r,l,_.paused]),g.useEffect(()=>{if(l){vb.add(_);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent(Tp,gb);l.addEventListener(Tp,d),l.dispatchEvent(v),v.defaultPrevented||(SU(RU(EC(l)),{select:!0}),document.activeElement===x&&ns(l))}return()=>{l.removeEventListener(Tp,d),setTimeout(()=>{const v=new CustomEvent(Sp,gb);l.addEventListener(Sp,h),l.dispatchEvent(v),v.defaultPrevented||ns(x??document.body,{select:!0}),l.removeEventListener(Sp,h),vb.remove(_)},0)}}},[l,d,h,_]);const I=g.useCallback(x=>{if(!n&&!r||_.paused)return;const E=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(E&&v){const y=x.currentTarget,[b,S]=IU(y);b&&S?!x.shiftKey&&v===S?(x.preventDefault(),n&&ns(b,{select:!0})):x.shiftKey&&v===b&&(x.preventDefault(),n&&ns(S,{select:!0})):v===y&&x.preventDefault()}},[n,r,_.paused]);return a.jsx(ce.div,{tabIndex:-1,...o,ref:p,onKeyDown:I})});Vv.displayName=TU;function SU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ns(r,{select:e}),document.activeElement!==n)return}function IU(t){const e=EC(t),n=yb(e,t),r=yb(e.reverse(),t);return[n,r]}function EC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yb(t,e){for(const n of t)if(!NU(n,{upTo:e}))return n}function NU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function CU(t){return t instanceof HTMLInputElement&&"select"in t}function ns(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&CU(t)&&e&&t.select()}}var vb=AU();function AU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xb(t,e),t.unshift(e)},remove(e){var n;t=xb(t,e),(n=t[0])==null||n.resume()}}}function xb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function RU(t){return t.filter(e=>e.tagName!=="A")}var Ip=0;function TC(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wb()),document.body.insertAdjacentElement("beforeend",t[1]??wb()),Ip++,()=>{Ip===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ip--}},[])}function wb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ju="right-scroll-bar-position",Zu="width-before-scroll-bar",PU="with-scroll-bars-hidden",kU="--removed-body-scroll-bar-size";function Np(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function jU(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var DU=typeof window<"u"?g.useLayoutEffect:g.useEffect,_b=new WeakMap;function OU(t,e){var n=jU(null,function(r){return t.forEach(function(s){return Np(s,r)})});return DU(function(){var r=_b.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Np(l,null)}),i.forEach(function(l){s.has(l)||Np(l,o)})}_b.set(n,t)},[t]),n}function MU(t){return t}function LU(t,e){e===void 0&&(e=MU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function VU(t){t===void 0&&(t={});var e=LU(null);return e.options=Jn({async:!0,ssr:!1},t),e}var SC=function(t){var e=t.sideCar,n=vc(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Jn({},n))};SC.isSideCarExport=!0;function FU(t,e){return t.useMedium(e),SC}var IC=VU(),Cp=function(){},nf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Cp,onWheelCapture:Cp,onTouchMoveCapture:Cp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,_=t.noRelative,I=t.noIsolation,x=t.inert,E=t.allowPinchZoom,v=t.as,y=v===void 0?"div":v,b=t.gapMode,S=vc(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,O=OU([n,e]),N=Jn(Jn({},S),s);return g.createElement(g.Fragment,null,h&&g.createElement(j,{sideCar:IC,removeScrollBar:d,shards:f,noRelative:_,noIsolation:I,inert:x,setCallbacks:i,allowPinchZoom:!!E,lockRef:n,gapMode:b}),o?g.cloneElement(g.Children.only(l),Jn(Jn({},N),{ref:O})):g.createElement(y,Jn({},N,{className:c,ref:O}),l))});nf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nf.classNames={fullWidth:Zu,zeroRight:Ju};var UU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $U(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UU();return e&&t.setAttribute("nonce",e),t}function BU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function zU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=$U())&&(BU(e,n),zU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WU=function(){var t=HU();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},NC=function(){var t=WU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},GU={left:0,top:0,right:0,gap:0},Ap=function(t){return parseInt(t||"",10)||0},qU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ap(n),Ap(r),Ap(s)]},KU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return GU;var e=qU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},QU=NC(),Fo="data-scroll-locked",YU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(PU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Fo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ju,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Zu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Zu," .").concat(Zu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fo,`] {
    `).concat(kU,": ").concat(l,`px;
  }
`)},bb=function(){var t=parseInt(document.body.getAttribute(Fo)||"0",10);return isFinite(t)?t:0},XU=function(){g.useEffect(function(){return document.body.setAttribute(Fo,(bb()+1).toString()),function(){var t=bb()-1;t<=0?document.body.removeAttribute(Fo):document.body.setAttribute(Fo,t.toString())}},[])},JU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;XU();var i=g.useMemo(function(){return KU(s)},[s]);return g.createElement(QU,{styles:YU(i,!e,s,n?"":"!important")})},ug=!1;if(typeof window<"u")try{var _u=Object.defineProperty({},"passive",{get:function(){return ug=!0,!0}});window.addEventListener("test",_u,_u),window.removeEventListener("test",_u,_u)}catch{ug=!1}var so=ug?{passive:!1}:!1,ZU=function(t){return t.tagName==="TEXTAREA"},CC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZU(t)&&n[e]==="visible")},e9=function(t){return CC(t,"overflowY")},t9=function(t){return CC(t,"overflowX")},Eb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=AC(t,r);if(s){var i=RC(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},n9=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},r9=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},AC=function(t,e){return t==="v"?e9(e):t9(e)},RC=function(t,e){return t==="v"?n9(e):r9(e)},s9=function(t,e){return t==="h"&&e==="rtl"?-1:1},i9=function(t,e,n,r,s){var i=s9(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),d=!1,h=o>0,f=0,p=0;do{if(!l)break;var _=RC(t,l),I=_[0],x=_[1],E=_[2],v=x-E-i*I;(I||v)&&AC(t,l)&&(f+=v,p+=I);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},bu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Tb=function(t){return[t.deltaX,t.deltaY]},Sb=function(t){return t&&"current"in t?t.current:t},o9=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a9=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},l9=0,io=[];function c9(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(l9++)[0],i=g.useState(NC)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=fL([t.lockRef.current],(t.shards||[]).map(Sb),!0).filter(Boolean);return x.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(x,E){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var v=bu(x),y=n.current,b="deltaX"in x?x.deltaX:y[0]-v[0],S="deltaY"in x?x.deltaY:y[1]-v[1],j,O=x.target,N=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in x&&N==="h"&&O.type==="range")return!1;var T=Eb(N,O);if(!T)return!0;if(T?j=N:(j=N==="v"?"h":"v",T=Eb(N,O)),!T)return!1;if(!r.current&&"changedTouches"in x&&(b||S)&&(r.current=j),!j)return!0;var R=r.current||j;return i9(R,E,x,R==="h"?b:S)},[]),c=g.useCallback(function(x){var E=x;if(!(!io.length||io[io.length-1]!==i)){var v="deltaY"in E?Tb(E):bu(E),y=e.current.filter(function(j){return j.name===E.type&&(j.target===E.target||E.target===j.shadowParent)&&o9(j.delta,v)})[0];if(y&&y.should){E.cancelable&&E.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(Sb).filter(Boolean).filter(function(j){return j.contains(E.target)}),S=b.length>0?l(E,b[0]):!o.current.noIsolation;S&&E.cancelable&&E.preventDefault()}}},[]),d=g.useCallback(function(x,E,v,y){var b={name:x,delta:E,target:v,should:y,shadowParent:u9(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),h=g.useCallback(function(x){n.current=bu(x),r.current=void 0},[]),f=g.useCallback(function(x){d(x.type,Tb(x),x.target,l(x,t.lockRef.current))},[]),p=g.useCallback(function(x){d(x.type,bu(x),x.target,l(x,t.lockRef.current))},[]);g.useEffect(function(){return io.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,so),document.addEventListener("touchmove",c,so),document.addEventListener("touchstart",h,so),function(){io=io.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,so),document.removeEventListener("touchmove",c,so),document.removeEventListener("touchstart",h,so)}},[]);var _=t.removeScrollBar,I=t.inert;return g.createElement(g.Fragment,null,I?g.createElement(i,{styles:a9(s)}):null,_?g.createElement(JU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function u9(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const d9=FU(IC,c9);var Fv=g.forwardRef(function(t,e){return g.createElement(nf,Jn({},t,{ref:e,sideCar:d9}))});Fv.classNames=nf.classNames;var h9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},oo=new WeakMap,Eu=new WeakMap,Tu={},Rp=0,PC=function(t){return t&&(t.host||PC(t.parentNode))},f9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=PC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},p9=function(t,e,n,r){var s=f9(e,Array.isArray(t)?t:[t]);Tu[n]||(Tu[n]=new WeakMap);var i=Tu[n],o=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var _=p.getAttribute(r),I=_!==null&&_!=="false",x=(oo.get(p)||0)+1,E=(i.get(p)||0)+1;oo.set(p,x),i.set(p,E),o.push(p),x===1&&I&&Eu.set(p,!0),E===1&&p.setAttribute(n,"true"),I||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),l.clear(),Rp++,function(){o.forEach(function(f){var p=oo.get(f)-1,_=i.get(f)-1;oo.set(f,p),i.set(f,_),p||(Eu.has(f)||f.removeAttribute(r),Eu.delete(f)),_||f.removeAttribute(n)}),Rp--,Rp||(oo=new WeakMap,oo=new WeakMap,Eu=new WeakMap,Tu={})}},kC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=h9(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),p9(r,s,n,"aria-hidden")):function(){return null}},rf="Dialog",[jC,j$]=Qs(rf),[m9,Hn]=jC(rf),DC=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=g.useRef(null),c=g.useRef(null),[d,h]=ra({prop:r,defaultProp:s??!1,onChange:i,caller:rf});return a.jsx(m9,{scope:e,triggerRef:l,contentRef:c,contentId:As(),titleId:As(),descriptionId:As(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};DC.displayName=rf;var OC="DialogTrigger",g9=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Hn(OC,n),i=Re(e,s.triggerRef);return a.jsx(ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Bv(s.open),...r,ref:i,onClick:ee(t.onClick,s.onOpenToggle)})});g9.displayName=OC;var Uv="DialogPortal",[y9,MC]=jC(Uv,{forceMount:void 0}),LC=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Hn(Uv,e);return a.jsx(y9,{scope:e,forceMount:n,children:g.Children.map(r,o=>a.jsx(Wi,{present:n||i.open,children:a.jsx(wh,{asChild:!0,container:s,children:o})}))})};LC.displayName=Uv;var Jd="DialogOverlay",VC=g.forwardRef((t,e)=>{const n=MC(Jd,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Hn(Jd,t.__scopeDialog);return i.modal?a.jsx(Wi,{present:r||i.open,children:a.jsx(x9,{...s,ref:e})}):null});VC.displayName=Jd;var v9=na("DialogOverlay.RemoveScroll"),x9=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Hn(Jd,n);return a.jsx(Fv,{as:v9,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ce.div,{"data-state":Bv(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Fi="DialogContent",FC=g.forwardRef((t,e)=>{const n=MC(Fi,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Hn(Fi,t.__scopeDialog);return a.jsx(Wi,{present:r||i.open,children:i.modal?a.jsx(w9,{...s,ref:e}):a.jsx(_9,{...s,ref:e})})});FC.displayName=Fi;var w9=g.forwardRef((t,e)=>{const n=Hn(Fi,t.__scopeDialog),r=g.useRef(null),s=Re(e,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return kC(i)},[]),a.jsx(UC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ee(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ee(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ee(t.onFocusOutside,i=>i.preventDefault())})}),_9=g.forwardRef((t,e)=>{const n=Hn(Fi,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return a.jsx(UC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),UC=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Hn(Fi,n),c=g.useRef(null),d=Re(e,c);return TC(),a.jsxs(a.Fragment,{children:[a.jsx(Vv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(hc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Bv(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(b9,{titleId:l.titleId}),a.jsx(T9,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$v="DialogTitle",$C=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Hn($v,n);return a.jsx(ce.h2,{id:s.titleId,...r,ref:e})});$C.displayName=$v;var BC="DialogDescription",zC=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Hn(BC,n);return a.jsx(ce.p,{id:s.descriptionId,...r,ref:e})});zC.displayName=BC;var HC="DialogClose",WC=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Hn(HC,n);return a.jsx(ce.button,{type:"button",...r,ref:e,onClick:ee(t.onClick,()=>s.onOpenChange(!1))})});WC.displayName=HC;function Bv(t){return t?"open":"closed"}var GC="DialogTitleWarning",[D$,qC]=mj(GC,{contentName:Fi,titleName:$v,docsSlug:"dialog"}),b9=({titleId:t})=>{const e=qC(GC),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},E9="DialogDescriptionWarning",T9=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qC(E9).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},S9=DC,I9=LC,KC=VC,QC=FC,YC=$C,XC=zC,N9=WC;const JC=S9,C9=I9,ZC=g.forwardRef(({className:t,...e},n)=>a.jsx(KC,{ref:n,className:ye("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));ZC.displayName=KC.displayName;const zv=g.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(C9,{children:[a.jsx(ZC,{}),a.jsxs(QC,{ref:r,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(N9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(bl,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zv.displayName=QC.displayName;const Hv=({className:t,...e})=>a.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Hv.displayName="DialogHeader";const Wv=g.forwardRef(({className:t,...e},n)=>a.jsx(YC,{ref:n,className:ye("text-lg font-semibold leading-none tracking-tight",t),...e}));Wv.displayName=YC.displayName;const A9=g.forwardRef(({className:t,...e},n)=>a.jsx(XC,{ref:n,className:ye("text-sm text-muted-foreground",t),...e}));A9.displayName=XC.displayName;var R9=g.createContext(void 0);function Gv(t){const e=g.useContext(R9);return t||e||"ltr"}var Pp="rovingFocusGroup.onEntryFocus",P9={bubbles:!1,cancelable:!0},Ac="RovingFocusGroup",[dg,eA,k9]=_y(Ac),[j9,tA]=Qs(Ac,[k9]),[D9,O9]=j9(Ac),nA=g.forwardRef((t,e)=>a.jsx(dg.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(dg.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(M9,{...t,ref:e})})}));nA.displayName=Ac;var M9=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,p=g.useRef(null),_=Re(e,p),I=Gv(i),[x,E]=ra({prop:o,defaultProp:l??null,onChange:c,caller:Ac}),[v,y]=g.useState(!1),b=bn(d),S=eA(n),j=g.useRef(!1),[O,N]=g.useState(0);return g.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(Pp,b),()=>T.removeEventListener(Pp,b)},[b]),a.jsx(D9,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:x,onItemFocus:g.useCallback(T=>E(T),[E]),onItemShiftTab:g.useCallback(()=>y(!0),[]),onFocusableItemAdd:g.useCallback(()=>N(T=>T+1),[]),onFocusableItemRemove:g.useCallback(()=>N(T=>T-1),[]),children:a.jsx(ce.div,{tabIndex:v||O===0?-1:0,"data-orientation":r,...f,ref:_,style:{outline:"none",...t.style},onMouseDown:ee(t.onMouseDown,()=>{j.current=!0}),onFocus:ee(t.onFocus,T=>{const R=!j.current;if(T.target===T.currentTarget&&R&&!v){const P=new CustomEvent(Pp,P9);if(T.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=S().filter(Q=>Q.focusable),D=A.find(Q=>Q.active),k=A.find(Q=>Q.id===x),Z=[D,k,...A].filter(Boolean).map(Q=>Q.ref.current);iA(Z,h)}}j.current=!1}),onBlur:ee(t.onBlur,()=>y(!1))})})}),rA="RovingFocusGroupItem",sA=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=As(),d=i||c,h=O9(rA,n),f=h.currentTabStopId===d,p=eA(n),{onFocusableItemAdd:_,onFocusableItemRemove:I,currentTabStopId:x}=h;return g.useEffect(()=>{if(r)return _(),()=>I()},[r,_,I]),a.jsx(dg.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:a.jsx(ce.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ee(t.onMouseDown,E=>{r?h.onItemFocus(d):E.preventDefault()}),onFocus:ee(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:ee(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){h.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const v=F9(E,h.orientation,h.dir);if(v!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let b=p().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const S=b.indexOf(E.currentTarget);b=h.loop?U9(b,S+1):b.slice(S+1)}setTimeout(()=>iA(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:x!=null}):o})})});sA.displayName=rA;var L9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function V9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function F9(t,e,n){const r=V9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return L9[r]}function iA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function U9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $9=nA,B9=sA,sf="Tabs",[z9,O$]=Qs(sf,[tA]),oA=tA(),[H9,qv]=z9(sf),aA=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Gv(l),[f,p]=ra({prop:r,onChange:s,defaultProp:i??"",caller:sf});return a.jsx(H9,{scope:n,baseId:As(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(ce.div,{dir:h,"data-orientation":o,...d,ref:e})})});aA.displayName=sf;var lA="TabsList",cA=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=qv(lA,n),o=oA(n);return a.jsx($9,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ce.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});cA.displayName=lA;var uA="TabsTrigger",dA=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=qv(uA,n),l=oA(n),c=pA(o.baseId,r),d=mA(o.baseId,r),h=r===o.value;return a.jsx(B9,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(ce.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ee(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ee(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ee(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});dA.displayName=uA;var hA="TabsContent",fA=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=qv(hA,n),c=pA(l.baseId,r),d=mA(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Wi,{present:s||h,children:({present:p})=>a.jsx(ce.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});fA.displayName=hA;function pA(t,e){return`${t}-trigger-${e}`}function mA(t,e){return`${t}-content-${e}`}var W9=aA,gA=cA,yA=dA,vA=fA;const G9=W9,xA=g.forwardRef(({className:t,...e},n)=>a.jsx(gA,{ref:n,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));xA.displayName=gA.displayName;const hg=g.forwardRef(({className:t,...e},n)=>a.jsx(yA,{ref:n,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));hg.displayName=yA.displayName;const fg=g.forwardRef(({className:t,...e},n)=>a.jsx(vA,{ref:n,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));fg.displayName=vA.displayName;function q9({open:t,onOpenChange:e}){const[n,r]=g.useState(""),[s,i]=g.useState(""),[o,l]=g.useState(!1),{signInWithEmail:c,signUpWithEmail:d,signInWithGoogle:h,loading:f}=Lv(),{toast:p}=y1(),_=async v=>{if(v.preventDefault(),!n||!s){p({title:"Missing Information",description:"Please enter both email and password.",variant:"destructive"});return}l(!0);try{console.log("AuthModal: Starting email sign-in for:",n),await c(n,s),console.log("AuthModal: Email sign-in completed successfully"),e(!1),r(""),i(""),p({title:"Welcome back!",description:"You've successfully signed in."})}catch(y){console.error("AuthModal: Email sign-in failed:",y),p({title:"Sign In Failed",description:y.message||"Failed to sign in. Please try again.",variant:"destructive"})}finally{l(!1)}},I=async v=>{if(v.preventDefault(),!n||!s){p({title:"Missing Information",description:"Please enter both email and password.",variant:"destructive"});return}if(s.length<6){p({title:"Password Too Short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}l(!0);try{console.log("AuthModal: Starting email sign-up for:",n),await d(n,s),console.log("AuthModal: Email sign-up completed successfully"),e(!1),r(""),i(""),p({title:"Account Created!",description:"Welcome to Creative Flow!"})}catch(y){console.error("AuthModal: Email sign-up failed:",y),p({title:"Sign Up Failed",description:y.message||"Failed to create account. Please try again.",variant:"destructive"})}finally{l(!1)}},x=async()=>{l(!0);try{console.log("AuthModal: Starting Google sign-in..."),await h()?(console.log("AuthModal: Google sign-in completed successfully"),e(!1),p({title:"Welcome!",description:"You've successfully signed in with Google."})):p({title:"Redirecting...",description:"Redirecting to Google for sign-in."})}catch(v){console.error("AuthModal: Google sign-in failed:",v),v.message.includes("Redirecting to Google")?p({title:"Redirecting to Google",description:"Your browser blocked the popup. Redirecting to Google sign-in page..."}):p({title:"Google Sign In Failed",description:v.message||"Failed to sign in with Google. Please try again.",variant:"destructive"})}finally{l(!1)}},E=o||f;return a.jsx(JC,{open:t,onOpenChange:e,children:a.jsxs(zv,{className:"sm:max-w-md",children:[a.jsx(Hv,{children:a.jsx(Wv,{children:"Welcome to Creative Flow"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(De,{onClick:x,disabled:E,className:"w-full bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 disabled:opacity-50",children:[E?a.jsx(lp,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),a.jsxs(G9,{defaultValue:"signin",className:"w-full",children:[a.jsxs(xA,{className:"grid w-full grid-cols-2",children:[a.jsx(hg,{value:"signin",children:"Sign In"}),a.jsx(hg,{value:"signup",children:"Sign Up"})]}),a.jsx(fg,{value:"signin",className:"space-y-4",children:a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ar,{htmlFor:"signin-email",children:"Email"}),a.jsx(ws,{id:"signin-email",type:"email",placeholder:"your@email.com",value:n,onChange:v=>r(v.target.value),disabled:E,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ar,{htmlFor:"signin-password",children:"Password"}),a.jsx(ws,{id:"signin-password",type:"password",placeholder:"Enter your password",value:s,onChange:v=>i(v.target.value),disabled:E,required:!0})]}),a.jsx(De,{type:"submit",disabled:E,className:"w-full",children:E?a.jsxs(a.Fragment,{children:[a.jsx(lp,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):"Sign In"})]})}),a.jsx(fg,{value:"signup",className:"space-y-4",children:a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ar,{htmlFor:"signup-email",children:"Email"}),a.jsx(ws,{id:"signup-email",type:"email",placeholder:"your@email.com",value:n,onChange:v=>r(v.target.value),disabled:E,required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ar,{htmlFor:"signup-password",children:"Password"}),a.jsx(ws,{id:"signup-password",type:"password",placeholder:"Create a password (6+ characters)",value:s,onChange:v=>i(v.target.value),disabled:E,required:!0,minLength:6})]}),a.jsx(De,{type:"submit",disabled:E,className:"w-full",children:E?a.jsxs(a.Fragment,{children:[a.jsx(lp,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Account..."]}):"Create Account"})]})})]})]})]})})}function K9(){var l;const{user:t}=Lv(),[e,n]=g.useState(!1),[r,s]=g.useState(0),i=async()=>{await xI(pt),window.location.reload()};g.useEffect(()=>{async function c(){if(t){const d=await cg();s(d)}else s(0)}c()},[t]);const o=async()=>{await wU(2);const c=await cg();s(c),alert("You earned 2 credits!")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white",children:[a.jsxs("div",{className:"container mx-auto px-6 py-12",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h1",{className:"text-6xl font-bold mb-6 bg-gradient-to-r from-white via-purple-200 to-blue-200 bg-clip-text text-transparent",children:"SoulLift Audio"}),a.jsx("p",{className:"text-xl text-slate-300 max-w-3xl mx-auto leading-relaxed",children:"Emotional Intelligence meets AI — Craft your perfect Soul Hug with advanced personalization"})]}),a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 mb-12",children:[a.jsx(Pr,{href:"/creative-flow",className:"group block bg-white/5 backdrop-blur-xl rounded-2xl p-8 border border-white/10 hover:border-white/20 transition-all duration-300 hover:bg-white/10",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl flex items-center justify-center",children:a.jsx(K1,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Create New Soul Hug"}),a.jsx("p",{className:"text-slate-400",children:"Start your creative journey with AI assistance"})]})]}),a.jsx(ko,{className:"w-5 h-5 text-slate-400 group-hover:text-white group-hover:translate-x-1 transition-all"})]})}),a.jsx(Pr,{href:"/my-hugs",className:"group block bg-white/5 backdrop-blur-xl rounded-2xl p-8 border border-white/10 hover:border-white/20 transition-all duration-300 hover:bg-white/10",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-teal-500 rounded-xl flex items-center justify-center",children:a.jsx(fD,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-1",children:"View My Soul Hugs"}),a.jsx("p",{className:"text-slate-400",children:"Access your saved creations and memories"})]})]}),a.jsx(ko,{className:"w-5 h-5 text-slate-400 group-hover:text-white group-hover:translate-x-1 transition-all"})]})}),a.jsx(Pr,{href:"/audio-hug",className:"group block bg-gradient-to-r from-orange-500/10 to-red-500/10 backdrop-blur-xl rounded-2xl p-8 border border-orange-400/20 hover:border-orange-400/40 transition-all duration-300 hover:from-orange-500/20 hover:to-red-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center",children:a.jsx(Sy,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-1",children:"Audio Features"}),a.jsx("p",{className:"text-slate-400",children:"Voice recording, AI narration, and music mixing"})]})]}),a.jsx(ko,{className:"w-5 h-5 text-slate-400 group-hover:text-white group-hover:translate-x-1 transition-all"})]})})]}),t?a.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsxs("div",{className:"text-center bg-white/5 backdrop-blur-xl rounded-xl px-6 py-4 border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx(Q1,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-slate-300",children:"Welcome back,"})]}),a.jsx("span",{className:"font-semibold text-white",children:t.displayName||((l=t.email)==null?void 0:l.split("@")[0])})]}),a.jsx("div",{className:"bg-gradient-to-r from-yellow-500/10 to-amber-500/10 backdrop-blur-xl rounded-xl px-6 py-4 border border-yellow-400/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(dD,{className:"w-5 h-5 text-yellow-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-300",children:"Available Credits"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:r})]})]}),a.jsx("button",{onClick:o,className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-black font-medium rounded-lg transition-colors text-sm",children:"Earn More"})]})}),a.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center space-x-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 rounded-xl px-6 py-4 border border-red-500/20 hover:border-red-500/40 transition-all duration-200",children:[a.jsx(mD,{className:"w-4 h-4"}),a.jsx("span",{children:"Sign Out"})]})]}):a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>n(!0),className:"px-8 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl border border-white/20 hover:border-white/40 transition-all duration-200 font-medium",children:"Sign In or Create Account"})})]}),a.jsx(q9,{open:e,onOpenChange:n})]})}class Q9{constructor(){this.relationshipPrompts={romantic_partner:{systemContext:"You are crafting a message between romantic partners who share deep intimacy and affection.",personalityHints:"Include references to shared experiences, inside jokes, future dreams together, and expressions of deep love and appreciation."},spouse:{systemContext:"You are writing to a life partner with whom there is a committed, enduring bond.",personalityHints:"Reference the journey you've shared, mutual support through challenges, and the depth of partnership beyond romance."},family_parent:{systemContext:"You are communicating with a parent figure who has provided guidance and care.",personalityHints:"Express gratitude for their guidance, acknowledge their sacrifices, and show respect for their wisdom and experience."},family_child:{systemContext:"You are writing to your child with parental love and pride.",personalityHints:"Express unconditional love, pride in their growth, hopes for their future, and supportive encouragement."},family_sibling:{systemContext:"You are communicating with a sibling who shares your family history and experiences.",personalityHints:"Reference shared childhood memories, family traditions, mutual understanding, and sibling bond."},close_friend:{systemContext:"You are writing to a dear friend who knows you deeply and shares significant life experiences.",personalityHints:"Include shared memories, inside references, mutual support, and the comfort of true friendship."},colleague:{systemContext:"You are communicating with a professional colleague in a work context.",personalityHints:"Maintain professional tone while showing appreciation, acknowledge their contributions, and express respect."},mentor:{systemContext:"You are writing to someone who has guided your growth and development.",personalityHints:"Express gratitude for their guidance, acknowledge how they've influenced your path, show respect for their expertise."},student:{systemContext:"You are communicating with someone you have guided or taught.",personalityHints:"Express pride in their progress, offer continued support, and acknowledge their efforts and achievements."},acquaintance:{systemContext:"You are writing to someone you know but don't have a deeply personal relationship with.",personalityHints:"Keep tone appropriate for the level of familiarity, be warm but not overly intimate."}},this.toneModifiers={warm:"Use gentle, caring language that conveys comfort and affection.",playful:"Include light humor, playful language, and a sense of fun and joy.",sincere:"Use earnest, genuine language that conveys deep authenticity.",professional:"Maintain appropriate boundaries while being personable and respectful.",casual:"Use relaxed, conversational language as if speaking naturally.",heartfelt:"Express deep emotions with vulnerability and openness.",encouraging:"Focus on uplifting language that inspires and motivates.",celebratory:"Use joyful, enthusiastic language that marks a special moment.",comforting:"Provide solace and support with gentle, understanding language.",grateful:"Express appreciation and thankfulness throughout the message."},this.occasionContexts={birthday:"This is a celebration of their life and another year of growth and experiences.",anniversary:"This marks a significant milestone in your relationship or their life journey.",graduation:"This celebrates an important achievement and transition to a new chapter.",promotion:"This acknowledges their professional growth and hard work paying off.",wedding:"This celebrates love, commitment, and the beginning of a new life chapter.",holiday:"This connects to the spirit and traditions of the holiday season.",apology:"This seeks to make amends and repair any harm done to the relationship.",congratulations:"This celebrates their success, achievement, or good news.",sympathy:"This offers comfort and support during a difficult time.",thinking_of_you:"This reaches out to let them know they're in your thoughts and heart.",just_because:"This expresses feelings without needing a special occasion as the reason."},this.emotionGuidance={love:"Express deep affection, care, and the importance of this person in your life.",gratitude:"Focus on specific things you appreciate about them and their impact on your life.",pride:"Celebrate their accomplishments and express how proud you are of who they are.",joy:"Share in their happiness and express the delight you feel about their good fortune.",excitement:"Convey enthusiasm about their news, plans, or shared experiences.",hope:"Express optimism about their future and confidence in their abilities.",compassion:"Show understanding, empathy, and support for what they're going through.",admiration:"Express respect for their qualities, actions, or character.",nostalgia:"Reference shared memories and the meaningful history you've built together.",encouragement:"Provide motivation, support, and belief in their capabilities."},this.lengthGuidelines={brief:"Keep the message concise and impactful, around 30-50 words. Focus on one key sentiment.",medium:"Develop 2-3 main points with moderate detail, around 75-125 words.",extended:"Include multiple themes with good detail and examples, around 150-200 words.",detailed:"Create a comprehensive message with rich detail and multiple elements, 250+ words."}}generatePrompt(e){const n=this.relationshipPrompts[e.relationshipType],r=this.toneModifiers[e.tone],s=this.emotionGuidance[e.emotion],i=this.lengthGuidelines[e.messageLength||"medium"];let o="";e.occasion&&(o=this.occasionContexts[e.occasion]);const l=this.buildSystemPrompt(n,r,s,o,i,e),c=this.buildUserPrompt(e),d=this.generateSuggestedElements(e);return{systemPrompt:l,userPrompt:c,context:e,suggestedElements:d}}buildSystemPrompt(e,n,r,s,i,o){return`You are an expert at crafting heartfelt, personalized messages that deeply resonate with recipients.

RELATIONSHIP CONTEXT: ${e.systemContext}

TONE GUIDANCE: ${n}

EMOTIONAL CORE: ${r}

${s?`OCCASION CONTEXT: ${s}`:""}

MESSAGE LENGTH: ${i}

PERSONALIZATION GUIDELINES: ${e.personalityHints}

${o.customContext?`ADDITIONAL CONTEXT: ${o.customContext}`:""}

IMPORTANT: Create a message that feels authentic, personal, and deeply meaningful. Avoid generic phrases and instead focus on specific, heartfelt sentiments that would genuinely touch the recipient.`}buildUserPrompt(e){let n=`Please write a ${e.tone} message `;return e.recipientName&&(n+=`to ${e.recipientName} `),n+=`expressing ${e.emotion}`,e.occasion&&(n+=` for their ${e.occasion}`),n+=`. The relationship is ${e.relationshipType.replace("_"," ")}`,e.messageLength&&(n+=` and the message should be ${e.messageLength} length`),n+=".",n}generateSuggestedElements(e){const n=[];switch(e.relationshipType){case"romantic_partner":case"spouse":n.push("shared memories","future dreams","daily moments","inside jokes");break;case"family_parent":n.push("childhood memories","life lessons learned","gratitude for guidance");break;case"family_child":n.push("pride in growth","unconditional love","hopes for future");break;case"close_friend":n.push("friendship milestones","shared adventures","mutual support");break;case"colleague":n.push("professional achievements","teamwork","mutual respect");break}if(e.occasion)switch(e.occasion){case"birthday":n.push("year in review","birthday wishes","celebration of life");break;case"graduation":n.push("academic journey","future possibilities","achievement recognition");break;case"wedding":n.push("love celebration","future together","commitment honor");break}switch(e.emotion){case"gratitude":n.push("specific examples","impact on life","appreciation details");break;case"love":n.push("reasons why","emotional connection","deep feelings");break;case"pride":n.push("specific accomplishments","character growth","admiration");break}return[...new Set(n)]}getAvailableOptions(){return{relationshipTypes:Object.keys(this.relationshipPrompts),tones:Object.keys(this.toneModifiers),occasions:Object.keys(this.occasionContexts),emotions:Object.keys(this.emotionGuidance),messageLengths:Object.keys(this.lengthGuidelines)}}generateVariations(e,n=3){const r=[],s=this.generatePrompt(e);r.push(s);for(let i=1;i<n;i++){const o={...e},l=this.generatePrompt(o);l.systemPrompt+=`

VARIATION ${i+1}: Focus on a slightly different emotional angle or use alternative phrasing while maintaining the same core sentiment.`,r.push(l)}return r}}const Y9=new Q9;function X9(t,e,n="heartfelt",r={}){return{relationshipType:t,emotion:e,tone:n,...r}}async function J9(t,e,n,r){const s=Z9(e),i=e8(e),o=t8(r),l=X9(s,i,o,{recipientName:t,occasion:n,customContext:`Generate story prompts that will help create ingredients for a personalized message about ${e}`}),c=Y9.generatePrompt(l);return(await(await Po("POST","/api/generate-prompts",{recipientName:t,anchor:e,occasion:n,tone:r,enhancedContext:{systemPrompt:c.systemPrompt,suggestedElements:c.suggestedElements}})).json()).prompts}function Z9(t){const e=t.toLowerCase();return e.includes("love")||e.includes("romantic")?"romantic_partner":e.includes("family")||e.includes("parent")?"family_parent":(e.includes("friend"),"close_friend")}function e8(t){const e=t.toLowerCase();return e.includes("love")?"love":e.includes("grateful")?"gratitude":e.includes("proud")?"pride":e.includes("happy")?"joy":"gratitude"}function t8(t){if(!t)return"heartfelt";const e=t.toLowerCase();return e.includes("warm")?"warm":e.includes("playful")?"playful":e.includes("sincere")?"sincere":"heartfelt"}async function n8(t){return(await(await Po("POST","/api/ai-weave",t)).json()).message}async function r8(t){return(await(await Po("POST","/api/ai-stitch",t)).json()).message}let ao=null,el=null;function s8(){const[t,e]=g.useState(()=>ao&&el?{sessionId:el,session:ao}:{sessionId:localStorage.getItem("creativeFlowSessionId"),session:null}),[n,r]=g.useState("intention"),s=m1();Pn.useEffect(()=>{t.sessionId&&!t.session&&Po("GET",`/api/sessions/${t.sessionId}`).then(v=>v.json()).then(v=>{e(y=>({...y,session:v})),ao=v,el=t.sessionId}).catch(()=>{localStorage.removeItem("creativeFlowSessionId"),e(v=>({...v,sessionId:null})),ao=null,el=null})},[t.sessionId]);const i=Xa({mutationFn:async v=>{const y=crypto.randomUUID();return await(await Po("POST","/api/sessions",{...v,sessionId:y})).json()},onSuccess:v=>{e(y=>({...y,sessionId:v.sessionId,session:v})),localStorage.setItem("creativeFlowSessionId",v.sessionId),ao=v,el=v.sessionId,s.setQueryData(["sessions",v.sessionId],v)}}),o=Xa({mutationFn:async v=>{if(!t.sessionId)throw new Error("No active session");return await(await Po("PATCH",`/api/sessions/${t.sessionId}`,v)).json()},onSuccess:v=>{e(y=>({...y,session:v})),ao=v,s.setQueryData(["sessions",v.sessionId],v)}}),l=Xa({mutationFn:v=>J9(v.recipientName,v.anchor,v.occasion,v.tone),onSuccess:v=>{t.session&&o.mutate({aiGeneratedPrompts:v})}}),c=Xa({mutationFn:n8}),d=Xa({mutationFn:r8}),h=g.useCallback(async v=>{t.sessionId?await o.mutateAsync(v):await i.mutateAsync({recipientName:v.recipientName,anchor:v.anchor,occasion:v.occasion,tone:v.tone,finalMessage:v.finalMessage,aiGeneratedPrompts:[],ingredients:[]})},[t.sessionId,i,o]),f=g.useCallback(async v=>{if(!t.session)return;const y={id:Date.now(),prompt:v.prompt,content:v.content,timestamp:new Date().toISOString()},b=[...t.session.ingredients||[],y];await o.mutateAsync({ingredients:b})},[t.session,o]),p=g.useCallback(async v=>{if(!t.session)return;const y=(t.session.ingredients||[]).filter(b=>b.id!==v);await o.mutateAsync({ingredients:y})},[t.session,o]),_=g.useCallback(async(v,y,b,S)=>{await l.mutateAsync({recipientName:v,anchor:y,occasion:b,tone:S})},[l]),I=g.useCallback(async v=>await c.mutateAsync(v),[c]),x=g.useCallback(async v=>await d.mutateAsync(v),[d]),E=i.isPending||o.isPending||l.isPending||c.isPending||d.isPending;return{state:t,session:t.session,currentStage:n,setCurrentStage:r,updateSession:h,addIngredient:f,removeIngredient:p,generatePrompts:_,aiWeave:I,aiStitch:x,isLoading:E}}function i8({currentStage:t,onStageClick:e}){const n=[{id:"intention",name:"DEFINE"},{id:"reflection",name:"GATHER"},{id:"expression",name:"CRAFT"},{id:"audio",name:"AUDIO HUG"}],r=s=>{const i=n.findIndex(l=>l.id===t),o=n.findIndex(l=>l.id===s);return o<i?"completed":o===i?"current":"upcoming"};return a.jsx("div",{className:"w-full flex justify-center mb-8",children:a.jsx("div",{className:"glass-morphism rounded-full px-8 py-4 flex items-center space-x-6",children:n.map((s,i)=>{const o=r(s.id);return a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:`flex items-center space-x-3 cursor-pointer transition-all duration-300 ${o==="upcoming"?"opacity-50":""}`,onClick:()=>o!=="upcoming"&&e(s.id),children:[a.jsx("div",{className:`w-4 h-4 rounded-full ${o==="completed"?"bg-green-500":o==="current"?"bg-indigo-500":"bg-slate-300"}`}),a.jsx("span",{className:`text-lg font-bold ${o==="completed"?"text-green-700":o==="current"?"text-slate-700":"text-slate-500"}`,children:s.name})]}),i<n.length-1&&a.jsx("div",{className:"w-px h-6 bg-slate-300"})]},s.id)})})})}function Ib(t,[e,n]){return Math.min(n,Math.max(e,t))}function o8(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var a8=[" ","Enter","ArrowUp","ArrowDown"],l8=[" ","Enter"],Ui="Select",[of,af,c8]=_y(Ui),[Aa,M$]=Qs(Ui,[c8,Ch]),lf=Ch(),[u8,ei]=Aa(Ui),[d8,h8]=Aa(Ui),wA=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:_,form:I}=t,x=lf(e),[E,v]=g.useState(null),[y,b]=g.useState(null),[S,j]=g.useState(!1),O=Gv(d),[N,T]=ra({prop:r,defaultProp:s??!1,onChange:i,caller:Ui}),[R,P]=ra({prop:o,defaultProp:l,onChange:c,caller:Ui}),A=g.useRef(null),D=E?I||!!E.closest("form"):!0,[k,z]=g.useState(new Set),Z=Array.from(k).map(Q=>Q.props.value).join(";");return a.jsx(hM,{...x,children:a.jsxs(u8,{required:_,scope:e,trigger:E,onTriggerChange:v,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:As(),value:R,onValueChange:P,open:N,onOpenChange:T,dir:O,triggerPointerDownPosRef:A,disabled:p,children:[a.jsx(of.Provider,{scope:e,children:a.jsx(d8,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(Q=>{z(te=>new Set(te).add(Q))},[]),onNativeOptionRemove:g.useCallback(Q=>{z(te=>{const F=new Set(te);return F.delete(Q),F})},[]),children:n})}),D?a.jsxs(HA,{"aria-hidden":!0,required:_,tabIndex:-1,name:h,autoComplete:f,value:R,onChange:Q=>P(Q.target.value),disabled:p,form:I,children:[R===void 0?a.jsx("option",{value:""}):null,Array.from(k)]},Z):null]})})};wA.displayName=Ui;var _A="SelectTrigger",bA=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=lf(n),o=ei(_A,n),l=o.disabled||r,c=Re(e,o.onTriggerChange),d=af(n),h=g.useRef("touch"),[f,p,_]=GA(x=>{const E=d().filter(b=>!b.disabled),v=E.find(b=>b.value===o.value),y=qA(E,x,v);y!==void 0&&o.onValueChange(y.value)}),I=x=>{l||(o.onOpenChange(!0),_()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(IS,{asChild:!0,...i,children:a.jsx(ce.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":WA(o.value)?"":void 0,...s,ref:c,onClick:ee(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&I(x)}),onPointerDown:ee(s.onPointerDown,x=>{h.current=x.pointerType;const E=x.target;E.hasPointerCapture(x.pointerId)&&E.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(I(x),x.preventDefault())}),onKeyDown:ee(s.onKeyDown,x=>{const E=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(E&&x.key===" ")&&a8.includes(x.key)&&(I(),x.preventDefault())})})})});bA.displayName=_A;var EA="SelectValue",TA=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=ei(EA,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Re(e,c.onValueNodeChange);return xt(()=>{d(h)},[d,h]),a.jsx(ce.span,{...l,ref:f,style:{pointerEvents:"none"},children:WA(c.value)?a.jsx(a.Fragment,{children:o}):i})});TA.displayName=EA;var f8="SelectIcon",SA=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ce.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});SA.displayName=f8;var p8="SelectPortal",IA=t=>a.jsx(wh,{asChild:!0,...t});IA.displayName=p8;var $i="SelectContent",NA=g.forwardRef((t,e)=>{const n=ei($i,t.__scopeSelect),[r,s]=g.useState();if(xt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Hi.createPortal(a.jsx(CA,{scope:t.__scopeSelect,children:a.jsx(of.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(AA,{...t,ref:e})});NA.displayName=$i;var Nn=10,[CA,ti]=Aa($i),m8="SelectContentImpl",g8=na("SelectContent.RemoveScroll"),AA=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:_,sticky:I,hideWhenDetached:x,avoidCollisions:E,...v}=t,y=ei($i,n),[b,S]=g.useState(null),[j,O]=g.useState(null),N=Re(e,X=>S(X)),[T,R]=g.useState(null),[P,A]=g.useState(null),D=af(n),[k,z]=g.useState(!1),Z=g.useRef(!1);g.useEffect(()=>{if(b)return kC(b)},[b]),TC();const Q=g.useCallback(X=>{const[Ne,...rt]=D().map(be=>be.ref.current),[Te]=rt.slice(-1),xe=document.activeElement;for(const be of X)if(be===xe||(be==null||be.scrollIntoView({block:"nearest"}),be===Ne&&j&&(j.scrollTop=0),be===Te&&j&&(j.scrollTop=j.scrollHeight),be==null||be.focus(),document.activeElement!==xe))return},[D,j]),te=g.useCallback(()=>Q([T,b]),[Q,T,b]);g.useEffect(()=>{k&&te()},[k,te]);const{onOpenChange:F,triggerPointerDownPosRef:H}=y;g.useEffect(()=>{if(b){let X={x:0,y:0};const Ne=Te=>{var xe,be;X={x:Math.abs(Math.round(Te.pageX)-(((xe=H.current)==null?void 0:xe.x)??0)),y:Math.abs(Math.round(Te.pageY)-(((be=H.current)==null?void 0:be.y)??0))}},rt=Te=>{X.x<=10&&X.y<=10?Te.preventDefault():b.contains(Te.target)||F(!1),document.removeEventListener("pointermove",Ne),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",rt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",rt,{capture:!0})}}},[b,F,H]),g.useEffect(()=>{const X=()=>F(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[F]);const[Y,ie]=GA(X=>{const Ne=D().filter(xe=>!xe.disabled),rt=Ne.find(xe=>xe.ref.current===document.activeElement),Te=qA(Ne,X,rt);Te&&setTimeout(()=>Te.ref.current.focus())}),de=g.useCallback((X,Ne,rt)=>{const Te=!Z.current&&!rt;(y.value!==void 0&&y.value===Ne||Te)&&(R(X),Te&&(Z.current=!0))},[y.value]),_e=g.useCallback(()=>b==null?void 0:b.focus(),[b]),We=g.useCallback((X,Ne,rt)=>{const Te=!Z.current&&!rt;(y.value!==void 0&&y.value===Ne||Te)&&A(X)},[y.value]),_t=r==="popper"?pg:RA,at=_t===pg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:_,sticky:I,hideWhenDetached:x,avoidCollisions:E}:{};return a.jsx(CA,{scope:n,content:b,viewport:j,onViewportChange:O,itemRefCallback:de,selectedItem:T,onItemLeave:_e,itemTextRefCallback:We,focusSelectedItem:te,selectedItemText:P,position:r,isPositioned:k,searchRef:Y,children:a.jsx(Fv,{as:g8,allowPinchZoom:!0,children:a.jsx(Vv,{asChild:!0,trapped:y.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:ee(s,X=>{var Ne;(Ne=y.trigger)==null||Ne.focus({preventScroll:!0}),X.preventDefault()}),children:a.jsx(hc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(_t,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:X=>X.preventDefault(),...v,...at,onPlaced:()=>z(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ee(v.onKeyDown,X=>{const Ne=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!Ne&&X.key.length===1&&ie(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let Te=D().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const xe=X.target,be=Te.indexOf(xe);Te=Te.slice(be+1)}setTimeout(()=>Q(Te)),X.preventDefault()}})})})})})})});AA.displayName=m8;var y8="SelectItemAlignedPosition",RA=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ei($i,n),o=ti($i,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=Re(e,N=>h(N)),p=af(n),_=g.useRef(!1),I=g.useRef(!0),{viewport:x,selectedItem:E,selectedItemText:v,focusSelectedItem:y}=o,b=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&E&&v){const N=i.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),P=v.getBoundingClientRect();if(i.dir!=="rtl"){const xe=P.left-T.left,be=R.left-xe,lt=N.left-be,Gt=N.width+lt,mr=Math.max(Gt,T.width),qr=window.innerWidth-Nn,ni=Ib(be,[Nn,Math.max(Nn,qr-mr)]);l.style.minWidth=Gt+"px",l.style.left=ni+"px"}else{const xe=T.right-P.right,be=window.innerWidth-R.right-xe,lt=window.innerWidth-N.right-be,Gt=N.width+lt,mr=Math.max(Gt,T.width),qr=window.innerWidth-Nn,ni=Ib(be,[Nn,Math.max(Nn,qr-mr)]);l.style.minWidth=Gt+"px",l.style.right=ni+"px"}const A=p(),D=window.innerHeight-Nn*2,k=x.scrollHeight,z=window.getComputedStyle(d),Z=parseInt(z.borderTopWidth,10),Q=parseInt(z.paddingTop,10),te=parseInt(z.borderBottomWidth,10),F=parseInt(z.paddingBottom,10),H=Z+Q+k+F+te,Y=Math.min(E.offsetHeight*5,H),ie=window.getComputedStyle(x),de=parseInt(ie.paddingTop,10),_e=parseInt(ie.paddingBottom,10),We=N.top+N.height/2-Nn,_t=D-We,at=E.offsetHeight/2,X=E.offsetTop+at,Ne=Z+Q+X,rt=H-Ne;if(Ne<=We){const xe=A.length>0&&E===A[A.length-1].ref.current;l.style.bottom="0px";const be=d.clientHeight-x.offsetTop-x.offsetHeight,lt=Math.max(_t,at+(xe?_e:0)+be+te),Gt=Ne+lt;l.style.height=Gt+"px"}else{const xe=A.length>0&&E===A[0].ref.current;l.style.top="0px";const lt=Math.max(We,Z+x.offsetTop+(xe?de:0)+at)+rt;l.style.height=lt+"px",x.scrollTop=Ne-We+x.offsetTop}l.style.margin=`${Nn}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[p,i.trigger,i.valueNode,l,d,x,E,v,i.dir,r]);xt(()=>b(),[b]);const[S,j]=g.useState();xt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const O=g.useCallback(N=>{N&&I.current===!0&&(b(),y==null||y(),I.current=!1)},[b,y]);return a.jsx(x8,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:O,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:a.jsx(ce.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});RA.displayName=y8;var v8="SelectPopperPosition",pg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Nn,...i}=t,o=lf(n);return a.jsx(NS,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pg.displayName=v8;var[x8,Kv]=Aa($i,{}),mg="SelectViewport",PA=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ti(mg,n),o=Kv(mg,n),l=Re(e,i.onViewportChange),c=g.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(of.Slot,{scope:n,children:a.jsx(ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ee(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const _=Math.abs(c.current-h.scrollTop);if(_>0){const I=window.innerHeight-Nn*2,x=parseFloat(f.style.minHeight),E=parseFloat(f.style.height),v=Math.max(x,E);if(v<I){const y=v+_,b=Math.min(I,y),S=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});PA.displayName=mg;var kA="SelectGroup",[w8,_8]=Aa(kA),b8=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=As();return a.jsx(w8,{scope:n,id:s,children:a.jsx(ce.div,{role:"group","aria-labelledby":s,...r,ref:e})})});b8.displayName=kA;var jA="SelectLabel",DA=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_8(jA,n);return a.jsx(ce.div,{id:s.id,...r,ref:e})});DA.displayName=jA;var Zd="SelectItem",[E8,OA]=Aa(Zd),MA=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=ei(Zd,n),c=ti(Zd,n),d=l.value===r,[h,f]=g.useState(i??""),[p,_]=g.useState(!1),I=Re(e,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,r,s)}),x=As(),E=g.useRef("touch"),v=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(E8,{scope:n,value:r,disabled:s,textId:x,isSelected:d,onItemTextChange:g.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(of.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(ce.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:I,onFocus:ee(o.onFocus,()=>_(!0)),onBlur:ee(o.onBlur,()=>_(!1)),onClick:ee(o.onClick,()=>{E.current!=="mouse"&&v()}),onPointerUp:ee(o.onPointerUp,()=>{E.current==="mouse"&&v()}),onPointerDown:ee(o.onPointerDown,y=>{E.current=y.pointerType}),onPointerMove:ee(o.onPointerMove,y=>{var b;E.current=y.pointerType,s?(b=c.onItemLeave)==null||b.call(c):E.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ee(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ee(o.onKeyDown,y=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&y.key===" "||(l8.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});MA.displayName=Zd;var dl="SelectItemText",LA=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=ei(dl,n),l=ti(dl,n),c=OA(dl,n),d=h8(dl,n),[h,f]=g.useState(null),p=Re(e,v=>f(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),_=h==null?void 0:h.textContent,I=g.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:_},c.value),[c.disabled,c.value,_]),{onNativeOptionAdd:x,onNativeOptionRemove:E}=d;return xt(()=>(x(I),()=>E(I)),[x,E,I]),a.jsxs(a.Fragment,{children:[a.jsx(ce.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hi.createPortal(i.children,o.valueNode):null]})});LA.displayName=dl;var VA="SelectItemIndicator",FA=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return OA(VA,n).isSelected?a.jsx(ce.span,{"aria-hidden":!0,...r,ref:e}):null});FA.displayName=VA;var gg="SelectScrollUpButton",UA=g.forwardRef((t,e)=>{const n=ti(gg,t.__scopeSelect),r=Kv(gg,t.__scopeSelect),[s,i]=g.useState(!1),o=Re(e,r.onScrollButtonChange);return xt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(BA,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});UA.displayName=gg;var yg="SelectScrollDownButton",$A=g.forwardRef((t,e)=>{const n=ti(yg,t.__scopeSelect),r=Kv(yg,t.__scopeSelect),[s,i]=g.useState(!1),o=Re(e,r.onScrollButtonChange);return xt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(BA,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});$A.displayName=yg;var BA=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ti("SelectScrollButton",n),o=g.useRef(null),l=af(n),c=g.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),xt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(ce.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ee(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ee(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ee(s.onPointerLeave,()=>{c()})})}),T8="SelectSeparator",zA=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ce.div,{"aria-hidden":!0,...r,ref:e})});zA.displayName=T8;var vg="SelectArrow",S8=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=lf(n),i=ei(vg,n),o=ti(vg,n);return i.open&&o.position==="popper"?a.jsx(CS,{...s,...r,ref:e}):null});S8.displayName=vg;var I8="SelectBubbleInput",HA=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=Re(r,s),o=o8(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(ce.select,{...n,style:{...T1,...n.style},ref:i,defaultValue:e})});HA.displayName=I8;function WA(t){return t===""||t===void 0}function GA(t){const e=bn(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(o=>{const l=n.current+o;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function qA(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=N8(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function N8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var C8=wA,KA=bA,A8=TA,R8=SA,P8=IA,QA=NA,k8=PA,YA=DA,XA=MA,j8=LA,D8=FA,JA=UA,ZA=$A,eR=zA;const xg=C8,wg=A8,eh=g.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(KA,{ref:r,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(R8,{asChild:!0,children:a.jsx(q1,{className:"h-4 w-4 opacity-50"})})]}));eh.displayName=KA.displayName;const tR=g.forwardRef(({className:t,...e},n)=>a.jsx(JA,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(cD,{className:"h-4 w-4"})}));tR.displayName=JA.displayName;const nR=g.forwardRef(({className:t,...e},n)=>a.jsx(ZA,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(q1,{className:"h-4 w-4"})}));nR.displayName=ZA.displayName;const th=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(P8,{children:a.jsxs(QA,{ref:s,className:ye("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(tR,{}),a.jsx(k8,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(nR,{})]})}));th.displayName=QA.displayName;const O8=g.forwardRef(({className:t,...e},n)=>a.jsx(YA,{ref:n,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));O8.displayName=YA.displayName;const At=g.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(XA,{ref:r,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(D8,{children:a.jsx(Uu,{className:"h-4 w-4"})})}),a.jsx(j8,{children:e})]}));At.displayName=XA.displayName;const M8=g.forwardRef(({className:t,...e},n)=>a.jsx(eR,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",t),...e}));M8.displayName=eR.displayName;function L8({onSubmit:t,isLoading:e}){const[n,r]=g.useState(""),[s,i]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(""),[h,f]=g.useState(""),p=()=>{if(!s.trim()){alert("Please describe the feeling you want to convey");return}t({recipientName:n.trim()||"Someone special",anchor:s.trim(),occasion:o==="other"?c.trim():o||void 0,tone:h||void 0})};return a.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-8 sm:p-12",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:a.jsx(Ew,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-4xl sm:text-5xl font-bold bg-gradient-to-r from-slate-800 to-blue-600 bg-clip-text text-transparent mb-4",children:"Define Your Soul Hug"}),a.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto leading-relaxed",children:"Think of this like a recipe from the heart. We'll gather a few ingredients, then create something honest and real. There's no wrong way to say what matters."})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Ar,{htmlFor:"recipient-name",className:"text-lg font-semibold text-slate-700 flex items-center gap-2",children:[a.jsx(Q1,{className:"w-5 h-5 text-blue-500"}),"Who is this for? (Optional)"]}),a.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"You can write a name, like 'Dad' or 'My neighbor' — or leave it blank."}),a.jsx(ws,{id:"recipient-name",value:n,onChange:_=>r(_.target.value),className:"p-4 border-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-xl text-slate-800 placeholder-slate-400 bg-white/70",placeholder:"Enter their name or leave blank..."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(Ar,{htmlFor:"anchor",className:"text-lg font-semibold text-slate-700 flex items-center gap-2",children:[a.jsx(Ew,{className:"w-5 h-5 text-purple-500"}),"How do you want them to feel when they receive this?"]}),a.jsx(ws,{id:"anchor",value:s,onChange:_=>i(_.target.value),className:"p-4 border-slate-200 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 rounded-xl text-slate-800 placeholder-slate-400 bg-white/70",placeholder:"e.g., deeply appreciated, truly valued, completely loved, genuinely supported..."})]}),a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"cursor-pointer text-lg font-semibold text-slate-600 hover:text-blue-600 transition-colors flex items-center gap-2 p-4 bg-slate-50 rounded-xl",children:[a.jsx(yD,{className:"w-5 h-5"}),"Optional Context",a.jsx("span",{className:"ml-auto text-sm text-slate-400 group-open:hidden",children:"Click to expand"})]}),a.jsxs("div",{className:"mt-6 space-y-6 p-6 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx(Ar,{className:"block text-sm font-semibold text-slate-600 mb-3",children:"Occasion"}),a.jsxs(xg,{value:o,onValueChange:l,children:[a.jsx(eh,{className:"bg-white border-slate-200 rounded-xl",children:a.jsx(wg,{placeholder:"Select occasion..."})}),a.jsxs(th,{children:[a.jsx(At,{value:"birthday",children:"Birthday"}),a.jsx(At,{value:"thank-you",children:"Thank you"}),a.jsx(At,{value:"apology",children:"Apology"}),a.jsx(At,{value:"celebration",children:"Celebration"}),a.jsx(At,{value:"just-because",children:"Just because"}),a.jsx(At,{value:"other",children:"Other"})]})]}),o==="other"&&a.jsx(ws,{value:c,onChange:_=>d(_.target.value),className:"mt-3 bg-white border-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-xl",placeholder:"Please specify the occasion..."})]}),a.jsxs("div",{children:[a.jsx(Ar,{className:"block text-sm font-semibold text-slate-600 mb-3",children:"Tone"}),a.jsxs(xg,{value:h,onValueChange:f,children:[a.jsx(eh,{className:"bg-white border-slate-200 rounded-xl",children:a.jsx(wg,{placeholder:"Select tone..."})}),a.jsxs(th,{children:[a.jsx(At,{value:"heartfelt",children:"Heartfelt"}),a.jsx(At,{value:"playful",children:"Playful"}),a.jsx(At,{value:"formal",children:"Formal"}),a.jsx(At,{value:"casual",children:"Casual"}),a.jsx(At,{value:"humorous",children:"Humorous"})]})]})]})]})]})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsx(De,{onClick:p,disabled:e||!s.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-4 px-12 rounded-xl shadow-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Generating..."]}):"Begin Gathering Ingredients"})})]})}function V8({session:t,onOpenModal:e,onRemoveIngredient:n,onUpdateDescriptors:r,onAddIngredient:s,onBack:i,onContinue:o}){const l=t.aiGeneratedPrompts||[],c=t.ingredients||[],d=t.descriptors||[];return a.jsxs("div",{className:"w-full max-w-7xl mx-auto bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-8 sm:p-12",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:a.jsx(bw,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-4xl sm:text-5xl font-bold bg-gradient-to-r from-slate-800 to-purple-600 bg-clip-text text-transparent mb-4",children:"Gather Your Ingredients"}),a.jsx("p",{className:"text-slate-600 text-lg max-w-2xl mx-auto leading-relaxed",children:"Click to write a story • Drag to add as ingredient"})]}),a.jsxs("div",{className:"space-y-12",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-center text-slate-800 flex items-center justify-center gap-3",children:[a.jsx(bw,{className:"w-6 h-6 text-purple-500"}),"Story Prompts"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(h=>a.jsxs("div",{onClick:()=>e(h.text),draggable:"true",onDragStart:f=>{f.dataTransfer.setData("text/plain",h.text),f.dataTransfer.setData("application/json",JSON.stringify({type:"prompt",prompt:h.text,content:""}))},className:"group bg-white/90 hover:bg-white border border-slate-200 hover:border-purple-300 p-6 rounded-xl shadow-sm hover:shadow-lg cursor-pointer transition-all duration-200 hover:scale-105",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-lg flex items-center justify-center",children:a.jsx(K1,{className:"w-4 h-4 text-white"})}),a.jsx("span",{className:"text-slate-700 font-medium",children:h.text})]})}),a.jsx("div",{className:"mt-3 text-xs text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to write • Drag to add"})]},h.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 flex items-center gap-3",children:[a.jsx(_w,{className:"w-6 h-6 text-blue-500"}),"Your Ingredients"]}),a.jsxs("div",{className:"bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl p-6 min-h-80 transition-colors",onDrop:h=>{h.preventDefault();const f=h.dataTransfer.getData("application/json");if(f)try{const p=JSON.parse(f);p.type==="prompt"&&s({prompt:p.prompt,content:p.content})}catch(p){console.error("Error parsing dropped data:",p)}},onDragOver:h=>{h.preventDefault(),h.currentTarget.classList.add("border-blue-400","bg-blue-50")},onDragLeave:h=>{h.currentTarget.classList.remove("border-blue-400","bg-blue-50")},children:[a.jsxs("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:[c.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_w,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Your stories will appear here"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Drag prompts or write your own stories"})]}):c.map(h=>a.jsx("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:h.prompt}),a.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:h.content})]}),a.jsx("button",{className:"text-red-400 hover:text-red-600 ml-4 p-1",onClick:()=>n(h.id),children:a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})},h.id)),d.length>0&&a.jsx("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ww,{className:"w-5 h-5 text-pink-500 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Selected descriptors"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((h,f)=>a.jsx("span",{className:"inline-flex px-3 py-1.5 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 rounded-full text-xs font-medium",children:h},f))})]})]})})]}),a.jsx("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-slate-200",children:a.jsxs("span",{className:"text-sm text-slate-500",children:[c.length+(d.length>0?1:0)," ingredients collected"]})})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold mb-6 text-slate-800 flex items-center gap-3",children:[a.jsx(ww,{className:"w-6 h-6 text-pink-500"}),"Descriptors"]}),a.jsx("div",{className:"bg-slate-50 rounded-xl p-6 min-h-80",children:a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:["Smart","Caring","Loyal","Funny","Patient","Brave","Creative","Thoughtful","Strong","Loving","Honest","Supportive","Kind","Wise","Generous","Inspiring","Reliable","Adventurous","Compassionate","Witty","Determined","Gentle","Optimistic","Genuine","Resilient","Playful"].map(h=>{const f=d.includes(h);return a.jsx("button",{onClick:()=>{const p=f?d.filter(_=>_!==h):[...d,h];r(p)},className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${f?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-md transform scale-105":"bg-white text-slate-700 border border-slate-200 hover:border-blue-300 hover:bg-blue-50"}`,children:h},h)})})})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-12",children:[a.jsx(De,{onClick:i,variant:"outline",className:"px-8 py-3 text-slate-600 border-slate-300 hover:bg-slate-50",children:"Back"}),a.jsx(De,{onClick:o,disabled:c.length===0,className:"px-12 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:transform-none",children:"Continue to Craft"})]})]})}const cf=g.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));cf.displayName="Textarea";const F8={apiKey:"AIzaSyAy_j8eY964GwySbwz8Ixhqr4Uwq-2ijhI",authDomain:"emotional-978ec.firebaseapp.com",projectId:"emotional-978ec",storageBucket:"emotional-978ec.appspot.com",messagingSenderId:"310774535075",appId:"1:310774535075:web:1e6fd614d3dfde11e1c016",measurementId:"G-LF4GE0RZT9"},U8=By(F8),$8=rC(U8),B8=async({tone:t,relationship:e,occasion:n,message:r,audioUrl:s,imageUrl:i,createdAt:o,userId:l,creditsUsed:c})=>{try{const d=await BF(Sv($8,"soulHugs"),{tone:t,relationship:e,occasion:n,message:r,audioUrl:s,imageUrl:i,createdAt:o||new Date,userId:l,creditsUsed:c});return console.log("Soul Hug saved with ID: ",d.id),d.id}catch(d){throw console.error("Error adding document: ",d),d}};function z8({session:t,onBack:e,onStartOver:n,onAIWeave:r,onAIStitch:s,onUpdateMessage:i,onContinueToAudio:o,isLoading:l}){var P;const[c,d]=g.useState(t.finalMessage||""),[h,f]=g.useState(0),[p,_]=g.useState(0),[I,x]=g.useState("1min"),[E,v]=g.useState(0),[y,b]=g.useState(!1);g.useEffect(()=>{(async()=>{if(pt.currentUser){const D=await cg();v(D)}})()},[]),g.useEffect(()=>{const A=c.trim().split(/\s+/).length;f(c.trim()?A:0),_(Math.ceil(A/200))},[c]),g.useEffect(()=>{t.finalMessage&&d(t.finalMessage)},[t.finalMessage]);const S=A=>{d(A),i(A)},j=()=>{c.trim()&&(navigator.clipboard.writeText(c),alert("Message copied to clipboard!"))},O=()=>{if(c.trim()){const A=new Blob([c],{type:"text/plain"}),D=URL.createObjectURL(A),k=document.createElement("a");k.href=D,k.download=`soul-hug-${t.recipientName.replace(/\s+/g,"-").toLowerCase()}.txt`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(D)}},N=()=>{confirm("Are you sure you want to clear the message?")&&(d(""),i(""))},T=async()=>{const A=pt.currentUser;if(!A){alert("Please sign in to send a Soul Hug.");return}if(c.trim())try{await B8({tone:t.tone||"heartfelt",relationship:t.anchor||"loved one",occasion:t.occasion||"just because",message:c,audioUrl:"",imageUrl:"",createdAt:new Date,userId:A.uid,creditsUsed:1}),alert("Soul Hug sent and saved successfully!"),n()}catch(D){console.error("Failed to save Soul Hug:",D),alert("Soul Hug sent but failed to save. Please try again.")}else alert("Please create a message first.")},R=()=>{localStorage.setItem("creativeFlowSession",JSON.stringify({...t,finalMessage:c})),o()};return a.jsxs("div",{className:"w-full max-w-6xl mx-auto glass-morphism rounded-2xl shadow-2xl p-6 sm:p-8 fade-in",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("i",{className:"fas fa-pen-fancy text-4xl text-teal-500 mb-4"}),a.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold bg-gradient-to-r from-teal-600 to-indigo-600 bg-clip-text text-transparent",children:"CRAFT YOUR SOUL HUG"})]}),a.jsx("p",{className:"text-slate-600 mt-2 text-lg max-w-2xl mx-auto leading-relaxed",children:"Craft your message with heart. You are the director of this process."})]}),a.jsx("div",{className:"glass-secondary p-6 rounded-lg border border-white/50 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[t.descriptors&&t.descriptors.length>0&&a.jsxs("div",{className:"bg-white/90 p-4 rounded-lg border border-slate-200 shadow-sm h-fit",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("h4",{className:"font-semibold text-slate-800 flex items-center",children:[a.jsx("i",{className:"fas fa-tags text-indigo-500 mr-2"}),"Selected Descriptors"]}),a.jsxs("button",{className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium cursor-grab hover:cursor-grabbing active:cursor-grabbing",draggable:"true",onDragStart:A=>{var D;A.dataTransfer.setData("text/plain",((D=t.descriptors)==null?void 0:D.join(", "))||""),A.dataTransfer.effectAllowed="copy"},children:[a.jsx("i",{className:"fas fa-grip-vertical mr-1"}),"Drag to message"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.descriptors.map((A,D)=>a.jsx("span",{className:"inline-flex bg-indigo-100 text-indigo-800 text-xs font-medium px-3 py-2 rounded-full border border-indigo-200 whitespace-nowrap min-w-fit cursor-grab hover:bg-indigo-200 hover:shadow-sm transition-all active:cursor-grabbing",draggable:"true",onDragStart:k=>{k.dataTransfer.setData("text/plain",A),k.dataTransfer.effectAllowed="copy"},children:A},D))})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h4",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[a.jsx("i",{className:"fas fa-puzzle-piece text-teal-500 mr-2"}),"Your Ingredients"]}),a.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:((P=t.ingredients)==null?void 0:P.map(A=>a.jsxs("div",{className:"bg-white/95 p-4 rounded-lg border border-slate-200/50 shadow-sm cursor-grab hover:shadow-md hover:border-teal-300 hover:bg-teal-50/30 transition-all transform hover:scale-[1.02] active:cursor-grabbing",draggable:"true",onDragStart:D=>{const k=A.content&&A.content.trim()&&A.content.trim()!==A.prompt.trim()?A.content:A.prompt;D.dataTransfer.setData("text/plain",k),D.dataTransfer.effectAllowed="copy"},children:[a.jsx("p",{className:"text-xs text-slate-500 mb-1 italic font-medium",children:A.prompt}),A.content&&A.content.trim()&&A.content.trim()!==A.prompt.trim()&&a.jsx("p",{className:"text-sm text-slate-800 leading-relaxed",children:A.content})]},A.id)))||a.jsx("p",{className:"text-slate-500 italic text-sm",children:"No ingredients added yet. Go back to gather some!"})})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white/90 p-6 rounded-lg border border-slate-200 shadow-sm h-full min-h-[500px] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center",children:[a.jsx("i",{className:"fas fa-pen text-teal-500 mr-2"}),"Your Soul Hug Message"]}),a.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsx("span",{className:"text-slate-500",children:"Current:"}),a.jsxs("span",{className:"bg-slate-100 px-2 py-1 rounded",children:[h," words"]}),a.jsxs("span",{className:"bg-slate-100 px-2 py-1 rounded",children:[p," min read"]})]}),I&&a.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[a.jsx("span",{className:"text-purple-600",children:"AI Target:"}),a.jsx("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded",children:I.replace("sec","s").replace("min","m")})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx(cf,{value:c,onChange:A=>S(A.target.value),placeholder:"Begin crafting your Soul Hug here... You can drag ingredients from the left, or start typing your heart's message.",className:"flex-1 min-h-[350px] resize-none border-slate-300 focus:border-teal-500 focus:ring-teal-500 rounded-lg p-4 text-slate-800 leading-relaxed text-base font-serif",style:{fontFamily:'Georgia, "Times New Roman", serif'},onDrop:A=>{A.preventDefault();const D=A.dataTransfer.getData("text/plain");if(D){const z=A.target.selectionStart||c.length,Z=c.trim()?`

`:"",Q=c.slice(0,z)+Z+D+Z+c.slice(z);S(Q)}},onDragOver:A=>{A.preventDefault(),A.dataTransfer.dropEffect="copy"},onDragEnter:A=>{A.preventDefault(),A.target.classList.add("border-teal-400","bg-teal-50")},onDragLeave:A=>{A.preventDefault(),A.target.classList.remove("border-teal-400","bg-teal-50")}}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mt-4",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-xs text-slate-600 mb-1 font-medium",children:"Target Length"}),a.jsxs(xg,{value:I,onValueChange:x,children:[a.jsx(eh,{className:"w-36",children:a.jsx(wg,{})}),a.jsxs(th,{children:[a.jsx(At,{value:"30sec",children:"30s - Short"}),a.jsx(At,{value:"1min",children:"1m - Heartfelt"}),a.jsx(At,{value:"1.5min",children:"1.5m - Detailed"}),a.jsx(At,{value:"2min",children:"2m - Deep"})]})]})]}),a.jsx(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Weave Message button clicked"),r(I)},disabled:l||!t.ingredients||t.ingredients.length===0,size:"sm",className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium px-3 py-2 rounded-lg shadow hover:from-purple-600 hover:to-pink-600 transition-all disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Weaving..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-magic mr-2"}),"Weave"]})}),a.jsx(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("AI Stitch button clicked"),s(c)},disabled:l||!c.trim(),size:"sm",className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white font-medium px-3 py-2 rounded-lg shadow hover:from-amber-600 hover:to-orange-600 transition-all disabled:opacity-50",children:l?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Polishing..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-sparkles mr-2"}),"Polish and Refine"]})}),a.jsxs(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Clear button clicked"),N()},disabled:!c.trim(),size:"sm",variant:"outline",className:"text-slate-600 border-slate-300 hover:bg-slate-50 px-3 py-2 rounded-lg transition-all disabled:opacity-50",children:[a.jsx("i",{className:"fas fa-times mr-1"}),"Clear"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Export button clicked"),O()},disabled:!c.trim(),className:"text-indigo-600 hover:text-indigo-800 font-medium disabled:opacity-50 text-sm transition-colors",children:[a.jsx("i",{className:"fas fa-download mr-1"}),"Export"]}),a.jsxs("button",{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Copy button clicked"),j()},disabled:!c.trim(),className:"text-teal-600 hover:text-teal-800 font-medium disabled:opacity-50 text-sm transition-colors",children:[a.jsx("i",{className:"fas fa-copy mr-1"}),"Copy"]})]})]})]})]})})]})}),a.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-4 mt-8",children:[a.jsxs(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Back button clicked"),e()},variant:"secondary",className:"bg-slate-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-slate-700 transition-all",children:[a.jsx("i",{className:"fas fa-arrow-left mr-2"}),"Back"]}),a.jsxs(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Start Over button clicked"),n()},variant:"outline",className:"border-slate-600 text-slate-600 hover:bg-slate-50 font-bold py-3 px-6 rounded-lg shadow-lg transition-all",children:[a.jsx("i",{className:"fas fa-refresh mr-2"}),"Start Over"]}),a.jsxs(De,{onClick:A=>{A.preventDefault(),A.stopPropagation(),console.log("Send as Message button clicked"),T()},disabled:!c.trim(),className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50",children:[a.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Send as Message"]}),a.jsxs(De,{onClick:()=>{console.log("Continue to Craft Soul Hug button clicked"),c.trim()?R():alert("Please create a message before continuing.")},disabled:!c.trim(),className:"bg-gradient-to-r from-teal-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:from-teal-700 hover:to-indigo-700 transition-transform transform hover:scale-105 disabled:opacity-50",children:[a.jsx("i",{className:"fas fa-arrow-right mr-2"}),"Continue to Craft"]})]})]})}function H8({isOpen:t,onClose:e,onSubmit:n,promptText:r}){const[s,i]=g.useState(""),o=()=>{s.trim()&&(n(s),i(""))},l=()=>{i(""),e()};return a.jsx(JC,{open:t,onOpenChange:l,children:a.jsxs(zv,{className:"glass-morphism border-white/50 max-w-lg",children:[a.jsxs(Hv,{className:"text-center mb-6",children:[a.jsx("i",{className:"fas fa-lightbulb text-yellow-500 text-3xl mb-3"}),a.jsx(Wv,{className:"text-2xl font-bold text-slate-800",children:r}),a.jsx("p",{className:"text-slate-600 mt-2",children:"Let your thoughts flow freely..."})]}),a.jsx(cf,{value:s,onChange:c=>i(c.target.value),className:"w-full h-40 p-4 glass-secondary border-slate-300/70 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 transition-all resize-none",placeholder:"Share your authentic thoughts and memories...",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[a.jsxs(De,{onClick:l,variant:"secondary",className:"bg-slate-200 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-all",children:[a.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]}),a.jsxs(De,{onClick:o,disabled:!s.trim(),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),"Add Ingredient"]})]})]})})}const W8=({current:t})=>{const e=["Define","Gather","Craft","Audio Hug"],n=e.indexOf(t);return a.jsx("div",{className:"flex items-center justify-center mb-8",id:"progress-stepper",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-lg",children:a.jsx("div",{className:"flex items-center space-x-4",children:e.map((r,s)=>{const i=r===t,o=s<n;return a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-4 h-4 rounded-full mr-2 transition-colors duration-300 ${i?"bg-purple-500":o?"bg-green-500":"bg-gray-300"}`}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${i?"text-purple-600":"text-gray-500"}`,children:r.toUpperCase()})]}),s<e.length-1&&a.jsx("div",{className:"w-6 h-px bg-gray-300 ml-4"})]},r)})})})})},G8=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(0),[c,d]=g.useState(!1),h=g.useRef(null),f=g.useRef([]),p=g.useRef(null);g.useEffect(()=>(t?p.current=window.setInterval(()=>l(x=>x+1),1e3):p.current&&(clearInterval(p.current),p.current=null),()=>{p.current&&clearInterval(p.current)}),[t]);const _=async()=>{if(t&&n)n.stop(),e(!1),l(0);else try{const x=await navigator.mediaDevices.getUserMedia({audio:!0}),E=new MediaRecorder(x);E.ondataavailable=v=>f.current.push(v.data),E.onstop=()=>{const v=new Blob(f.current,{type:"audio/webm"}),y=URL.createObjectURL(v);i(y),f.current=[],x.getTracks().forEach(b=>b.stop())},E.start(),r(E),e(!0),i(null)}catch(x){console.error("Microphone access denied:",x),alert("Microphone access denied. Please allow microphone access to record your voice.")}},I=()=>{!h.current||!s||(c?h.current.pause():h.current.play(),d(!c))};return g.useEffect(()=>{if(h.current){const x=h.current,E=()=>d(!1);return x.addEventListener("ended",E),()=>x.removeEventListener("ended",E)}},[s]),a.jsxs("div",{id:"voice-recorder",className:"flex flex-col items-center justify-center p-6 bg-gradient-to-br from-gray-50 to-white rounded-xl shadow-inner border border-gray-100 relative",children:[a.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[a.jsx("div",{className:`absolute inset-0 rounded-full border-4 ${t?"border-red-500 animate-pulse-border":"border-purple-300"} transition-all duration-300`}),a.jsx("button",{onClick:_,className:`relative w-24 h-24 rounded-full flex items-center justify-center transition-all duration-300 transform ${t?"bg-red-500 hover:bg-red-600 scale-105":"bg-purple-500 hover:bg-purple-600"} shadow-xl focus:outline-none focus:ring-4 focus:ring-purple-300 focus:ring-opacity-75`,children:t?a.jsx(Iy,{className:"w-10 h-10 text-white"}):a.jsx(va,{className:"w-10 h-10 text-white"})})]}),a.jsx("p",{className:`mt-4 text-lg font-semibold ${t?"text-red-600":"text-gray-700"}`,children:t?`Recording: ${o}s`:"Tap to Record Your Voice"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:t?"Click again to stop recording.":"Capture your authentic message."}),s&&a.jsxs("div",{className:"w-full max-w-md bg-purple-50 rounded-xl p-4 shadow-md flex flex-col items-center space-y-3 mt-4",children:[a.jsx("audio",{ref:h,src:s,onPlay:()=>d(!0),onPause:()=>d(!1),onEnded:()=>d(!1),className:"hidden"}),a.jsxs("div",{className:"flex items-center space-x-4 w-full",children:[a.jsx("button",{onClick:I,className:"p-3 rounded-full bg-purple-600 text-white hover:bg-purple-700 transition-colors shadow-lg",children:c?a.jsx(Gi,{className:"w-5 h-5"}):a.jsx(qi,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex-1 bg-purple-200 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-400 animate-pulse",style:{width:c?"100%":"0%"}})})]}),a.jsx("div",{className:"flex justify-center space-x-6 mt-3",children:a.jsxs("a",{href:s,download:"soulhug-recording.webm",className:"flex items-center space-x-2 text-purple-600 hover:text-purple-800 transition-colors font-medium",title:"Download Recorded Audio",children:[a.jsx(Gr,{className:"w-5 h-5"}),a.jsx("span",{children:"Download"})]})})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes pulse-border {
          0% { border-color: #ef4444; transform: scale(1); }
          50% { border-color: #dc2626; transform: scale(1.05); }
          100% { border-color: #ef4444; transform: scale(1); }
        }
        .animate-pulse-border {
          animation: pulse-border 1.5s infinite ease-in-out;
        }
      `})]})},q8=({text:t})=>{const[e,n]=g.useState(!1),[r,s]=g.useState(null),[i,o]=g.useState("nova"),[l]=g.useState(!1),[c,d]=g.useState(null),h=g.useRef({}),f=[{id:"nova",name:"Nova (Free)",premium:!1},{id:"shimmer",name:"Shimmer",premium:!0},{id:"echo",name:"Echo",premium:!0},{id:"sage",name:"Sage",premium:!0},{id:"radiant",name:"Radiant",premium:!0},{id:"gentle",name:"Gentle",premium:!0}],p=g.useMemo(()=>t.split(/\s+/).filter(E=>E.length>0).slice(0,10).join(" "),[t]),_=async x=>{var E;if(c&&c!==x&&((E=h.current[c])==null||E.pause(),h.current[c]=null,d(null)),h.current[x]){const v=h.current[x];c===x?(v.pause(),d(null)):(v.play(),d(x));return}try{const v=await fetch("/api/generate-tts?preview=1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p,voice:x})});if(!v.ok)throw new Error("Preview fetch failed");const y=await v.blob(),b=URL.createObjectURL(y),S=new Audio(b);h.current[x]=S,S.onended=()=>{d(null)},S.play(),d(x)}catch(v){console.error("Error playing preview:",v),alert("Failed to play preview. Please try again or check your API setup.")}},I=async()=>{if(!t.trim()){alert("Please enter some text to generate audio.");return}if(!e){n(!0),s(null);try{const x=await fetch("/api/generate-tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,voice:i})});if(!x.ok){const v=await x.json();throw new Error(v.error||"TTS generation failed")}const E=await x.blob();s(URL.createObjectURL(E))}catch(x){console.error("Error generating voice:",x),alert(`Failed to generate voice: ${x.message}. Please try again.`)}finally{n(!1)}}};return g.useEffect(()=>()=>{Object.values(h.current).forEach(x=>{x.pause()}),Object.values(h.current).forEach(x=>{x.src&&URL.revokeObjectURL(x.src)}),r&&URL.revokeObjectURL(r)},[t,r]),a.jsxs("div",{id:"ai-voice-generator",className:"space-y-6 relative",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:f.map(x=>{const E=x.premium&&!l,v=i===x.id;return a.jsxs("div",{className:`relative p-4 rounded-xl border transition-all duration-300 cursor-pointer group shadow-sm hover:shadow-md ${v?"bg-purple-100 border-purple-400 ring-2 ring-purple-300":"bg-white border-gray-200 hover:bg-gray-50"} ${E?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{E||(o(x.id),_(x.id))},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:x.name}),x.premium&&a.jsx("span",{className:"text-xs text-yellow-600 group-hover:underline",children:E?"🔒 Premium":"Premium"})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("button",{className:"text-purple-600 hover:text-purple-800 transition-colors p-1 rounded-full hover:bg-purple-100",onClick:y=>{y.stopPropagation(),E||_(x.id)},disabled:E,children:c===x.id?a.jsx(Gi,{className:"w-6 h-6"}):a.jsx(qi,{className:"w-6 h-6"})}),v&&a.jsx("span",{className:"text-sm text-purple-700 font-semibold animate-pulse",children:"Selected"})]}),E&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 rounded-xl flex items-center justify-center text-center text-xs text-gray-600 font-medium p-4",children:"Upgrade to use this voice"})]},x.id)})}),a.jsxs("button",{onClick:I,disabled:e||!t.trim(),className:"w-full py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center space-x-2 text-lg shadow-md hover:shadow-lg transition-all",children:[a.jsx(vn,{className:"w-5 h-5"}),a.jsx("span",{children:e?"Generating Voice...":"Generate AI Voice"})]}),r&&a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mt-4 border border-green-200 shadow-sm",children:[a.jsx("span",{className:"text-green-700 font-medium block mb-3",children:"AI voice ready!"}),a.jsx("audio",{src:r,controls:!0,className:"w-full"}),a.jsx("div",{className:"flex justify-center mt-3",children:a.jsxs("a",{href:r,download:"soulhug-ai-voice.mp3",className:"flex items-center space-x-2 text-green-600 hover:text-green-800 transition-colors font-medium",title:"Download AI Generated Audio",children:[a.jsx(Gr,{className:"w-5 h-5"}),a.jsx("span",{children:"Download AI Voice"})]})})]})]})},K8=()=>{const[t,e]=g.useState("calm-breeze"),[n,r]=g.useState(80),[s,i]=g.useState(30),[o,l]=g.useState(!1),c=[{id:"calm-breeze",title:"Calm Breeze",isPremium:!1},{id:"soothing-rain",title:"Soothing Rain",isPremium:!1},{id:"premium-dreams",title:"Premium Dreams",isPremium:!0},{id:"ocean-waves",title:"Ocean Waves",isPremium:!0}],d=()=>l(h=>!h);return a.jsxs("div",{id:"audio-mixer",className:"space-y-6 relative",children:[a.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(h=>a.jsx("button",{onClick:()=>e(h.id),className:`p-3 rounded-lg border text-sm transition-colors ${t===h.id?"bg-indigo-100 border-indigo-300 text-indigo-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:h.title}),h.isPremium&&a.jsx("span",{className:"text-xs text-yellow-600",children:"Premium"})]})},h.id))}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 mb-2",children:["Voice Volume: ",n,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:h=>r(parseInt(h.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 mb-2",children:["Music Volume: ",s,"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:h=>i(parseInt(h.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:d,className:"flex items-center space-x-2 px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow",children:[o?a.jsx(Gi,{className:"w-4 h-4"}):a.jsx(qi,{className:"w-4 h-4"}),a.jsx("span",{children:o?"Stop Preview":"Preview Mix"})]}),a.jsxs("button",{className:"flex items-center space-x-2 px-5 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition-colors shadow",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Export"})]})]})]})},Q8=()=>{const[t,e]=g.useState(null),n=[{id:"sunset",title:"Peaceful Sunset",url:"/api/placeholder/150/150"},{id:"flowers",title:"Gentle Flowers",url:"/api/placeholder/150/150"},{id:"mountains",title:"Serene Mountains",url:"/api/placeholder/150/150"},{id:"ocean",title:"Calming Ocean",url:"/api/placeholder/150/150"}];return a.jsxs("div",{id:"image-picker",className:"space-y-4 relative",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:n.map(r=>a.jsxs("button",{onClick:()=>e(r.id),className:`relative rounded-lg overflow-hidden border-2 transition-colors transform hover:scale-105 ${t===r.id?"border-purple-400 ring-2 ring-purple-300":"border-gray-200"} shadow-sm hover:shadow-md`,children:[a.jsx("img",{src:`https://via.placeholder.com/150?text=${r.title.replace(/\s/g,"+")}`,alt:r.title,className:"w-full h-24 object-cover"}),a.jsx("div",{className:"p-2 text-xs font-medium text-center text-gray-700",children:r.title}),t===r.id&&a.jsx("div",{className:"absolute inset-0 bg-purple-500 bg-opacity-20 flex items-center justify-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},r.id))}),a.jsxs("button",{className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-purple-400 hover:text-purple-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("span",{children:"Upload Custom Image"})]}),t&&a.jsx("div",{className:"bg-purple-50 rounded-lg p-3 text-center border border-purple-200",children:a.jsx("span",{className:"text-purple-700 font-medium",children:"Cover image selected!"})})]})},Y8=()=>{const[t,e]=g.useState(""),[n,r]=g.useState(!1),s=()=>{e("https://soullift.app/hug/abc123def456"),r(!1)},i=async()=>{try{await navigator.clipboard.writeText(t),r(!0),setTimeout(()=>r(!1),2e3)}catch(o){console.error("Failed to copy: ",o),alert("Failed to copy URL. Please copy manually.")}};return a.jsxs("div",{id:"delivery-options",className:"space-y-6 relative",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:s,className:"flex items-center justify-center space-x-2 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm hover:shadow-md",children:[a.jsx(Ms,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-gray-800",children:"Generate Share Link"})]}),a.jsxs("button",{className:"flex items-center justify-center space-x-2 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors shadow-sm hover:shadow-md",children:[a.jsx(Ti,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-800",children:"Create QR Code"})]})]}),t&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 shadow-sm",children:[a.jsx("label",{className:"block text-blue-700 font-medium mb-2",children:"Share URL:"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:t,readOnly:!0,className:"flex-1 p-2 bg-white border border-blue-300 rounded text-sm font-mono focus:ring-blue-400 focus:border-blue-400"}),a.jsx("button",{onClick:i,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors relative",children:n?a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{children:"Copied!"})]}):a.jsx("span",{children:"Copy"})})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[" ",a.jsx("button",{className:"w-full py-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-semibold text-lg hover:from-purple-600 hover:to-pink-600 transition-all shadow-xl hover:shadow-2xl transform hover:-translate-y-1",children:"Send Your Soul Hug"})]})]})};function rR(){const t=`Dear Sarah,

I've been thinking about you today and wanted to reach out with a message from my heart to yours. Your kindness has been such a light in my life, and I wanted you to know how deeply appreciated you are.

The way you listen with such genuine care, how you always seem to know exactly what to say when someone is struggling, and your ability to make anyone feel welcomed and valued - these are gifts that touch everyone around you.

You deserve all the love and happiness in the world, and I hope this message serves as a gentle reminder of how wonderful you are.

With love and gratitude`;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-blue-50 to-pink-100 font-sans",children:[" ",a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[a.jsx(W8,{current:"Audio Hug"}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl p-8 mb-10 border border-gray-100 relative",children:[" ",a.jsxs("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-6 drop-shadow-sm",children:[" ","Your Soul Hug Message"]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100 shadow-inner",children:[" ",a.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed font-medium text-lg",children:t})," "]})]}),a.jsxs("div",{className:"space-y-10",children:[" ",a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(va,{className:"w-7 h-7 text-purple-600"})," ",a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Voice Recording"})," "]}),a.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Record your message in your own voice to add a personal touch and authentic emotion."})," ",a.jsx(G8,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(vn,{className:"w-7 h-7 text-blue-600"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"AI Voice Generation"})]}),a.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Let AI narrate your message with natural, expressive voices. Preview options available!"}),a.jsx(q8,{text:t})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(pc,{className:"w-7 h-7 text-indigo-600"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Background Music"})]}),a.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Add ambient music to enhance the emotional impact and set the perfect mood."}),a.jsx(K8,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(kr,{className:"w-7 h-7 text-green-600"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Cover Image"})]}),a.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Choose a beautiful image to accompany your Soul Hug, making it visually appealing."}),a.jsx(Q8,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx(Ms,{className:"w-7 h-7 text-pink-600"}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Share Your Hug"})]}),a.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Send your Soul Hug to your loved ones easily via a shareable link or QR code."}),a.jsx(Y8,{})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-8",children:[a.jsxs(Pr,{href:"/craft-soul-hug",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[a.jsx(Th,{className:"w-4 h-4"}),"Back"]}),a.jsxs(Pr,{href:"/my-hugs",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:["Next ",a.jsx(ko,{className:"w-4 h-4"})]})]})]})]})}function X8(){const{state:t,currentStage:e,setCurrentStage:n,updateSession:r,addIngredient:s,removeIngredient:i,generatePrompts:o,aiWeave:l,aiStitch:c,isLoading:d}=s8(),[h,f]=g.useState(!1),[p,_]=g.useState("");g.useEffect(()=>{const N=vI(pt,T=>{T?console.log("✅ User is signed in:",{uid:T.uid,email:T.email,displayName:T.displayName,photoURL:T.photoURL}):console.log("❌ User is signed out")});return()=>N()},[]);const I=N=>{_(N),f(!0)},x=()=>{f(!1),_("")},E=async N=>{N.trim()&&(await s({prompt:p,content:N.trim()}),x())},v=async N=>{await s(N)},y=async N=>{try{await r(N),await o(N.recipientName,N.anchor,N.occasion,N.tone),n("reflection")}catch(T){console.error("Error setting anchor:",T)}},b=async N=>{if(!t.session){console.error("No session available for AI Weave");return}if(!t.session.ingredients||t.session.ingredients.length===0){alert("Please add some ingredients before weaving a message.");return}try{console.log("Starting AI Weave with:",{recipientName:t.session.recipientName,anchor:t.session.anchor,ingredients:t.session.ingredients});const T=await l({recipientName:t.session.recipientName,anchor:t.session.anchor,ingredients:(t.session.ingredients||[]).map(R=>({prompt:R.prompt,content:R.content})),occasion:t.session.occasion??void 0,tone:t.session.tone??void 0,messageLength:N});console.log("AI Weave result:",T),T&&await r({finalMessage:T})}catch(T){console.error("AI Weave failed:",T),alert("Failed to weave message. Please try again.")}},S=async N=>{if(!t.session){console.error("No session available for AI Stitch");return}if(!N.trim()){alert("Please write a message before trying to polish it.");return}try{console.log("Starting AI Stitch with:",{currentMessage:N,recipientName:t.session.recipientName,anchor:t.session.anchor});const T=await c({currentMessage:N,recipientName:t.session.recipientName,anchor:t.session.anchor});console.log("AI Stitch result:",T),T&&await r({finalMessage:T})}catch(T){console.error("AI Stitch failed:",T),alert("Failed to polish message. Please try again.")}},j=()=>{confirm("Are you sure you want to start over? This will clear all your progress.")&&window.location.reload()},O=()=>{t.session&&localStorage.setItem("creativeFlowSession",JSON.stringify(t.session)),n("audio")};return a.jsxs("div",{className:"text-slate-800 min-h-screen p-4",children:[a.jsx("div",{id:"stage-navigation",children:a.jsx(i8,{currentStage:e,onStageClick:n})}),a.jsxs("div",{className:"flex items-center justify-center",children:[e==="intention"&&a.jsx("div",{id:"anchor-stage",children:a.jsx(L8,{onSubmit:y,isLoading:d})}),e==="reflection"&&t.session&&a.jsx("div",{id:"palette-stage",children:a.jsx(V8,{session:t.session,onOpenModal:I,onRemoveIngredient:i,onUpdateDescriptors:N=>{r({descriptors:N})},onAddIngredient:v,onBack:()=>n("intention"),onContinue:()=>n("expression")})}),e==="expression"&&t.session&&a.jsx("div",{id:"loom-stage",children:a.jsx(z8,{session:t.session,onBack:()=>n("reflection"),onStartOver:j,onAIWeave:b,onAIStitch:S,onUpdateMessage:N=>r({finalMessage:N}),onContinueToAudio:O,isLoading:d})}),e==="audio"&&t.session&&a.jsx("div",{id:"audio-stage",className:"relative w-full",children:a.jsx(rR,{})})]}),a.jsx(H8,{isOpen:h,onClose:x,onSubmit:E,promptText:p}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"glass-morphism rounded-lg p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-800 font-medium",children:"Creating your personalized prompts..."})]})}),a.jsxs("div",{className:"flex justify-between items-center mt-8 px-6",children:[a.jsxs(Pr,{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:[a.jsx(Th,{className:"w-4 h-4"}),"Back"]}),a.jsxs(Pr,{href:"/craft-soul-hug",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors",children:["Next ",a.jsx(ko,{className:"w-4 h-4"})]})]})]})}const ht=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ht.displayName="Card";const Pt=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("flex flex-col space-y-1.5 p-6",t),...e}));Pt.displayName="CardHeader";const kt=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("text-2xl font-semibold leading-none tracking-tight",t),...e}));kt.displayName="CardTitle";const J8=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("text-sm text-muted-foreground",t),...e}));J8.displayName="CardDescription";const ft=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("p-6 pt-0",t),...e}));ft.displayName="CardContent";const Z8=g.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:ye("flex items-center p-6 pt-0",t),...e}));Z8.displayName="CardFooter";const e$=Eh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function sR({className:t,variant:e,...n}){return a.jsx("div",{className:ye(e$({variant:e}),t),...n})}function t$(){const[,t]=ya(),[e,n]=g.useState(""),[r,s]=g.useState([]),[i,o]=g.useState(0);g.useEffect(()=>{try{const p=localStorage.getItem("creativeFlowSession");if(p){const _=JSON.parse(p);_.finalMessage&&n(_.finalMessage),_.ingredients&&s(_.ingredients)}}catch(p){console.error("Error loading session data:",p)}},[]),g.useEffect(()=>{const p=e.trim().split(/\s+/).filter(_=>_.length>0);o(p.length)},[e]);const l=()=>{try{const p=localStorage.getItem("creativeFlowSession");if(p){const _=JSON.parse(p);_.finalMessage=e,localStorage.setItem("creativeFlowSession",JSON.stringify(_))}}catch(p){console.error("Error saving message:",p)}},c=()=>{l(),t("/audio-hug")},d=()=>{l(),t("/creative-flow")},h=()=>{e.trim()&&(navigator.clipboard.writeText(e),alert("Message copied to clipboard!"))},f=()=>{confirm("Are you sure you want to clear the message?")&&n("")};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:a.jsxs("div",{className:"container mx-auto px-6 py-12",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-slate-800 to-blue-600 bg-clip-text text-transparent mb-4",children:"Craft Your Soul Hug"}),a.jsx("p",{className:"text-slate-600 text-xl max-w-3xl mx-auto leading-relaxed",children:"Refine your message with heart. Use your collected ingredients to create something truly meaningful."})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8 max-w-7xl mx-auto",children:[a.jsx("div",{className:"xl:col-span-1",children:a.jsxs(ht,{className:"bg-white/80 backdrop-blur-sm shadow-xl border-0",children:[a.jsx(Pt,{className:"pb-4",children:a.jsxs(kt,{className:"flex items-center gap-3 text-slate-700",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg flex items-center justify-center",children:a.jsx(vD,{className:"w-4 h-4 text-white"})}),"Your Ingredients"]})}),a.jsx(ft,{children:r.length>0?a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.map(p=>a.jsxs("div",{className:"group p-4 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl border border-purple-100 cursor-pointer hover:from-purple-100 hover:to-blue-100 hover:border-purple-200 transition-all duration-200 hover:shadow-md",onClick:()=>{const _=e+(e?`

`:"")+p.content;n(_)},children:[a.jsx("p",{className:"text-xs font-semibold text-purple-600 mb-2 uppercase tracking-wide",children:p.prompt}),a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:p.content}),a.jsx("div",{className:"mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("span",{className:"text-xs text-purple-500 font-medium",children:"Click to add"})})]},p.id))}):a.jsxs("div",{className:"text-center py-12 text-slate-500",children:[a.jsx(pD,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),a.jsx("p",{className:"font-medium mb-1",children:"No ingredients available"}),a.jsx("p",{className:"text-sm",children:"Go back to Creative Flow to gather some!"})]})})]})}),a.jsx("div",{className:"xl:col-span-3",children:a.jsxs(ht,{className:"bg-white/80 backdrop-blur-sm shadow-xl border-0",children:[a.jsx(Pt,{className:"pb-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs(kt,{className:"flex items-center gap-3 text-slate-700",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center",children:a.jsx(gD,{className:"w-4 h-4 text-white"})}),"Your Soul Hug Message"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(sR,{variant:"secondary",className:"bg-slate-100 text-slate-700 px-3 py-1",children:[i," words"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(De,{onClick:h,disabled:!e.trim(),size:"sm",variant:"outline",className:"text-slate-600 border-slate-300 hover:bg-slate-50",children:[a.jsx(hD,{className:"w-4 h-4 mr-1"}),"Copy"]}),a.jsxs(De,{onClick:f,disabled:!e.trim(),size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:[a.jsx(xD,{className:"w-4 h-4 mr-1"}),"Clear"]})]})]})]})}),a.jsxs(ft,{children:[a.jsx(cf,{value:e,onChange:p=>n(p.target.value),placeholder:"Begin crafting your Soul Hug here... Click on ingredients from the left panel to add them, or start typing your heart's message.",className:"min-h-[500px] resize-none border-slate-200 focus:border-blue-400 focus:ring-blue-400 rounded-xl p-6 text-slate-800 leading-relaxed text-lg shadow-inner bg-white/50",style:{fontFamily:'Georgia, "Times New Roman", serif'}}),a.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-100",children:a.jsxs("p",{className:"text-sm text-blue-700 text-center",children:[a.jsx("span",{className:"font-medium",children:"Pro tip:"})," Click on ingredients from the left panel to add them to your message"]})})]})]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-12 max-w-7xl mx-auto",children:[a.jsxs(De,{onClick:d,variant:"outline",className:"flex items-center gap-2 px-6 py-3 text-slate-600 border-slate-300 hover:bg-slate-50",children:[a.jsx(Th,{className:"w-4 h-4"}),"Back to Creative Flow"]}),a.jsxs(De,{onClick:c,disabled:!e.trim(),className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 shadow-lg",children:["Continue to Audio Features",a.jsx(ko,{className:"w-4 h-4"})]})]})]})})}const n$=({current:t})=>{const e=["Define","Gather","Craft","Audio Hug"],n=e.indexOf(t);return a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-lg",children:a.jsx("div",{className:"flex items-center space-x-4",children:e.map((r,s)=>{const i=r===t,o=s<n;return a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-4 h-4 rounded-full mr-2 transition-colors duration-300 ${i?"bg-purple-500":o?"bg-green-500":"bg-gray-300"}`}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${i?"text-purple-600":"text-gray-500"}`,children:r.toUpperCase()})]}),s<e.length-1&&a.jsx("div",{className:"w-6 h-px bg-gray-300 ml-4"})]},r)})})})})},r$=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(0),[c,d]=g.useState(!1),[h,f]=g.useState(0),p=g.useRef(null),_=g.useRef([]),I=g.useRef(null),x=g.useRef(null),E=g.useRef(null);g.useEffect(()=>(t?I.current=window.setInterval(()=>l(S=>S+1),1e3):I.current&&(clearInterval(I.current),I.current=null),()=>{I.current&&clearInterval(I.current),E.current&&cancelAnimationFrame(E.current)}),[t]);const v=()=>{if(x.current){const S=new Uint8Array(x.current.frequencyBinCount);x.current.getByteFrequencyData(S);const j=S.reduce((O,N)=>O+N)/S.length;f(j/255),E.current=requestAnimationFrame(v)}},y=async()=>{if(t&&n)n.stop(),e(!1),l(0),f(0),E.current&&(cancelAnimationFrame(E.current),E.current=null);else try{const S=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new AudioContext,O=j.createMediaStreamSource(S),N=j.createAnalyser();N.fftSize=256,O.connect(N),x.current=N,v();const T=new MediaRecorder(S);T.ondataavailable=R=>_.current.push(R.data),T.onstop=()=>{const R=new Blob(_.current,{type:"audio/webm"}),P=URL.createObjectURL(R);i(P),_.current=[],S.getTracks().forEach(A=>A.stop())},T.start(),r(T),e(!0)}catch(S){console.error("Microphone access denied:",S),alert("Microphone access is required for recording. Please allow microphone access and try again.")}},b=S=>{const j=Math.floor(S/60),O=S%60;return`${j}:${O.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8 border border-purple-100",children:a.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[a.jsxs("div",{className:"relative",children:[t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 rounded-full bg-red-400 animate-ping opacity-20"}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-red-400 animate-pulse opacity-30",style:{transform:`scale(${1+h*.3})`,transition:"transform 0.1s ease-out"}})]}),a.jsx("button",{onClick:y,className:`relative w-24 h-24 rounded-full flex items-center justify-center transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105 ${t?"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700"}`,children:t?a.jsx(Iy,{className:"w-10 h-10 text-white"}):a.jsx(va,{className:"w-10 h-10 text-white"})})]}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:`text-lg font-semibold ${t?"text-red-600":"text-gray-700"}`,children:t?"Recording in progress...":"Ready to record"}),t&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-2xl font-mono font-bold text-red-600",children:b(o)}),a.jsx("div",{className:"flex items-center justify-center space-x-1",children:[...Array(10)].map((S,j)=>a.jsx("div",{className:`w-1 rounded-full transition-all duration-100 ${h*10>j?"bg-red-500 h-8":"bg-gray-300 h-2"}`},j))})]}),!t&&!s&&a.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Tap the microphone to start recording your heartfelt message. Speak naturally and let your emotions flow."})]})]})}),s&&a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"font-semibold text-gray-800",children:"Recording Complete"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("audio",{ref:p,src:s,controls:!0,className:"w-full h-12 rounded-lg",onPlay:()=>d(!0),onPause:()=>d(!1),onEnded:()=>d(!1)}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("button",{onClick:()=>i(null),className:"text-sm text-gray-500 hover:text-red-600 transition-colors",children:"Record Again"})}),a.jsxs("a",{href:s,download:"soulhug-recording.webm",className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]})]})]})]})},s$=({text:t})=>{var E,v;const[e,n]=g.useState(!1),[r,s]=g.useState(null),[i,o]=g.useState("nova"),[l]=g.useState(!1),[c,d]=g.useState(null),[h,f]=g.useState({}),p=[{id:"nova",name:"Nova (Free)",premium:!1},{id:"shimmer",name:"Shimmer",premium:!0},{id:"echo",name:"Echo",premium:!0},{id:"sage",name:"Sage",premium:!0},{id:"radiant",name:"Radiant",premium:!0},{id:"gentle",name:"Gentle",premium:!0}],_=Pn.useMemo(()=>t.split(`
`).filter(b=>b.trim()).slice(0,10).join(" "),[t]),I=async y=>{try{let b=h[y];if(!b){const j=await fetch("/api/generate-tts?preview=1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:_,voice:y})});if(!j.ok)throw new Error("Preview fetch failed");const O=await j.blob();b=URL.createObjectURL(O),f(N=>({...N,[y]:b}))}const S=new Audio(b);d(y),S.play(),S.onended=()=>d(null)}catch(b){console.error(b)}},x=async()=>{if(t.trim()){n(!0);try{const y=await fetch("/api/generate-tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,voice:i})});if(!y.ok)throw new Error("TTS generation failed");const b=await y.blob();s(URL.createObjectURL(b))}catch(y){console.error(y),alert("Failed to generate voice. Please try again.")}finally{n(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:p.map(y=>{const b=y.premium&&!l,S=i===y.id;return y.id,a.jsxs("div",{className:`relative p-4 rounded-xl border transition-all duration-300 cursor-pointer group shadow-sm hover:shadow-lg ${S?"bg-purple-100 border-purple-400 shadow-md":"bg-white border-gray-200 hover:bg-gray-50"} ${b?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{b||(o(y.id),y.id==="nova"&&I("nova"))},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:y.name}),y.premium&&a.jsx("span",{className:"text-xs text-yellow-600 group-hover:underline",children:b?"🔒 Premium":"Premium"})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("button",{className:"text-purple-600 hover:text-purple-800 transition-colors",onClick:j=>{j.stopPropagation(),b||I(y.id)},disabled:b,children:c===y.id?a.jsx(Gi,{className:"w-5 h-5"}):a.jsx(qi,{className:"w-5 h-5"})}),S&&a.jsx("span",{className:"text-sm text-purple-700 font-semibold animate-pulse",children:"Selected"})]}),b&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-80 rounded-xl flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"🔒"}),a.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Upgrade Required"})]})})]},y.id)})}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Generate Your AI Voice"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",(E=p.find(y=>y.id===i))==null?void 0:E.name]})]})]}),a.jsx("button",{onClick:x,disabled:e||!t.trim(),className:`w-full py-4 rounded-xl font-medium text-lg transition-all duration-300 flex items-center justify-center space-x-3 ${e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]"}`,children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Generating Voice..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-5 h-5"}),a.jsx("span",{children:"Generate AI Voice"})]})})]}),r&&a.jsxs("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-green-800",children:"Voice Generated Successfully!"}),a.jsx("p",{className:"text-sm text-green-600",children:"Your Soul Hug is ready to be heard"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"AI Voice Recording"}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Voice: ",(v=p.find(y=>y.id===i))==null?void 0:v.name," • Duration: ~",Math.ceil(t.split(" ").length/150)," min"]})]})]})]})},i$=()=>{const[t,e]=g.useState("calm-breeze"),[n,r]=g.useState(80),[s,i]=g.useState(30),[o,l]=g.useState(!1),c=[{id:"calm-breeze",title:"Calm Breeze",description:"Gentle wind and nature sounds",isPremium:!1},{id:"soothing-rain",title:"Soothing Rain",description:"Light rainfall ambience",isPremium:!1},{id:"premium-dreams",title:"Premium Dreams",description:"Ethereal dreamscape",isPremium:!0},{id:"ocean-waves",title:"Ocean Waves",description:"Peaceful seaside atmosphere",isPremium:!0},{id:"forest-peace",title:"Forest Peace",description:"Woodland tranquility",isPremium:!0},{id:"meditation-bells",title:"Meditation Bells",description:"Soft chimes and harmony",isPremium:!0}],d=()=>l(h=>!h);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Choose Background Music"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map(h=>a.jsxs("button",{onClick:()=>e(h.id),className:`p-4 rounded-xl border text-left transition-all duration-300 hover:shadow-md ${t===h.id?"bg-indigo-50 border-indigo-300 shadow-md":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:h.title}),h.isPremium&&a.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded-full",children:"Premium"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:h.description}),t===h.id&&a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-2"}),a.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Selected"})]})]},h.id))})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Audio Balance"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"flex items-center text-gray-700 font-medium",children:[a.jsx(vn,{className:"w-4 h-4 mr-2"}),"Voice"]}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded-full",children:[n,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:h=>r(parseInt(h.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #6366f1 0%, #6366f1 ${n}%, #e5e7eb ${n}%, #e5e7eb 100%)`}})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"flex items-center text-gray-700 font-medium",children:[a.jsx(pc,{className:"w-4 h-4 mr-2"}),"Background Music"]}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded-full",children:[s,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:h=>i(parseInt(h.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${s}%, #e5e7eb ${s}%, #e5e7eb 100%)`}})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:d,className:`flex items-center justify-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white"}`,children:[o?a.jsx(Gi,{className:"w-5 h-5"}):a.jsx(qi,{className:"w-5 h-5"}),a.jsx("span",{children:o?"Stop Preview":"Preview Mix"})]}),a.jsxs("button",{className:"flex items-center justify-center space-x-2 px-6 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 shadow-lg hover:shadow-xl",children:[a.jsx(Gr,{className:"w-5 h-5"}),a.jsx("span",{children:"Export Audio"})]})]})]})},o$=()=>{var r;const[t,e]=g.useState(null),n=[{id:"sunset",title:"Peaceful Sunset",description:"Warm, calming sunset",color:"from-orange-200 to-pink-300"},{id:"flowers",title:"Gentle Flowers",description:"Soft floral beauty",color:"from-pink-200 to-purple-300"},{id:"mountains",title:"Serene Mountains",description:"Majestic peaks",color:"from-blue-200 to-gray-300"},{id:"ocean",title:"Calming Ocean",description:"Tranquil waters",color:"from-blue-300 to-teal-300"},{id:"forest",title:"Peaceful Forest",description:"Nature's embrace",color:"from-green-200 to-emerald-300"},{id:"starry-night",title:"Starry Night",description:"Celestial wonder",color:"from-indigo-400 to-purple-500"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Choose Cover Image"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map(s=>a.jsxs("button",{onClick:()=>e(s.id),className:`group relative rounded-xl overflow-hidden border-2 transition-all duration-300 hover:shadow-lg ${t===s.id?"border-purple-400 shadow-md ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[a.jsxs("div",{className:`w-full h-28 bg-gradient-to-br ${s.color} flex items-center justify-center relative overflow-hidden`,children:[a.jsx(kr,{className:"w-8 h-8 text-white opacity-80 z-10"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),t===s.id&&a.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:a.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),a.jsxs("div",{className:"p-3 bg-white text-left",children:[a.jsx("div",{className:"font-medium text-gray-800 text-sm",children:s.title}),a.jsx("div",{className:"text-xs text-gray-500",children:s.description})]}),a.jsx("div",{className:"absolute inset-0 bg-purple-500 bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"})]},s.id))})]}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 hover:bg-purple-50 transition-all duration-300 cursor-pointer group",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto group-hover:bg-purple-100 transition-colors",children:a.jsx(kr,{className:"w-6 h-6 text-gray-400 group-hover:text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Upload Custom Image"}),a.jsx("p",{className:"text-sm text-gray-400",children:"PNG, JPG up to 10MB"})]})]})}),t&&a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(kr,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-purple-800",children:"Cover image selected!"}),a.jsx("p",{className:"text-sm text-purple-600",children:(r=n.find(s=>s.id===t))==null?void 0:r.title})]})]})})]})},a$=()=>{const[t,e]=g.useState(""),[n,r]=g.useState(!1),s=()=>{const l=Math.random().toString(36).substring(2,15);e(`https://soullift.app/hug/${l}`)},i=()=>{r(!0)},o=()=>{navigator.clipboard.writeText(t)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Share Your Soul Hug"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:s,className:"group flex items-center justify-center space-x-3 p-6 border border-gray-200 rounded-xl hover:bg-blue-50 hover:border-blue-300 transition-all duration-300 shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:a.jsx(Ms,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Generate Share Link"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Create a shareable URL"})]})]}),a.jsxs("button",{onClick:i,className:"group flex items-center justify-center space-x-3 p-6 border border-gray-200 rounded-xl hover:bg-green-50 hover:border-green-300 transition-all duration-300 shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center group-hover:bg-green-200 transition-colors",children:a.jsx(Ti,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Create QR Code"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Easy phone sharing"})]})]})]})]}),t&&a.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-blue-800",children:"Share URL Generated"}),a.jsx("p",{className:"text-sm text-blue-600",children:"Anyone with this link can experience your Soul Hug"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("input",{type:"text",value:t,readOnly:!0,className:"flex-1 p-3 bg-white border border-blue-200 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"}),a.jsx("button",{onClick:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Copy Link"})]})]}),n&&a.jsxs("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Ti,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-green-800",children:"QR Code Ready"}),a.jsx("p",{className:"text-sm text-green-600",children:"Perfect for in-person sharing"})]})]}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"w-40 h-40 bg-white rounded-lg border-2 border-green-200 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ti,{className:"w-16 h-16 text-green-400 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-gray-500",children:"QR Code Placeholder"})]})})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("button",{className:"w-full py-6 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 text-white rounded-xl font-semibold text-xl hover:from-purple-600 hover:via-pink-600 hover:to-purple-700 transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-[1.02]",children:a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsx(Sy,{className:"w-6 h-6"}),a.jsx("span",{children:"Send Your Soul Hug"}),a.jsx("div",{className:"text-lg",children:"💜"})]})}),a.jsx("p",{className:"text-center text-gray-500 text-sm mt-3",children:"Your heartfelt message will be delivered with love"})]})]})};function l$(){const t=`Dear Sarah,

I've been thinking about you today and wanted to reach out with a message from my heart to yours. Your kindness has been such a light in my life, and I wanted you to know how deeply appreciated you are.

The way you listen with such genuine care, how you always seem to know exactly what to say when someone is struggling, and your ability to make anyone feel welcomed and valued - these are gifts that touch everyone around you.

You deserve all the love and happiness in the world, and I hope this message serves as a gentle reminder of how wonderful you are.

With love and gratitude`;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-blue-50 to-pink-100",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[a.jsx(n$,{current:"Audio Hug"}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl p-8 mb-10",children:[a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-6 text-center",children:"Your Soul Hug Message"}),a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:a.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed font-medium",children:t})})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(va,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Voice Recording"}),a.jsx("p",{className:"text-gray-600",children:"Record your message in your own voice to add a personal touch"})]})]}),a.jsx(r$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"AI Voice Generation"}),a.jsx("p",{className:"text-gray-600",children:"Let AI narrate your message with natural, expressive voices"})]})]}),a.jsx(s$,{text:t})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(pc,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Background Music"}),a.jsx("p",{className:"text-gray-600",children:"Add ambient music to enhance the emotional impact"})]})]}),a.jsx(i$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(kr,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cover Image"}),a.jsx("p",{className:"text-gray-600",children:"Choose a beautiful image to accompany your Soul Hug"})]})]}),a.jsx(o$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(Ms,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Share Your Hug"}),a.jsx("p",{className:"text-gray-600",children:"Send your Soul Hug to the world and spread love"})]})]}),a.jsx(a$,{})]})]})]})})}const c$=({current:t})=>{const e=["Define","Gather","Craft","Audio Hug"],n=e.indexOf(t);return a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-full px-6 py-3 shadow-lg",children:a.jsx("div",{className:"flex items-center space-x-4",children:e.map((r,s)=>{const i=r===t,o=s<n;return a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-4 h-4 rounded-full mr-2 transition-colors duration-300 ${i?"bg-purple-500":o?"bg-green-500":"bg-gray-300"}`}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${i?"text-purple-600":"text-gray-500"}`,children:r.toUpperCase()})]}),s<e.length-1&&a.jsx("div",{className:"w-6 h-px bg-gray-300 ml-4"})]},r)})})})})},u$=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(null),[s,i]=g.useState(null),[o,l]=g.useState(0),[c,d]=g.useState(!1),[h,f]=g.useState(0),p=g.useRef(null),_=g.useRef([]),I=g.useRef(null),x=g.useRef(null),E=g.useRef(null);g.useEffect(()=>(t?I.current=window.setInterval(()=>l(S=>S+1),1e3):I.current&&(clearInterval(I.current),I.current=null),()=>{I.current&&clearInterval(I.current),E.current&&cancelAnimationFrame(E.current)}),[t]);const v=()=>{if(x.current){const S=new Uint8Array(x.current.frequencyBinCount);x.current.getByteFrequencyData(S);const j=S.reduce((O,N)=>O+N)/S.length;f(j/255),E.current=requestAnimationFrame(v)}},y=async()=>{if(t&&n)n.stop(),e(!1),l(0),f(0),E.current&&(cancelAnimationFrame(E.current),E.current=null);else try{const S=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new AudioContext,O=j.createMediaStreamSource(S),N=j.createAnalyser();N.fftSize=256,O.connect(N),x.current=N,v();const T=new MediaRecorder(S);T.ondataavailable=R=>_.current.push(R.data),T.onstop=()=>{const R=new Blob(_.current,{type:"audio/webm"}),P=URL.createObjectURL(R);i(P),_.current=[],S.getTracks().forEach(A=>A.stop())},T.start(),r(T),e(!0)}catch(S){console.error("Microphone access denied:",S),alert("Microphone access is required for recording. Please allow microphone access and try again.")}},b=S=>{const j=Math.floor(S/60),O=S%60;return`${j}:${O.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8 border border-purple-100",children:a.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[a.jsxs("div",{className:"relative",children:[t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 rounded-full bg-red-400 animate-ping opacity-20"}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-red-400 animate-pulse opacity-30",style:{transform:`scale(${1+h*.3})`,transition:"transform 0.1s ease-out"}})]}),a.jsx("button",{onClick:y,className:`relative w-24 h-24 rounded-full flex items-center justify-center transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-105 ${t?"bg-gradient-to-br from-red-500 to-red-600 hover:from-red-600 hover:to-red-700":"bg-gradient-to-br from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700"}`,children:t?a.jsx(Iy,{className:"w-10 h-10 text-white"}):a.jsx(va,{className:"w-10 h-10 text-white"})})]}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:`text-lg font-semibold ${t?"text-red-600":"text-gray-700"}`,children:t?"Recording in progress...":"Ready to record"}),t&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-2xl font-mono font-bold text-red-600",children:b(o)}),a.jsx("div",{className:"flex items-center justify-center space-x-1",children:[...Array(10)].map((S,j)=>a.jsx("div",{className:`w-1 rounded-full transition-all duration-100 ${h*10>j?"bg-red-500 h-8":"bg-gray-300 h-2"}`},j))})]}),!t&&!s&&a.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"Tap the microphone to start recording your heartfelt message. Speak naturally and let your emotions flow."})]})]})}),s&&a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),a.jsx("span",{className:"font-semibold text-gray-800",children:"Recording Complete"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("audio",{ref:p,src:s,controls:!0,className:"w-full h-12 rounded-lg",onPlay:()=>d(!0),onPause:()=>d(!1),onEnded:()=>d(!1)}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("button",{onClick:()=>i(null),className:"text-sm text-gray-500 hover:text-red-600 transition-colors",children:"Record Again"})}),a.jsxs("a",{href:s,download:"soulhug-recording.webm",className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]})]})]})]})},d$=({text:t})=>{var E,v;const[e,n]=g.useState(!1),[r,s]=g.useState(null),[i,o]=g.useState("nova"),[l]=g.useState(!1),[c,d]=g.useState(null),[h,f]=g.useState({}),p=[{id:"nova",name:"Nova (Free)",premium:!1},{id:"shimmer",name:"Shimmer",premium:!0},{id:"echo",name:"Echo",premium:!0},{id:"sage",name:"Sage",premium:!0},{id:"radiant",name:"Radiant",premium:!0},{id:"gentle",name:"Gentle",premium:!0}],_=Pn.useMemo(()=>t.split(`
`).filter(b=>b.trim()).slice(0,10).join(" "),[t]),I=async y=>{try{let b=h[y];if(!b){const j=await fetch("/api/generate-tts?preview=1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:_,voice:y})});if(!j.ok)throw new Error("Preview fetch failed");const O=await j.blob();b=URL.createObjectURL(O),f(N=>({...N,[y]:b}))}const S=new Audio(b);d(y),S.play(),S.onended=()=>d(null)}catch(b){console.error(b)}},x=async()=>{if(t.trim()){n(!0);try{const y=await fetch("/api/generate-tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t,voice:i})});if(!y.ok)throw new Error("TTS generation failed");const b=await y.blob();s(URL.createObjectURL(b))}catch(y){console.error(y),alert("Failed to generate voice. Please try again.")}finally{n(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:p.map(y=>{const b=y.premium&&!l,S=i===y.id;return y.id,a.jsxs("div",{className:`relative p-4 rounded-xl border transition-all duration-300 cursor-pointer group shadow-sm hover:shadow-lg ${S?"bg-purple-100 border-purple-400 shadow-md":"bg-white border-gray-200 hover:bg-gray-50"} ${b?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{b||(o(y.id),y.id==="nova"&&I("nova"))},children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:y.name}),y.premium&&a.jsx("span",{className:"text-xs text-yellow-600 group-hover:underline",children:b?"🔒 Premium":"Premium"})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("button",{className:"text-purple-600 hover:text-purple-800 transition-colors",onClick:j=>{j.stopPropagation(),b||I(y.id)},disabled:b,children:c===y.id?a.jsx(Gi,{className:"w-5 h-5"}):a.jsx(qi,{className:"w-5 h-5"})}),S&&a.jsx("span",{className:"text-sm text-purple-700 font-semibold animate-pulse",children:"Selected"})]}),b&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-80 rounded-xl flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl mb-1",children:"🔒"}),a.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Upgrade Required"})]})})]},y.id)})}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:"Generate Your AI Voice"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",(E=p.find(y=>y.id===i))==null?void 0:E.name]})]})]}),a.jsx("button",{onClick:x,disabled:e||!t.trim(),className:`w-full py-4 rounded-xl font-medium text-lg transition-all duration-300 flex items-center justify-center space-x-3 ${e?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-[1.02]"}`,children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Generating Voice..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(vn,{className:"w-5 h-5"}),a.jsx("span",{children:"Generate AI Voice"})]})})]}),r&&a.jsxs("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-green-800",children:"Voice Generated Successfully!"}),a.jsx("p",{className:"text-sm text-green-600",children:"Your Soul Hug is ready to be heard"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"AI Voice Recording"}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Voice: ",(v=p.find(y=>y.id===i))==null?void 0:v.name," • Duration: ~",Math.ceil(t.split(" ").length/150)," min"]})]})]})]})},h$=()=>{const[t,e]=g.useState("calm-breeze"),[n,r]=g.useState(80),[s,i]=g.useState(30),[o,l]=g.useState(!1),c=[{id:"calm-breeze",title:"Calm Breeze",description:"Gentle wind and nature sounds",isPremium:!1},{id:"soothing-rain",title:"Soothing Rain",description:"Light rainfall ambience",isPremium:!1},{id:"premium-dreams",title:"Premium Dreams",description:"Ethereal dreamscape",isPremium:!0},{id:"ocean-waves",title:"Ocean Waves",description:"Peaceful seaside atmosphere",isPremium:!0},{id:"forest-peace",title:"Forest Peace",description:"Woodland tranquility",isPremium:!0},{id:"meditation-bells",title:"Meditation Bells",description:"Soft chimes and harmony",isPremium:!0}],d=()=>l(h=>!h);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Choose Background Music"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:c.map(h=>a.jsxs("button",{onClick:()=>e(h.id),className:`p-4 rounded-xl border text-left transition-all duration-300 hover:shadow-md ${t===h.id?"bg-indigo-50 border-indigo-300 shadow-md":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"font-medium text-gray-800",children:h.title}),h.isPremium&&a.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded-full",children:"Premium"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:h.description}),t===h.id&&a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-2"}),a.jsx("span",{className:"text-xs text-indigo-600 font-medium",children:"Selected"})]})]},h.id))})]}),a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Audio Balance"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"flex items-center text-gray-700 font-medium",children:[a.jsx(vn,{className:"w-4 h-4 mr-2"}),"Voice"]}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded-full",children:[n,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:h=>r(parseInt(h.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #6366f1 0%, #6366f1 ${n}%, #e5e7eb ${n}%, #e5e7eb 100%)`}})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"flex items-center text-gray-700 font-medium",children:[a.jsx(pc,{className:"w-4 h-4 mr-2"}),"Background Music"]}),a.jsxs("span",{className:"text-sm text-gray-600 bg-white px-2 py-1 rounded-full",children:[s,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:h=>i(parseInt(h.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${s}%, #e5e7eb ${s}%, #e5e7eb 100%)`}})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:d,className:`flex items-center justify-center space-x-2 px-6 py-3 rounded-xl font-medium transition-all duration-300 shadow-lg hover:shadow-xl ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white"}`,children:[o?a.jsx(Gi,{className:"w-5 h-5"}):a.jsx(qi,{className:"w-5 h-5"}),a.jsx("span",{children:o?"Stop Preview":"Preview Mix"})]}),a.jsxs("button",{className:"flex items-center justify-center space-x-2 px-6 py-3 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 shadow-lg hover:shadow-xl",children:[a.jsx(Gr,{className:"w-5 h-5"}),a.jsx("span",{children:"Export Audio"})]})]})]})},f$=()=>{var r;const[t,e]=g.useState(null),n=[{id:"sunset",title:"Peaceful Sunset",description:"Warm, calming sunset",color:"from-orange-200 to-pink-300"},{id:"flowers",title:"Gentle Flowers",description:"Soft floral beauty",color:"from-pink-200 to-purple-300"},{id:"mountains",title:"Serene Mountains",description:"Majestic peaks",color:"from-blue-200 to-gray-300"},{id:"ocean",title:"Calming Ocean",description:"Tranquil waters",color:"from-blue-300 to-teal-300"},{id:"forest",title:"Peaceful Forest",description:"Nature's embrace",color:"from-green-200 to-emerald-300"},{id:"starry-night",title:"Starry Night",description:"Celestial wonder",color:"from-indigo-400 to-purple-500"}];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Choose Cover Image"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map(s=>a.jsxs("button",{onClick:()=>e(s.id),className:`group relative rounded-xl overflow-hidden border-2 transition-all duration-300 hover:shadow-lg ${t===s.id?"border-purple-400 shadow-md ring-2 ring-purple-200":"border-gray-200 hover:border-purple-300"}`,children:[a.jsxs("div",{className:`w-full h-28 bg-gradient-to-br ${s.color} flex items-center justify-center relative overflow-hidden`,children:[a.jsx(kr,{className:"w-8 h-8 text-white opacity-80 z-10"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),t===s.id&&a.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:a.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]}),a.jsxs("div",{className:"p-3 bg-white text-left",children:[a.jsx("div",{className:"font-medium text-gray-800 text-sm",children:s.title}),a.jsx("div",{className:"text-xs text-gray-500",children:s.description})]}),a.jsx("div",{className:"absolute inset-0 bg-purple-500 bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"})]},s.id))})]}),a.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 hover:bg-purple-50 transition-all duration-300 cursor-pointer group",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto group-hover:bg-purple-100 transition-colors",children:a.jsx(kr,{className:"w-6 h-6 text-gray-400 group-hover:text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 font-medium",children:"Upload Custom Image"}),a.jsx("p",{className:"text-sm text-gray-400",children:"PNG, JPG up to 10MB"})]})]})}),t&&a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(kr,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-purple-800",children:"Cover image selected!"}),a.jsx("p",{className:"text-sm text-purple-600",children:(r=n.find(s=>s.id===t))==null?void 0:r.title})]})]})})]})},p$=()=>{const[t,e]=g.useState(""),[n,r]=g.useState(!1),s=()=>{const l=Math.random().toString(36).substring(2,15);e(`https://soullift.app/hug/${l}`)},i=()=>{r(!0)},o=()=>{navigator.clipboard.writeText(t)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Share Your Soul Hug"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:s,className:"group flex items-center justify-center space-x-3 p-6 border border-gray-200 rounded-xl hover:bg-blue-50 hover:border-blue-300 transition-all duration-300 shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:a.jsx(Ms,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Generate Share Link"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Create a shareable URL"})]})]}),a.jsxs("button",{onClick:i,className:"group flex items-center justify-center space-x-3 p-6 border border-gray-200 rounded-xl hover:bg-green-50 hover:border-green-300 transition-all duration-300 shadow-sm hover:shadow-md",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center group-hover:bg-green-200 transition-colors",children:a.jsx(Ti,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"font-medium text-gray-800",children:"Create QR Code"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Easy phone sharing"})]})]})]})]}),t&&a.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-blue-800",children:"Share URL Generated"}),a.jsx("p",{className:"text-sm text-blue-600",children:"Anyone with this link can experience your Soul Hug"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("input",{type:"text",value:t,readOnly:!0,className:"flex-1 p-3 bg-white border border-blue-200 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-blue-400"}),a.jsx("button",{onClick:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Copy Link"})]})]}),n&&a.jsxs("div",{className:"bg-green-50 rounded-xl p-6 border border-green-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Ti,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-green-800",children:"QR Code Ready"}),a.jsx("p",{className:"text-sm text-green-600",children:"Perfect for in-person sharing"})]})]}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"w-40 h-40 bg-white rounded-lg border-2 border-green-200 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ti,{className:"w-16 h-16 text-green-400 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-gray-500",children:"QR Code Placeholder"})]})})})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("button",{className:"w-full py-6 bg-gradient-to-r from-purple-500 via-pink-500 to-purple-600 text-white rounded-xl font-semibold text-xl hover:from-purple-600 hover:via-pink-600 hover:to-purple-700 transition-all duration-300 shadow-xl hover:shadow-2xl transform hover:scale-[1.02]",children:a.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[a.jsx(Sy,{className:"w-6 h-6"}),a.jsx("span",{children:"Send Your Soul Hug"}),a.jsx("div",{className:"text-lg",children:"💜"})]})}),a.jsx("p",{className:"text-center text-gray-500 text-sm mt-3",children:"Your heartfelt message will be delivered with love"})]})]})};function m$(){const t=`Dear Sarah,

I've been thinking about you today and wanted to reach out with a message from my heart to yours. Your kindness has been such a light in my life, and I wanted you to know how deeply appreciated you are.

The way you listen with such genuine care, how you always seem to know exactly what to say when someone is struggling, and your ability to make anyone feel welcomed and valued - these are gifts that touch everyone around you.

You deserve all the love and happiness in the world, and I hope this message serves as a gentle reminder of how wonderful you are.

With love and gratitude`;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 via-blue-50 to-pink-100",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-10",children:[a.jsx(c$,{current:"Audio Hug"}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-3xl shadow-xl p-8 mb-10",children:[a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-6 text-center",children:"Your Soul Hug Message"}),a.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-100",children:a.jsx("p",{className:"text-gray-700 whitespace-pre-line leading-relaxed font-medium",children:t})})]}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(va,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Voice Recording"}),a.jsx("p",{className:"text-gray-600",children:"Record your message in your own voice to add a personal touch"})]})]}),a.jsx(u$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(vn,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"AI Voice Generation"}),a.jsx("p",{className:"text-gray-600",children:"Let AI narrate your message with natural, expressive voices"})]})]}),a.jsx(d$,{text:t})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(pc,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Background Music"}),a.jsx("p",{className:"text-gray-600",children:"Add ambient music to enhance the emotional impact"})]})]}),a.jsx(h$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(kr,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Cover Image"}),a.jsx("p",{className:"text-gray-600",children:"Choose a beautiful image to accompany your Soul Hug"})]})]}),a.jsx(f$,{})]}),a.jsxs("section",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:a.jsx(Ms,{className:"w-5 h-5 text-pink-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Share Your Hug"}),a.jsx("p",{className:"text-gray-600",children:"Send your Soul Hug to the world and spread love"})]})]}),a.jsx(p$,{})]})]})]})})}function g$(){const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState({search:"",relationship:"",tone:"",occasion:""}),[o,l]=g.useState(!0),[c,d]=g.useState(null),[h,f]=ya(),[p,_]=g.useState(null);g.useEffect(()=>{const S=pt.onAuthStateChanged(j=>{l(!1),j?(d(j),I(j.uid)):d(null)});return()=>S()},[]);const I=async S=>{l(!0);const j=OF(Sv(Vi,"soulHugs"),MF("userId","==",S)),N=(await mC(j)).docs.map(T=>({id:T.id,...T.data()}));e(N),r(N),l(!1)},x=(S,j)=>{const O={...s,[S]:j};i(O),E(O)},E=S=>{let j=[...t];S.search&&(j=j.filter(O=>O.message.toLowerCase().includes(S.search.toLowerCase()))),S.relationship&&(j=j.filter(O=>O.relationship===S.relationship)),S.tone&&(j=j.filter(O=>O.tone===S.tone)),S.occasion&&(j=j.filter(O=>O.occasion===S.occasion)),r(j)},v=async(S,j)=>{if(confirm(`Are you sure you want to delete "${j}"?`))try{await $F(Ca(Vi,"soulHugs",S)),e(O=>O.filter(N=>N.id!==S)),r(O=>O.filter(N=>N.id!==S))}catch(O){console.error("Error deleting hug:",O),alert("Failed to delete Soul Hug. Please try again.")}},y=S=>{const j=`${window.location.origin}/hug/${S}`;navigator.clipboard.writeText(j).then(()=>{alert("Link copied to clipboard!")}).catch(()=>{alert("Failed to copy link. Please try again.")})},b=(S,j)=>{const O=`${window.location.origin}/hug/${S}`,N=encodeURIComponent("Your Soul Hug"),T=encodeURIComponent(`I created a personalized Soul Hug for you:

"${j.substring(0,100)}..."

Open your Soul Hug here: ${O}`);window.location.href=`mailto:?subject=${N}&body=${T}`};return o?a.jsx("div",{className:"p-6 text-white bg-gradient-to-br from-purple-900 to-indigo-800 min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),a.jsx("p",{children:"Loading..."})]})}):c?a.jsxs("div",{className:"p-6 text-white bg-gradient-to-br from-purple-900 to-indigo-800 min-h-screen",children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"My Soul Hugs"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-6",children:[a.jsx("input",{type:"text",placeholder:"Search by message",value:s.search,onChange:S=>x("search",S.target.value),className:"p-2 rounded text-black"}),a.jsxs("select",{value:s.relationship,onChange:S=>x("relationship",S.target.value),className:"p-2 rounded text-black",children:[a.jsx("option",{value:"",children:"All Relationships"}),a.jsx("option",{value:"Partner",children:"Partner"}),a.jsx("option",{value:"Friend",children:"Friend"}),a.jsx("option",{value:"Mom",children:"Mom"}),a.jsx("option",{value:"Dad",children:"Dad"}),a.jsx("option",{value:"Child",children:"Child"})]}),a.jsxs("select",{value:s.tone,onChange:S=>x("tone",S.target.value),className:"p-2 rounded text-black",children:[a.jsx("option",{value:"",children:"All Tones"}),a.jsx("option",{value:"Warm",children:"Warm"}),a.jsx("option",{value:"Empowering",children:"Empowering"}),a.jsx("option",{value:"Reassuring",children:"Reassuring"})]}),a.jsxs("select",{value:s.occasion,onChange:S=>x("occasion",S.target.value),className:"p-2 rounded text-black",children:[a.jsx("option",{value:"",children:"All Occasions"}),a.jsx("option",{value:"Birthday",children:"Birthday"}),a.jsx("option",{value:"Grief",children:"Grief"}),a.jsx("option",{value:"Motivation",children:"Motivation"}),a.jsx("option",{value:"Hard Day",children:"Hard Day"})]})]}),n.length===0?a.jsx("p",{className:"text-gray-300",children:"You haven't saved any Soul Hugs yet."}):a.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(S=>{var j;return a.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[a.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:S.relationship}),a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:S.tone}),S.occasion&&a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full",children:S.occasion})]}),a.jsx("p",{className:"text-white text-sm line-clamp-3",children:S.message}),S.audioUrl&&a.jsxs("audio",{controls:!0,className:"w-full h-8",children:[a.jsx("source",{src:S.audioUrl,type:"audio/mp3"}),a.jsx("source",{src:S.audioUrl,type:"audio/wav"}),"Your browser does not support audio playback."]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-300",children:[S.audioUrl&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Audio"]}),S.imageUrl&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Image"]}),S.createdAt&&a.jsx("span",{children:(j=S.createdAt)!=null&&j.toDate?S.createdAt.toDate().toLocaleDateString():"Recent"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-white/20",children:[!S.audioUrl&&a.jsx(Pr,{href:`/hug/${S.id}/record`,children:a.jsx("button",{className:"bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded text-xs transition-colors",children:"Add Voice"})}),a.jsx("button",{onClick:()=>y(S.id),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs transition-colors",children:"Copy Link"}),a.jsx("button",{onClick:()=>b(S.id,S.message),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-xs transition-colors",children:"Email"}),a.jsx("button",{onClick:()=>_(p===S.id?null:S.id),className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs transition-colors",children:"Share URL"}),a.jsx("button",{onClick:()=>v(S.id,`${S.relationship} - ${S.tone}`),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-xs transition-colors ml-auto",children:"Delete"})]}),p===S.id&&a.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-300 text-center",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Share this URL:"}),a.jsxs("div",{className:"bg-gray-100 p-2 rounded text-xs break-all text-gray-800",children:[window.location.origin,"/hug/",S.id]}),a.jsx("button",{onClick:()=>y(S.id),className:"mt-2 text-xs bg-blue-500 text-white px-2 py-1 rounded",children:"Copy URL"})]})]})},S.id)})}),a.jsx("div",{className:"flex justify-start mt-8",children:a.jsxs(Pr,{href:"/audio-hug",className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors",children:[a.jsx(Th,{className:"w-4 h-4"}),"Back"]})})]}):a.jsx("div",{className:"p-6 text-white bg-gradient-to-br from-purple-900 to-indigo-800 min-h-screen",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20",children:[a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"My Soul Hugs"}),a.jsx("p",{className:"text-gray-300 mb-8",children:"Please sign in to view your saved Soul Hugs"}),a.jsx("div",{className:"space-y-4",children:a.jsx("button",{onClick:()=>f("/"),className:"bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg border border-white/40 transition-all",children:"Back to Home"})})]})})}function y$(){var f;const[t,e]=k2("/hug/:id"),[n,r]=ya(),s=e==null?void 0:e.id,[i,o]=g.useState(null),[l,c]=g.useState(!0),[d,h]=g.useState(null);return g.useEffect(()=>{async function p(){if(!s){h("No Hug ID provided."),c(!1);return}try{const _=Ca(Vi,"soulHugs",s),I=await ef(_);I.exists()?o({id:I.id,...I.data()}):h("Soul Hug not found.")}catch(_){h(_.message||"Failed to load Soul Hug.")}finally{c(!1)}}p()},[s]),l?a.jsx("p",{className:"p-6 text-white",children:"Loading Soul Hug..."}):d?a.jsxs("p",{className:"p-6 text-red-400",children:["Error: ",d]}):i?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-700 to-blue-900 text-white p-6",children:[a.jsx("button",{onClick:()=>window.history.back(),className:"mb-4 px-4 py-2 bg-white/20 rounded",children:"Back"}),i.imageUrl&&a.jsx("img",{src:i.imageUrl,alt:"Cover",className:"w-full max-w-md mx-auto rounded mb-4"}),a.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[i.relationship," - ",i.tone,i.occasion?` (${i.occasion})`:""]}),a.jsx("p",{className:"mb-4 whitespace-pre-line",children:i.message}),i.audioUrl&&a.jsxs("audio",{controls:!0,className:"w-full mb-4",children:[a.jsx("source",{src:i.audioUrl,type:"audio/mp3"}),"Your browser does not support audio playback."]}),a.jsxs("p",{className:"text-sm text-gray-300",children:["Created on:"," ",(f=i.createdAt)!=null&&f.seconds?new Date(i.createdAt.seconds*1e3).toLocaleString():"Unknown"]}),a.jsx("div",{className:"mt-8 text-center",children:a.jsx("button",{onClick:()=>r("/"),className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-200",children:"Create Your Own Soul Hug"})})]}):a.jsx("p",{className:"p-6 text-white",children:"No Soul Hug to display."})}function v$(){const[t,e]=g.useState([]),[n,r]=g.useState({total:0,byTone:{},byRelationship:{},byOccasion:{},totalCreditsUsed:0,uniqueUsers:0,recentActivity:[]}),[s,i]=g.useState(!0),[,o]=ya();g.useEffect(()=>{const h=pt.onAuthStateChanged(f=>{f&&f.email==="thecustomsoundarchitect@gmail.com"?l():o("/")});return()=>h()},[o]);const l=async()=>{i(!0);try{const f=(await mC(Sv(Vi,"soulhugs"))).docs.map(p=>{const _=p.data();return{id:p.id,tone:_.tone||"",relationship:_.relationship||"",occasion:_.occasion||"",createdAt:_.createdAt,userId:_.userId||"",creditsUsed:_.creditsUsed||0}});e(f),c(f)}catch(h){console.error("Error fetching Soul Hugs:",h)}finally{i(!1)}},c=h=>{const f={},p={},_={};let I=0;const x=new Set;h.forEach(v=>{const y=v.tone||"Unknown";f[y]=(f[y]||0)+1;const b=v.relationship||"Unknown";p[b]=(p[b]||0)+1;const S=v.occasion||"Just because";_[S]=(_[S]||0)+1,I+=v.creditsUsed||0,v.userId&&x.add(v.userId)});const E=h.filter(v=>v.createdAt).sort((v,y)=>{const b=v.createdAt.toDate?v.createdAt.toDate():new Date(v.createdAt);return(y.createdAt.toDate?y.createdAt.toDate():new Date(y.createdAt)).getTime()-b.getTime()}).slice(0,10);r({total:h.length,byTone:f,byRelationship:p,byOccasion:_,totalCreditsUsed:I,uniqueUsers:x.size,recentActivity:E})},d=h=>{if(!h)return"Unknown";const f=h.toDate?h.toDate():new Date(h);return f.toLocaleDateString()+" "+f.toLocaleTimeString()};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-800 flex items-center justify-center",children:a.jsx("div",{className:"text-white text-xl",children:"Loading analytics..."})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-800 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-white",children:"Admin Dashboard"}),a.jsx(De,{onClick:()=>o("/"),className:"bg-white/20 hover:bg-white/30 text-white",children:"Back to Home"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{className:"pb-2",children:a.jsx(kt,{className:"text-sm text-white/80",children:"Total Soul Hugs"})}),a.jsx(ft,{children:a.jsx("div",{className:"text-3xl font-bold",children:n.total})})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{className:"pb-2",children:a.jsx(kt,{className:"text-sm text-white/80",children:"Unique Users"})}),a.jsx(ft,{children:a.jsx("div",{className:"text-3xl font-bold",children:n.uniqueUsers})})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{className:"pb-2",children:a.jsx(kt,{className:"text-sm text-white/80",children:"Credits Used"})}),a.jsx(ft,{children:a.jsx("div",{className:"text-3xl font-bold",children:n.totalCreditsUsed})})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{className:"pb-2",children:a.jsx(kt,{className:"text-sm text-white/80",children:"Avg per User"})}),a.jsx(ft,{children:a.jsx("div",{className:"text-3xl font-bold",children:n.uniqueUsers>0?Math.round(n.total/n.uniqueUsers*10)/10:0})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{children:a.jsx(kt,{children:"Soul Hugs by Tone"})}),a.jsx(ft,{children:a.jsx("div",{className:"space-y-2",children:Object.entries(n.byTone).sort(([,h],[,f])=>f-h).map(([h,f])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"capitalize",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 bg-white/20 rounded-full h-2",children:a.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${f/n.total*100}%`}})}),a.jsx("span",{className:"text-sm font-mono w-8 text-right",children:f})]})]},h))})})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{children:a.jsx(kt,{children:"Soul Hugs by Relationship"})}),a.jsx(ft,{children:a.jsx("div",{className:"space-y-2",children:Object.entries(n.byRelationship).sort(([,h],[,f])=>f-h).map(([h,f])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"capitalize",children:h}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-16 bg-white/20 rounded-full h-2",children:a.jsx("div",{className:"bg-white rounded-full h-2",style:{width:`${f/n.total*100}%`}})}),a.jsx("span",{className:"text-sm font-mono w-8 text-right",children:f})]})]},h))})})]})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white mb-8",children:[a.jsx(Pt,{children:a.jsx(kt,{children:"Soul Hugs by Occasion"})}),a.jsx(ft,{children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(n.byOccasion).sort(([,h],[,f])=>f-h).map(([h,f])=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:f}),a.jsx("div",{className:"text-sm text-white/80 capitalize",children:h})]},h))})})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white",children:[a.jsx(Pt,{children:a.jsx(kt,{children:"Recent Activity"})}),a.jsx(ft,{children:a.jsx("div",{className:"space-y-3",children:n.recentActivity.map((h,f)=>a.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10 last:border-b-0",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[h.relationship," • ",h.tone]}),a.jsx("div",{className:"text-sm text-white/60",children:h.occasion||"Just because"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm",children:d(h.createdAt)}),a.jsxs("div",{className:"text-xs text-white/60",children:[h.creditsUsed||0," credits"]})]})]},f))})})]})]})})}function x$(){const[,t]=ya(),{user:e}=Lv(),n=s=>{alert(`${s} upgrade flow will be implemented soon. You'll be redirected to secure payment processing.`)},r={free:[{name:"3 free credits on signup",included:!0},{name:"Basic Soul Hug creation",included:!0},{name:"Limited music library (3 tracks)",included:!0},{name:"Standard cover images",included:!0},{name:"30-second audio messages",included:!0},{name:"Basic sharing features",included:!0},{name:"Prompt regeneration",included:!1},{name:"Premium music library",included:!1},{name:"Extended audio messages (up to 2 min)",included:!1},{name:"Custom cover uploads",included:!1},{name:"Priority support",included:!1}],starter:[{name:"10 credits monthly",included:!0},{name:"All free features",included:!0},{name:"Prompt regeneration (1 credit each)",included:!0},{name:"Premium music library (7 tracks)",included:!0},{name:"Extended audio messages (up to 1 min)",included:!0},{name:"Custom cover uploads",included:!0},{name:"Advanced sharing options",included:!0},{name:"Email support",included:!0},{name:"Extended audio messages (up to 2 min)",included:!1},{name:"Unlimited regenerations",included:!1},{name:"Priority support",included:!1}],premium:[{name:"30 credits monthly",included:!0},{name:"All starter features",included:!0},{name:"Extended audio messages (up to 2 min)",included:!0},{name:"Full premium music library",included:!0},{name:"Unlimited custom covers",included:!0},{name:"Advanced AI personalization",included:!0},{name:"Priority support",included:!0},{name:"Early access to new features",included:!0},{name:"Analytics dashboard",included:!0},{name:"Bulk creation tools",included:!0},{name:"API access",included:!1}]};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-800 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Choose Your Plan"}),a.jsx("p",{className:"text-xl text-white/90 max-w-3xl mx-auto",children:"Unlock the full potential of Soul Hug creation with our flexible pricing plans"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white relative",children:[a.jsxs(Pt,{className:"text-center pb-4",children:[a.jsx(kt,{className:"text-2xl",children:"Free"}),a.jsx("div",{className:"text-4xl font-bold",children:"$0"}),a.jsx("div",{className:"text-white/70",children:"Forever"})]}),a.jsxs(ft,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:r.free.map((s,i)=>a.jsxs("div",{className:"flex items-center gap-3",children:[s.included?a.jsx(Uu,{className:"w-5 h-5 text-green-400 flex-shrink-0"}):a.jsx(bl,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),a.jsx("span",{className:`text-sm ${s.included?"":"text-white/50"}`,children:s.name})]},i))}),a.jsx(De,{className:"w-full mt-6",variant:"outline",disabled:!e,onClick:()=>t("/"),children:e?"Current Plan":"Sign Up Free"})]})]}),a.jsxs(ht,{className:"bg-white/15 border-white/30 text-white relative scale-105 shadow-2xl",children:[a.jsx(sR,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black",children:"Most Popular"}),a.jsxs(Pt,{className:"text-center pb-4",children:[a.jsx(kt,{className:"text-2xl",children:"Starter"}),a.jsx("div",{className:"text-4xl font-bold",children:"$9.99"}),a.jsx("div",{className:"text-white/70",children:"per month"})]}),a.jsxs(ft,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:r.starter.map((s,i)=>a.jsxs("div",{className:"flex items-center gap-3",children:[s.included?a.jsx(Uu,{className:"w-5 h-5 text-green-400 flex-shrink-0"}):a.jsx(bl,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),a.jsx("span",{className:`text-sm ${s.included?"":"text-white/50"}`,children:s.name})]},i))}),a.jsx(De,{className:"w-full mt-6 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-black font-semibold",onClick:()=>n("Starter"),children:"Upgrade to Starter"})]})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white relative",children:[a.jsxs(Pt,{className:"text-center pb-4",children:[a.jsx(kt,{className:"text-2xl",children:"Premium"}),a.jsx("div",{className:"text-4xl font-bold",children:"$19.99"}),a.jsx("div",{className:"text-white/70",children:"per month"})]}),a.jsxs(ft,{className:"space-y-4",children:[a.jsx("div",{className:"space-y-3",children:r.premium.map((s,i)=>a.jsxs("div",{className:"flex items-center gap-3",children:[s.included?a.jsx(Uu,{className:"w-5 h-5 text-green-400 flex-shrink-0"}):a.jsx(bl,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),a.jsx("span",{className:`text-sm ${s.included?"":"text-white/50"}`,children:s.name})]},i))}),a.jsx(De,{className:"w-full mt-6 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600",onClick:()=>n("Premium"),children:"Upgrade to Premium"})]})]})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white mb-8",children:[a.jsx(Pt,{children:a.jsx(kt,{className:"text-center text-2xl",children:"How Credits Work"})}),a.jsxs(ft,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:"1 Credit"}),a.jsx("div",{className:"text-sm",children:"Basic Soul Hug Creation"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:"1 Credit"}),a.jsx("div",{className:"text-sm",children:"AI Prompt Regeneration"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"2 Credits"}),a.jsx("div",{className:"text-sm",children:"Premium Audio Features"})]})]}),a.jsx("div",{className:"text-center mt-6 text-white/80",children:"Credits refresh monthly with your subscription. Unused credits don't roll over."})]})]}),a.jsxs(ht,{className:"bg-white/10 border-white/20 text-white mb-8",children:[a.jsx(Pt,{children:a.jsx(kt,{className:"text-center text-2xl",children:"Frequently Asked Questions"})}),a.jsxs(ft,{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Can I change plans anytime?"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"What happens to unused credits?"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Credits are refreshed monthly and don't carry over. Use them to create amazing Soul Hugs!"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Is there a free trial for paid plans?"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Every new user starts with 3 free credits to experience the platform. No trial needed!"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2",children:"How do I cancel my subscription?"}),a.jsx("p",{className:"text-white/80 text-sm",children:"You can cancel anytime from your account settings. You'll keep access until the end of your billing period."})]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx(De,{onClick:()=>t("/"),variant:"outline",className:"text-white border-white/30 hover:bg-white/10",children:"Back to Home"})})]})})}function w$(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(ht,{className:"w-full max-w-md mx-4",children:a.jsxs(ft,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(uD,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function _$(){return a.jsxs(O2,{children:[a.jsx(In,{path:"/",component:K9}),a.jsx(In,{path:"/creative-flow",component:X8}),a.jsx(In,{path:"/craft-soul-hug",component:t$}),a.jsx(In,{path:"/audio-hug",component:rR}),a.jsx(In,{path:"/audio-hug-test",component:l$}),a.jsx(In,{path:"/audio-hug-test-fork",component:m$}),a.jsx(In,{path:"/my-hugs",component:g$}),a.jsx(In,{path:"/hug/:id",component:y$}),a.jsx(In,{path:"/admin",component:v$}),a.jsx(In,{path:"/pricing",component:x$}),a.jsx(In,{component:w$})]})}function b$(){return a.jsx(aj,{client:cj,children:a.jsxs(RM,{children:[a.jsx("div",{className:"min-h-screen",children:a.jsx(_$,{})}),a.jsx(tO,{})]})})}QT(document.getElementById("root")).render(a.jsx(b$,{}));
